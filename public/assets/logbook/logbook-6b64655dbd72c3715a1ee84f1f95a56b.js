!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=Q.type(t);return"function"===n||Q.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function i(t,e,n){if(Q.isFunction(e))return Q.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return Q.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(ae.test(e))return Q.filter(e,t,n);e=Q.filter(e,t)}return Q.grep(t,function(t){return G.call(e,t)>=0!==n})}function r(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e=fe[t]={};return Q.each(t.match(de)||[],function(t,n){e[n]=!0}),e}function s(){K.removeEventListener("DOMContentLoaded",s,!1),t.removeEventListener("load",s,!1),Q.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Q.expando+Math.random()}function l(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(we,"-$1").toLowerCase(),n=t.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:be.test(n)?Q.parseJSON(n):n}catch(r){}ve.set(t,e,n)}else n=void 0;return n}function c(){return!0}function u(){return!1}function h(){try{return K.activeElement}catch(t){}}function p(t,e){return Q.nodeName(t,"table")&&Q.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function d(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function f(t){var e=je.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function g(t,e){for(var n=0,i=t.length;i>n;n++)ye.set(t[n],"globalEval",!e||ye.get(e[n],"globalEval"))}function m(t,e){var n,i,r,o,s,a,l,c;if(1===e.nodeType){if(ye.hasData(t)&&(o=ye.access(t),s=ye.set(e,o),c=o.events)){delete s.handle,s.events={};for(r in c)for(n=0,i=c[r].length;i>n;n++)Q.event.add(e,r,c[r][n])}ve.hasData(t)&&(a=ve.access(t),l=Q.extend({},a),ve.set(e,l))}}function y(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&Q.nodeName(t,e)?Q.merge([t],n):n}function v(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Te.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function b(e,n){var i,r=Q(n.createElement(e)).appendTo(n.body),o=t.getDefaultComputedStyle&&(i=t.getDefaultComputedStyle(r[0]))?i.display:Q.css(r[0],"display");return r.detach(),o}function w(t){var e=K,n=ze[t];return n||(n=b(t,e),"none"!==n&&n||(He=(He||Q("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=He[0].contentDocument,e.write(),e.close(),n=b(t,e),He.detach()),ze[t]=n),n}function x(t,e,n){var i,r,o,s,a=t.style;return n=n||Ve(t),n&&(s=n.getPropertyValue(e)||n[e]),n&&(""!==s||Q.contains(t.ownerDocument,t)||(s=Q.style(t,e)),$e.test(s)&&Be.test(e)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o)),void 0!==s?s+"":s}function _(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function k(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),i=e,r=Ue.length;r--;)if(e=Ue[r]+n,e in t)return e;return i}function T(t,e,n){var i=Ye.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function S(t,e,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===e?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=Q.css(t,n+_e[o],!0,r)),i?("content"===n&&(s-=Q.css(t,"padding"+_e[o],!0,r)),"margin"!==n&&(s-=Q.css(t,"border"+_e[o]+"Width",!0,r))):(s+=Q.css(t,"padding"+_e[o],!0,r),"padding"!==n&&(s+=Q.css(t,"border"+_e[o]+"Width",!0,r)));return s}function C(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=Ve(t),s="border-box"===Q.css(t,"boxSizing",!1,o);if(0>=r||null==r){if(r=x(t,e,o),(0>r||null==r)&&(r=t.style[e]),$e.test(r))return r;i=s&&(J.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+S(t,e,n||(s?"border":"content"),i,o)+"px"}function P(t,e){for(var n,i,r,o=[],s=0,a=t.length;a>s;s++)i=t[s],i.style&&(o[s]=ye.get(i,"olddisplay"),n=i.style.display,e?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&ke(i)&&(o[s]=ye.access(i,"olddisplay",w(i.nodeName)))):(r=ke(i),"none"===n&&r||ye.set(i,"olddisplay",r?n:Q.css(i,"display"))));for(s=0;a>s;s++)i=t[s],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?o[s]||"":"none"));return t}function D(t,e,n,i,r){return new D.prototype.init(t,e,n,i,r)}function M(){return setTimeout(function(){Je=void 0}),Je=Q.now()}function A(t,e){var n,i=0,r={height:t};for(e=e?1:0;4>i;i+=2-e)n=_e[i],r["margin"+n]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function O(t,e,n){for(var i,r=(nn[e]||[]).concat(nn["*"]),o=0,s=r.length;s>o;o++)if(i=r[o].call(n,e,t))return i}function E(t,e,n){var i,r,o,s,a,l,c,u,h=this,p={},d=t.style,f=t.nodeType&&ke(t),g=ye.get(t,"fxshow");n.queue||(a=Q._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,Q.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],c=Q.css(t,"display"),u="none"===c?ye.get(t,"olddisplay")||w(t.nodeName):c,"inline"===u&&"none"===Q.css(t,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in e)if(r=e[i],Ze.exec(r)){if(delete e[i],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;f=!0}p[i]=g&&g[i]||Q.style(t,i)}else c=void 0;if(Q.isEmptyObject(p))"inline"===("none"===c?w(t.nodeName):c)&&(d.display=c);else{g?"hidden"in g&&(f=g.hidden):g=ye.access(t,"fxshow",{}),o&&(g.hidden=!f),f?Q(t).show():h.done(function(){Q(t).hide()}),h.done(function(){var e;ye.remove(t,"fxshow");for(e in p)Q.style(t,e,p[e])});for(i in p)s=O(f?g[i]:0,i,h),i in g||(g[i]=s.start,f&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function L(t,e){var n,i,r,o,s;for(n in t)if(i=Q.camelCase(n),r=e[i],o=t[n],Q.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),s=Q.cssHooks[i],s&&"expand"in s){o=s.expand(o),delete t[i];for(n in o)n in t||(t[n]=o[n],e[n]=r)}else e[i]=r}function N(t,e,n){var i,r,o=0,s=en.length,a=Q.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=Je||M(),n=Math.max(0,c.startTime+c.duration-e),i=n/c.duration||0,o=1-i,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(o);return a.notifyWith(t,[c,o,n]),1>o&&l?n:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:Q.extend({},e),opts:Q.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Je||M(),duration:n.duration,tweens:[],createTween:function(e,n){var i=Q.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)c.tweens[n].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),u=c.props;for(L(u,c.opts.specialEasing);s>o;o++)if(i=en[o].call(c,t,u,c.opts))return i;return Q.map(u,O,c),Q.isFunction(c.opts.start)&&c.opts.start.call(t,c),Q.fx.timer(Q.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function I(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(de)||[];if(Q.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function j(t,e,n,i){function r(a){var l;return o[a]=!0,Q.each(t[a]||[],function(t,a){var c=a(e,n,i);return"string"!=typeof c||s||o[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),r(c),!1)}),l}var o={},s=t===_n;return r(e.dataTypes[0])||!o["*"]&&r("*")}function R(t,e){var n,i,r=Q.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&Q.extend(!0,t,i),t}function F(t,e,n){for(var i,r,o,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function H(t,e,n,i){var r,o,s,a,l,c={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=u.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=c[l+" "+o]||c["* "+o],!s)for(r in c)if(a=r.split(" "),a[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[r]:c[r]!==!0&&(o=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function z(t,e,n,i){var r;if(Q.isArray(e))Q.each(e,function(e,r){n||Cn.test(t)?i(t,r):z(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==Q.type(e))i(t,e);else for(r in e)z(t+"["+r+"]",e[r],n,i)}function B(t){return Q.isWindow(t)?t:9===t.nodeType&&t.defaultView}var $=[],V=$.slice,W=$.concat,Y=$.push,G=$.indexOf,X={},q=X.toString,U=X.hasOwnProperty,J={},K=t.document,Z="2.1.1",Q=function(t,e){return new Q.fn.init(t,e)},te=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ee=/^-ms-/,ne=/-([\da-z])/gi,ie=function(t,e){return e.toUpperCase()};Q.fn=Q.prototype={jquery:Z,constructor:Q,selector:"",length:0,toArray:function(){return V.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:V.call(this)},pushStack:function(t){var e=Q.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return Q.each(this,t,e)},map:function(t){return this.pushStack(Q.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(V.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Y,sort:$.sort,splice:$.splice},Q.extend=Q.fn.extend=function(){var t,e,n,i,r,o,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||Q.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],i=t[e],s!==i&&(c&&i&&(Q.isPlainObject(i)||(r=Q.isArray(i)))?(r?(r=!1,o=n&&Q.isArray(n)?n:[]):o=n&&Q.isPlainObject(n)?n:{},s[e]=Q.extend(c,o,i)):void 0!==i&&(s[e]=i));return s},Q.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===Q.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!Q.isArray(t)&&t-parseFloat(t)>=0},isPlainObject:function(t){return"object"!==Q.type(t)||t.nodeType||Q.isWindow(t)?!1:t.constructor&&!U.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?X[q.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=Q.trim(t),t&&(1===t.indexOf("use strict")?(e=K.createElement("script"),e.text=t,K.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(ee,"ms-").replace(ne,ie)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var r,o=0,s=t.length,a=n(t);if(i){if(a)for(;s>o&&(r=e.apply(t[o],i),r!==!1);o++);else for(o in t)if(r=e.apply(t[o],i),r===!1)break}else if(a)for(;s>o&&(r=e.call(t[o],o,t[o]),r!==!1);o++);else for(o in t)if(r=e.call(t[o],o,t[o]),r===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(te,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?Q.merge(i,"string"==typeof t?[t]:t):Y.call(i,t)),i},inArray:function(t,e,n){return null==e?-1:G.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;n>i;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i,r=[],o=0,s=t.length,a=!n;s>o;o++)i=!e(t[o],o),i!==a&&r.push(t[o]);return r},map:function(t,e,i){var r,o=0,s=t.length,a=n(t),l=[];if(a)for(;s>o;o++)r=e(t[o],o,i),null!=r&&l.push(r);else for(o in t)r=e(t[o],o,i),null!=r&&l.push(r);return W.apply([],l)},guid:1,proxy:function(t,e){var n,i,r;return"string"==typeof e&&(n=t[e],e=t,t=n),Q.isFunction(t)?(i=V.call(arguments,2),r=function(){return t.apply(e||this,i.concat(V.call(arguments)))},r.guid=t.guid=t.guid||Q.guid++,r):void 0},now:Date.now,support:J}),Q.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){X["[object "+e+"]"]=e.toLowerCase()});var re=function(t){function e(t,e,n,i){var r,o,s,a,l,c,h,d,f,g;if((e?e.ownerDocument||e:z)!==E&&O(e),e=e||E,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(N&&!i){if(r=ve.exec(t))if(s=r[1]){if(9===a){if(o=e.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&F(e,o)&&o.id===s)return n.push(o),n}else{if(r[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((s=r[3])&&x.getElementsByClassName&&e.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(s)),n}if(x.qsa&&(!I||!I.test(t))){if(d=h=H,f=e,g=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=S(t),(h=e.getAttribute("id"))?d=h.replace(we,"\\$&"):e.setAttribute("id",d),d="[id='"+d+"'] ",l=c.length;l--;)c[l]=d+p(c[l]);f=be.test(t)&&u(e.parentNode)||e,g=c.join(",")}if(g)try{return Q.apply(n,f.querySelectorAll(g)),n}catch(m){}finally{h||e.removeAttribute("id")}}}return P(t.replace(le,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>_.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[H]=!0,t}function r(t){var e=E.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),i=t.length;i--;)_.attrHandle[n[i]]=e}function s(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||q)-(~t.sourceIndex||q);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return i(function(e){return e=+e,i(function(n,i){for(var r,o=t([],n.length,e),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function u(t){return t&&typeof t.getElementsByTagName!==X&&t}function h(){}function p(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function d(t,e,n){var i=e.dir,r=n&&"parentNode"===i,o=$++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,o)}:function(e,n,s){var a,l,c=[B,o];if(s){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||r){if(l=e[H]||(e[H]={}),(a=l[i])&&a[0]===B&&a[1]===o)return c[2]=a[2];if(l[i]=c,c[2]=t(e,n,s))return!0}}}function f(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function g(t,n,i){for(var r=0,o=n.length;o>r;r++)e(t,n[r],i);return i}function m(t,e,n,i,r){for(var o,s=[],a=0,l=t.length,c=null!=e;l>a;a++)(o=t[a])&&(!n||n(o,i,r))&&(s.push(o),c&&e.push(a));return s}function y(t,e,n,r,o,s){return r&&!r[H]&&(r=y(r)),o&&!o[H]&&(o=y(o,s)),i(function(i,s,a,l){var c,u,h,p=[],d=[],f=s.length,y=i||g(e||"*",a.nodeType?[a]:a,[]),v=!t||!i&&e?y:m(y,p,t,a,l),b=n?o||(i?t:f||r)?[]:s:v;if(n&&n(v,b,a,l),r)for(c=m(b,d),r(c,[],a,l),u=c.length;u--;)(h=c[u])&&(b[d[u]]=!(v[d[u]]=h));if(i){if(o||t){if(o){for(c=[],u=b.length;u--;)(h=b[u])&&c.push(v[u]=h);o(null,b=[],c,l)}for(u=b.length;u--;)(h=b[u])&&(c=o?ee.call(i,h):p[u])>-1&&(i[c]=!(s[c]=h))}}else b=m(b===s?b.splice(f,b.length):b),o?o(null,s,b,l):Q.apply(s,b)})}function v(t){for(var e,n,i,r=t.length,o=_.relative[t[0].type],s=o||_.relative[" "],a=o?1:0,l=d(function(t){return t===e},s,!0),c=d(function(t){return ee.call(e,t)>-1},s,!0),u=[function(t,n,i){return!o&&(i||n!==D)||((e=n).nodeType?l(t,n,i):c(t,n,i))}];r>a;a++)if(n=_.relative[t[a].type])u=[d(f(u),n)];else{if(n=_.filter[t[a].type].apply(null,t[a].matches),n[H]){for(i=++a;r>i&&!_.relative[t[i].type];i++);return y(a>1&&f(u),a>1&&p(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(le,"$1"),n,i>a&&v(t.slice(a,i)),r>i&&v(t=t.slice(i)),r>i&&p(t))}u.push(n)}return f(u)}function b(t,n){var r=n.length>0,o=t.length>0,s=function(i,s,a,l,c){var u,h,p,d=0,f="0",g=i&&[],y=[],v=D,b=i||o&&_.find.TAG("*",c),w=B+=null==v?1:Math.random()||.1,x=b.length;for(c&&(D=s!==E&&s);f!==x&&null!=(u=b[f]);f++){if(o&&u){for(h=0;p=t[h++];)if(p(u,s,a)){l.push(u);break}c&&(B=w)}r&&((u=!p&&u)&&d--,i&&g.push(u))}if(d+=f,r&&f!==d){for(h=0;p=n[h++];)p(g,y,s,a);if(i){if(d>0)for(;f--;)g[f]||y[f]||(y[f]=K.call(l));y=m(y)}Q.apply(l,y),c&&!i&&y.length>0&&d+n.length>1&&e.uniqueSort(l)}return c&&(B=w,D=v),g};return r?i(s):s}var w,x,_,k,T,S,C,P,D,M,A,O,E,L,N,I,j,R,F,H="sizzle"+-new Date,z=t.document,B=0,$=0,V=n(),W=n(),Y=n(),G=function(t,e){return t===e&&(A=!0),0},X="undefined",q=1<<31,U={}.hasOwnProperty,J=[],K=J.pop,Z=J.push,Q=J.push,te=J.slice,ee=J.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=re.replace("w","w#"),se="\\["+ie+"*("+re+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ie+"*\\]",ae=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+se+")*)|.*)\\)|)",le=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),ce=new RegExp("^"+ie+"*,"+ie+"*"),ue=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),he=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),pe=new RegExp(ae),de=new RegExp("^"+oe+"$"),fe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+se),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ye=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,we=/'|\\/g,xe=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),_e=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Q.apply(J=te.call(z.childNodes),z.childNodes),J[z.childNodes.length].nodeType}catch(ke){Q={apply:J.length?function(t,e){Z.apply(t,te.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}x=e.support={},T=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},O=e.setDocument=function(t){var e,n=t?t.ownerDocument||t:z,i=n.defaultView;return n!==E&&9===n.nodeType&&n.documentElement?(E=n,L=n.documentElement,N=!T(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){O()},!1):i.attachEvent&&i.attachEvent("onunload",function(){O()})),x.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=r(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=ye.test(n.getElementsByClassName)&&r(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),x.getById=r(function(t){return L.appendChild(t).id=H,!n.getElementsByName||!n.getElementsByName(H).length}),x.getById?(_.find.ID=function(t,e){if(typeof e.getElementById!==X&&N){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},_.filter.ID=function(t){var e=t.replace(xe,_e);return function(t){return t.getAttribute("id")===e}}):(delete _.find.ID,_.filter.ID=function(t){var e=t.replace(xe,_e);return function(t){var n=typeof t.getAttributeNode!==X&&t.getAttributeNode("id");return n&&n.value===e}}),_.find.TAG=x.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==X?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},_.find.CLASS=x.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==X&&N?e.getElementsByClassName(t):void 0},j=[],I=[],(x.qsa=ye.test(n.querySelectorAll))&&(r(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&I.push("[*^$]="+ie+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||I.push("\\["+ie+"*(?:value|"+ne+")"),t.querySelectorAll(":checked").length||I.push(":checked")}),r(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&I.push("name"+ie+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),I.push(",.*:")})),(x.matchesSelector=ye.test(R=L.matches||L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&r(function(t){x.disconnectedMatch=R.call(t,"div"),R.call(t,"[s!='']:x"),j.push("!=",ae)}),I=I.length&&new RegExp(I.join("|")),j=j.length&&new RegExp(j.join("|")),e=ye.test(L.compareDocumentPosition),F=e||ye.test(L.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},G=e?function(t,e){if(t===e)return A=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!x.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===z&&F(z,t)?-1:e===n||e.ownerDocument===z&&F(z,e)?1:M?ee.call(M,t)-ee.call(M,e):0:4&i?-1:1)}:function(t,e){if(t===e)return A=!0,0;var i,r=0,o=t.parentNode,a=e.parentNode,l=[t],c=[e];if(!o||!a)return t===n?-1:e===n?1:o?-1:a?1:M?ee.call(M,t)-ee.call(M,e):0;if(o===a)return s(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)c.unshift(i);for(;l[r]===c[r];)r++;return r?s(l[r],c[r]):l[r]===z?-1:c[r]===z?1:0},n):E},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==E&&O(t),n=n.replace(he,"='$1']"),!(!x.matchesSelector||!N||j&&j.test(n)||I&&I.test(n)))try{var i=R.call(t,n);if(i||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(r){}return e(n,E,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==E&&O(t),F(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==E&&O(t);var n=_.attrHandle[e.toLowerCase()],i=n&&U.call(_.attrHandle,e.toLowerCase())?n(t,e,!N):void 0;return void 0!==i?i:x.attributes||!N?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,r=0;if(A=!x.detectDuplicates,M=!x.sortStable&&t.slice(0),t.sort(G),A){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return M=null,t},k=e.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=k(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=k(e);return n},_=e.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(xe,_e),t[3]=(t[3]||t[4]||t[5]||"").replace(xe,_e),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return fe.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&pe.test(n)&&(e=S(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(xe,_e).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=V[t+" "];return e||(e=new RegExp("(^|"+ie+")"+t+"("+ie+"|$)"))&&V(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==X&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var o=e.attr(r,t);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var c,u,h,p,d,f,g=o!==s?"nextSibling":"previousSibling",m=e.parentNode,y=a&&e.nodeName.toLowerCase(),v=!l&&!a;if(m){if(o){for(;g;){for(h=e;h=h[g];)if(a?h.nodeName.toLowerCase()===y:1===h.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&v){for(u=m[H]||(m[H]={}),c=u[t]||[],d=c[0]===B&&c[1],p=c[0]===B&&c[2],h=d&&m.childNodes[d];h=++d&&h&&h[g]||(p=d=0)||f.pop();)if(1===h.nodeType&&++p&&h===e){u[t]=[B,d,p];break}}else if(v&&(c=(e[H]||(e[H]={}))[t])&&c[0]===B)p=c[1];else for(;(h=++d&&h&&h[g]||(p=d=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==y:1!==h.nodeType)||!++p||(v&&((h[H]||(h[H]={}))[t]=[B,p]),h!==e)););return p-=r,p===i||p%i===0&&p/i>=0}}},PSEUDO:function(t,n){var r,o=_.pseudos[t]||_.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[H]?o(n):o.length>1?(r=[t,t,"",n],_.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=o(t,n),s=r.length;s--;)i=ee.call(t,r[s]),t[i]=!(e[i]=r[s])}):function(t){return o(t,0,r)}):o}},pseudos:{not:i(function(t){var e=[],n=[],r=C(t.replace(le,"$1"));return r[H]?i(function(t,e,n,i){for(var o,s=r(t,null,i,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return function(e){return(e.textContent||e.innerText||k(e)).indexOf(t)>-1}}),lang:i(function(t){return de.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(xe,_e).toLowerCase(),function(e){var n;do if(n=N?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===L},focus:function(t){return t===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return me.test(t.nodeName)},input:function(t){return ge.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[0>n?n+e:n]}),even:c(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:c(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},_.pseudos.nth=_.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})_.pseudos[w]=l(w);return h.prototype=_.filters=_.pseudos,_.setFilters=new h,S=e.tokenize=function(t,n){var i,r,o,s,a,l,c,u=W[t+" "];if(u)return n?0:u.slice(0);for(a=t,l=[],c=_.preFilter;a;){(!i||(r=ce.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),i=!1,(r=ue.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(le," ")}),a=a.slice(i.length));for(s in _.filter)!(r=fe[s].exec(a))||c[s]&&!(r=c[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?e.error(t):W(t,l).slice(0)},C=e.compile=function(t,e){var n,i=[],r=[],o=Y[t+" "];if(!o){for(e||(e=S(t)),n=e.length;n--;)o=v(e[n]),o[H]?i.push(o):r.push(o);o=Y(t,b(r,i)),o.selector=t}return o},P=e.select=function(t,e,n,i){var r,o,s,a,l,c="function"==typeof t&&t,h=!i&&S(t=c.selector||t);if(n=n||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&x.getById&&9===e.nodeType&&N&&_.relative[o[1].type]){if(e=(_.find.ID(s.matches[0].replace(xe,_e),e)||[])[0],!e)return n;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=fe.needsContext.test(t)?0:o.length;r--&&(s=o[r],!_.relative[a=s.type]);)if((l=_.find[a])&&(i=l(s.matches[0].replace(xe,_e),be.test(o[0].type)&&u(e.parentNode)||e))){if(o.splice(r,1),t=i.length&&p(o),!t)return Q.apply(n,i),n;break}}return(c||C(t,h))(i,e,!N,n,be.test(t)&&u(e.parentNode)||e),n},x.sortStable=H.split("").sort(G).join("")===H,x.detectDuplicates=!!A,O(),x.sortDetached=r(function(t){return 1&t.compareDocumentPosition(E.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(ne,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);Q.find=re,Q.expr=re.selectors,Q.expr[":"]=Q.expr.pseudos,Q.unique=re.uniqueSort,Q.text=re.getText,Q.isXMLDoc=re.isXML,Q.contains=re.contains;var oe=Q.expr.match.needsContext,se=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ae=/^.[^:#\[\.,]*$/;Q.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?Q.find.matchesSelector(i,t)?[i]:[]:Q.find.matches(t,Q.grep(e,function(t){return 1===t.nodeType}))},Q.fn.extend({find:function(t){var e,n=this.length,i=[],r=this;if("string"!=typeof t)return this.pushStack(Q(t).filter(function(){for(e=0;n>e;e++)if(Q.contains(r[e],this))return!0}));for(e=0;n>e;e++)Q.find(t,r[e],i);return i=this.pushStack(n>1?Q.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&oe.test(t)?Q(t):t||[],!1).length}});var le,ce=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ue=Q.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:ce.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||le).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof Q?e[0]:e,Q.merge(this,Q.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:K,!0)),se.test(n[1])&&Q.isPlainObject(e))for(n in e)Q.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);
return this}return i=K.getElementById(n[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=K,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):Q.isFunction(t)?"undefined"!=typeof le.ready?le.ready(t):t(Q):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),Q.makeArray(t,this))};ue.prototype=Q.fn,le=Q(K);var he=/^(?:parents|prev(?:Until|All))/,pe={children:!0,contents:!0,next:!0,prev:!0};Q.extend({dir:function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&Q(t).is(n))break;i.push(t)}return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),Q.fn.extend({has:function(t){var e=Q(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(Q.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,i=0,r=this.length,o=[],s=oe.test(t)||"string"!=typeof t?Q(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&Q.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?Q.unique(o):o)},index:function(t){return t?"string"==typeof t?G.call(Q(t),this[0]):G.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(Q.unique(Q.merge(this.get(),Q(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),Q.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Q.dir(t,"parentNode")},parentsUntil:function(t,e,n){return Q.dir(t,"parentNode",n)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return Q.dir(t,"nextSibling")},prevAll:function(t){return Q.dir(t,"previousSibling")},nextUntil:function(t,e,n){return Q.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return Q.dir(t,"previousSibling",n)},siblings:function(t){return Q.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return Q.sibling(t.firstChild)},contents:function(t){return t.contentDocument||Q.merge([],t.childNodes)}},function(t,e){Q.fn[t]=function(n,i){var r=Q.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=Q.filter(i,r)),this.length>1&&(pe[t]||Q.unique(r),he.test(t)&&r.reverse()),this.pushStack(r)}});var de=/\S+/g,fe={};Q.Callbacks=function(t){t="string"==typeof t?fe[t]||o(t):Q.extend({},t);var e,n,i,r,s,a,l=[],c=!t.once&&[],u=function(o){for(e=t.memory&&o,n=!0,a=r||0,r=0,s=l.length,i=!0;l&&s>a;a++)if(l[a].apply(o[0],o[1])===!1&&t.stopOnFalse){e=!1;break}i=!1,l&&(c?c.length&&u(c.shift()):e?l=[]:h.disable())},h={add:function(){if(l){var n=l.length;!function o(e){Q.each(e,function(e,n){var i=Q.type(n);"function"===i?t.unique&&h.has(n)||l.push(n):n&&n.length&&"string"!==i&&o(n)})}(arguments),i?s=l.length:e&&(r=n,u(e))}return this},remove:function(){return l&&Q.each(arguments,function(t,e){for(var n;(n=Q.inArray(e,l,n))>-1;)l.splice(n,1),i&&(s>=n&&s--,a>=n&&a--)}),this},has:function(t){return t?Q.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=c=e=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,e||h.disable(),this},locked:function(){return!c},fireWith:function(t,e){return!l||n&&!c||(e=e||[],e=[t,e.slice?e.slice():e],i?c.push(e):u(e)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},Q.extend({Deferred:function(t){var e=[["resolve","done",Q.Callbacks("once memory"),"resolved"],["reject","fail",Q.Callbacks("once memory"),"rejected"],["notify","progress",Q.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return Q.Deferred(function(n){Q.each(e,function(e,o){var s=Q.isFunction(t[e])&&t[e];r[o[1]](function(){var t=s&&s.apply(this,arguments);t&&Q.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?Q.extend(t,i):i}},r={};return i.pipe=i.then,Q.each(e,function(t,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,o=V.call(arguments),s=o.length,a=1!==s||t&&Q.isFunction(t.promise)?s:0,l=1===a?t:Q.Deferred(),c=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?V.call(arguments):r,i===e?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(e=new Array(s),n=new Array(s),i=new Array(s);s>r;r++)o[r]&&Q.isFunction(o[r].promise)?o[r].promise().done(c(r,i,o)).fail(l.reject).progress(c(r,n,e)):--a;return a||l.resolveWith(i,o),l.promise()}});var ge;Q.fn.ready=function(t){return Q.ready.promise().done(t),this},Q.extend({isReady:!1,readyWait:1,holdReady:function(t){t?Q.readyWait++:Q.ready(!0)},ready:function(t){(t===!0?--Q.readyWait:Q.isReady)||(Q.isReady=!0,t!==!0&&--Q.readyWait>0||(ge.resolveWith(K,[Q]),Q.fn.triggerHandler&&(Q(K).triggerHandler("ready"),Q(K).off("ready"))))}}),Q.ready.promise=function(e){return ge||(ge=Q.Deferred(),"complete"===K.readyState?setTimeout(Q.ready):(K.addEventListener("DOMContentLoaded",s,!1),t.addEventListener("load",s,!1))),ge.promise(e)},Q.ready.promise();var me=Q.access=function(t,e,n,i,r,o,s){var a=0,l=t.length,c=null==n;if("object"===Q.type(n)){r=!0;for(a in n)Q.access(t,e,a,n[a],!0,o,s)}else if(void 0!==i&&(r=!0,Q.isFunction(i)||(s=!0),c&&(s?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(Q(t),n)})),e))for(;l>a;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return r?t:c?e.call(t):l?e(t[0],n):o};Q.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},a.uid=1,a.accepts=Q.acceptData,a.prototype={key:function(t){if(!a.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=a.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(i){e[this.expando]=n,Q.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var i,r=this.key(t),o=this.cache[r];if("string"==typeof e)o[e]=n;else if(Q.isEmptyObject(o))Q.extend(this.cache[r],e);else for(i in e)o[i]=e[i];return o},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){var i;return void 0===e||e&&"string"==typeof e&&void 0===n?(i=this.get(t,e),void 0!==i?i:this.get(t,Q.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i,r,o=this.key(t),s=this.cache[o];if(void 0===e)this.cache[o]={};else{Q.isArray(e)?i=e.concat(e.map(Q.camelCase)):(r=Q.camelCase(e),e in s?i=[e,r]:(i=r,i=i in s?[i]:i.match(de)||[])),n=i.length;for(;n--;)delete s[i[n]]}},hasData:function(t){return!Q.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var ye=new a,ve=new a,be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,we=/([A-Z])/g;Q.extend({hasData:function(t){return ve.hasData(t)||ye.hasData(t)},data:function(t,e,n){return ve.access(t,e,n)},removeData:function(t,e){ve.remove(t,e)},_data:function(t,e,n){return ye.access(t,e,n)},_removeData:function(t,e){ye.remove(t,e)}}),Q.fn.extend({data:function(t,e){var n,i,r,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(r=ve.get(o),1===o.nodeType&&!ye.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=Q.camelCase(i.slice(5)),l(o,i,r[i])));ye.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){ve.set(this,t)}):me(this,function(e){var n,i=Q.camelCase(t);if(o&&void 0===e){if(n=ve.get(o,t),void 0!==n)return n;if(n=ve.get(o,i),void 0!==n)return n;if(n=l(o,i,void 0),void 0!==n)return n}else this.each(function(){var n=ve.get(this,i);ve.set(this,i,e),-1!==t.indexOf("-")&&void 0!==n&&ve.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ve.remove(this,t)})}}),Q.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=ye.get(t,e),n&&(!i||Q.isArray(n)?i=ye.access(t,e,Q.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=Q.queue(t,e),i=n.length,r=n.shift(),o=Q._queueHooks(t,e),s=function(){Q.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return ye.get(t,n)||ye.access(t,n,{empty:Q.Callbacks("once memory").add(function(){ye.remove(t,[e+"queue",n])})})}}),Q.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?Q.queue(this[0],t):void 0===e?this:this.each(function(){var n=Q.queue(this,t,e);Q._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&Q.dequeue(this,t)})},dequeue:function(t){return this.each(function(){Q.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=Q.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)n=ye.get(o[s],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}});var xe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_e=["Top","Right","Bottom","Left"],ke=function(t,e){return t=e||t,"none"===Q.css(t,"display")||!Q.contains(t.ownerDocument,t)},Te=/^(?:checkbox|radio)$/i;!function(){var t=K.createDocumentFragment(),e=t.appendChild(K.createElement("div")),n=K.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),J.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",J.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Se="undefined";J.focusinBubbles="onfocusin"in t;var Ce=/^key/,Pe=/^(?:mouse|pointer|contextmenu)|click/,De=/^(?:focusinfocus|focusoutblur)$/,Me=/^([^.]*)(?:\.(.+)|)$/;Q.event={global:{},add:function(t,e,n,i,r){var o,s,a,l,c,u,h,p,d,f,g,m=ye.get(t);if(m)for(n.handler&&(o=n,n=o.handler,r=o.selector),n.guid||(n.guid=Q.guid++),(l=m.events)||(l=m.events={}),(s=m.handle)||(s=m.handle=function(e){return typeof Q!==Se&&Q.event.triggered!==e.type?Q.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(de)||[""],c=e.length;c--;)a=Me.exec(e[c])||[],d=g=a[1],f=(a[2]||"").split(".").sort(),d&&(h=Q.event.special[d]||{},d=(r?h.delegateType:h.bindType)||d,h=Q.event.special[d]||{},u=Q.extend({type:d,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&Q.expr.match.needsContext.test(r),namespace:f.join(".")},o),(p=l[d])||(p=l[d]=[],p.delegateCount=0,h.setup&&h.setup.call(t,i,f,s)!==!1||t.addEventListener&&t.addEventListener(d,s,!1)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?p.splice(p.delegateCount++,0,u):p.push(u),Q.event.global[d]=!0)},remove:function(t,e,n,i,r){var o,s,a,l,c,u,h,p,d,f,g,m=ye.hasData(t)&&ye.get(t);if(m&&(l=m.events)){for(e=(e||"").match(de)||[""],c=e.length;c--;)if(a=Me.exec(e[c])||[],d=g=a[1],f=(a[2]||"").split(".").sort(),d){for(h=Q.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,p=l[d]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)u=p[o],!r&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(p.splice(o,1),u.selector&&p.delegateCount--,h.remove&&h.remove.call(t,u));s&&!p.length&&(h.teardown&&h.teardown.call(t,f,m.handle)!==!1||Q.removeEvent(t,d,m.handle),delete l[d])}else for(d in l)Q.event.remove(t,d+e[c],n,i,!0);Q.isEmptyObject(l)&&(delete m.handle,ye.remove(t,"events"))}},trigger:function(e,n,i,r){var o,s,a,l,c,u,h,p=[i||K],d=U.call(e,"type")?e.type:e,f=U.call(e,"namespace")?e.namespace.split("."):[];if(s=a=i=i||K,3!==i.nodeType&&8!==i.nodeType&&!De.test(d+Q.event.triggered)&&(d.indexOf(".")>=0&&(f=d.split("."),d=f.shift(),f.sort()),c=d.indexOf(":")<0&&"on"+d,e=e[Q.expando]?e:new Q.Event(d,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:Q.makeArray(n,[e]),h=Q.event.special[d]||{},r||!h.trigger||h.trigger.apply(i,n)!==!1)){if(!r&&!h.noBubble&&!Q.isWindow(i)){for(l=h.delegateType||d,De.test(l+d)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(i.ownerDocument||K)&&p.push(a.defaultView||a.parentWindow||t)}for(o=0;(s=p[o++])&&!e.isPropagationStopped();)e.type=o>1?l:h.bindType||d,u=(ye.get(s,"events")||{})[e.type]&&ye.get(s,"handle"),u&&u.apply(s,n),u=c&&s[c],u&&u.apply&&Q.acceptData(s)&&(e.result=u.apply(s,n),e.result===!1&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||h._default&&h._default.apply(p.pop(),n)!==!1||!Q.acceptData(i)||c&&Q.isFunction(i[d])&&!Q.isWindow(i)&&(a=i[c],a&&(i[c]=null),Q.event.triggered=d,i[d](),Q.event.triggered=void 0,a&&(i[c]=a)),e.result}},dispatch:function(t){t=Q.event.fix(t);var e,n,i,r,o,s=[],a=V.call(arguments),l=(ye.get(this,"events")||{})[t.type]||[],c=Q.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(s=Q.event.handlers.call(this,t,l),e=0;(r=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,i=((Q.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a),void 0!==i&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,r,o,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==t.type){for(i=[],n=0;a>n;n++)o=e[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?Q(r,this).index(l)>=0:Q.find(r,this,null,[l]).length),i[r]&&i.push(o);i.length&&s.push({elem:l,handlers:i})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,r,o=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||K,i=n.documentElement,r=n.body,t.pageX=e.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[Q.expando])return t;var e,n,i,r=t.type,o=t,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Pe.test(r)?this.mouseHooks:Ce.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,t=new Q.Event(o),e=i.length;e--;)n=i[e],t[n]=o[n];return t.target||(t.target=K),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==h()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Q.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return Q.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=Q.extend(new Q.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?Q.event.trigger(r,null,e):Q.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},Q.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},Q.Event=function(t,e){return this instanceof Q.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?c:u):this.type=t,e&&Q.extend(this,e),this.timeStamp=t&&t.timeStamp||Q.now(),void(this[Q.expando]=!0)):new Q.Event(t,e)},Q.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=c,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=c,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=c,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},Q.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){Q.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return(!r||r!==i&&!Q.contains(i,r))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),J.focusinBubbles||Q.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){Q.event.simulate(e,t.target,Q.event.fix(t),!0)};Q.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=ye.access(i,e);r||i.addEventListener(t,n,!0),ye.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=ye.access(i,e)-1;r?ye.access(i,e,r):(i.removeEventListener(t,n,!0),ye.remove(i,e))}}}),Q.fn.extend({on:function(t,e,n,i,r){var o,s;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(s in t)this.on(s,e,n,t[s],r);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),i===!1)i=u;else if(!i)return this;return 1===r&&(o=i,i=function(t){return Q().off(t),o.apply(this,arguments)},i.guid=o.guid||(o.guid=Q.guid++)),this.each(function(){Q.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,Q(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=u),this.each(function(){Q.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){Q.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?Q.event.trigger(t,e,n,!0):void 0}});var Ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Oe=/<([\w:]+)/,Ee=/<|&#?\w+;/,Le=/<(?:script|style|link)/i,Ne=/checked\s*(?:[^=]|=\s*.checked.)/i,Ie=/^$|\/(?:java|ecma)script/i,je=/^true\/(.*)/,Re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Fe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Fe.optgroup=Fe.option,Fe.tbody=Fe.tfoot=Fe.colgroup=Fe.caption=Fe.thead,Fe.th=Fe.td,Q.extend({clone:function(t,e,n){var i,r,o,s,a=t.cloneNode(!0),l=Q.contains(t.ownerDocument,t);if(!(J.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||Q.isXMLDoc(t)))for(s=y(a),o=y(t),i=0,r=o.length;r>i;i++)v(o[i],s[i]);if(e)if(n)for(o=o||y(t),s=s||y(a),i=0,r=o.length;r>i;i++)m(o[i],s[i]);else m(t,a);return s=y(a,"script"),s.length>0&&g(s,!l&&y(t,"script")),a},buildFragment:function(t,e,n,i){for(var r,o,s,a,l,c,u=e.createDocumentFragment(),h=[],p=0,d=t.length;d>p;p++)if(r=t[p],r||0===r)if("object"===Q.type(r))Q.merge(h,r.nodeType?[r]:r);else if(Ee.test(r)){for(o=o||u.appendChild(e.createElement("div")),s=(Oe.exec(r)||["",""])[1].toLowerCase(),a=Fe[s]||Fe._default,o.innerHTML=a[1]+r.replace(Ae,"<$1></$2>")+a[2],c=a[0];c--;)o=o.lastChild;Q.merge(h,o.childNodes),o=u.firstChild,o.textContent=""}else h.push(e.createTextNode(r));for(u.textContent="",p=0;r=h[p++];)if((!i||-1===Q.inArray(r,i))&&(l=Q.contains(r.ownerDocument,r),o=y(u.appendChild(r),"script"),l&&g(o),n))for(c=0;r=o[c++];)Ie.test(r.type||"")&&n.push(r);return u},cleanData:function(t){for(var e,n,i,r,o=Q.event.special,s=0;void 0!==(n=t[s]);s++){if(Q.acceptData(n)&&(r=n[ye.expando],r&&(e=ye.cache[r]))){if(e.events)for(i in e.events)o[i]?Q.event.remove(n,i):Q.removeEvent(n,i,e.handle);ye.cache[r]&&delete ye.cache[r]}delete ve.cache[n[ve.expando]]}}}),Q.fn.extend({text:function(t){return me(this,function(t){return void 0===t?Q.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=p(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=p(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?Q.filter(t,this):this,r=0;null!=(n=i[r]);r++)e||1!==n.nodeType||Q.cleanData(y(n)),n.parentNode&&(e&&Q.contains(n.ownerDocument,n)&&g(y(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(Q.cleanData(y(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return Q.clone(this,t,e)})},html:function(t){return me(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Le.test(t)&&!Fe[(Oe.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Ae,"<$1></$2>");try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(Q.cleanData(y(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,Q.cleanData(y(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=W.apply([],t);var n,i,r,o,s,a,l=0,c=this.length,u=this,h=c-1,p=t[0],g=Q.isFunction(p);if(g||c>1&&"string"==typeof p&&!J.checkClone&&Ne.test(p))return this.each(function(n){var i=u.eq(n);g&&(t[0]=p.call(this,n,i.html())),i.domManip(t,e)});if(c&&(n=Q.buildFragment(t,this[0].ownerDocument,!1,this),i=n.firstChild,1===n.childNodes.length&&(n=i),i)){for(r=Q.map(y(n,"script"),d),o=r.length;c>l;l++)s=n,l!==h&&(s=Q.clone(s,!0,!0),o&&Q.merge(r,y(s,"script"))),e.call(this[l],s,l);if(o)for(a=r[r.length-1].ownerDocument,Q.map(r,f),l=0;o>l;l++)s=r[l],Ie.test(s.type||"")&&!ye.access(s,"globalEval")&&Q.contains(a,s)&&(s.src?Q._evalUrl&&Q._evalUrl(s.src):Q.globalEval(s.textContent.replace(Re,"")))}return this}}),Q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){Q.fn[t]=function(t){for(var n,i=[],r=Q(t),o=r.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),Q(r[s])[e](n),Y.apply(i,n.get());return this.pushStack(i)}});var He,ze={},Be=/^margin/,$e=new RegExp("^("+xe+")(?!px)[a-z%]+$","i"),Ve=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)};!function(){function e(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(o);var e=t.getComputedStyle(s,null);n="1%"!==e.top,i="4px"===e.width,r.removeChild(o)}var n,i,r=K.documentElement,o=K.createElement("div"),s=K.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",J.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(s),t.getComputedStyle&&Q.extend(J,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return null==i&&e(),i},reliableMarginRight:function(){var e,n=s.appendChild(K.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",r.appendChild(o),e=!parseFloat(t.getComputedStyle(n,null).marginRight),r.removeChild(o),e}}))}(),Q.swap=function(t,e,n,i){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];r=n.apply(t,i||[]);for(o in e)t.style[o]=s[o];return r};var We=/^(none|table(?!-c[ea]).+)/,Ye=new RegExp("^("+xe+")(.*)$","i"),Ge=new RegExp("^([+-])=("+xe+")","i"),Xe={position:"absolute",visibility:"hidden",display:"block"},qe={letterSpacing:"0",fontWeight:"400"},Ue=["Webkit","O","Moz","ms"];Q.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=x(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=Q.camelCase(e),l=t.style;return e=Q.cssProps[a]||(Q.cssProps[a]=k(l,a)),s=Q.cssHooks[e]||Q.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(r=s.get(t,!1,i))?r:l[e]:(o=typeof n,"string"===o&&(r=Ge.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(Q.css(t,e)),o="number"),void(null!=n&&n===n&&("number"!==o||Q.cssNumber[a]||(n+="px"),J.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,i))||(l[e]=n))))}},css:function(t,e,n,i){var r,o,s,a=Q.camelCase(e);return e=Q.cssProps[a]||(Q.cssProps[a]=k(t.style,a)),s=Q.cssHooks[e]||Q.cssHooks[a],s&&"get"in s&&(r=s.get(t,!0,n)),void 0===r&&(r=x(t,e,i)),"normal"===r&&e in qe&&(r=qe[e]),""===n||n?(o=parseFloat(r),n===!0||Q.isNumeric(o)?o||0:r):r}}),Q.each(["height","width"],function(t,e){Q.cssHooks[e]={get:function(t,n,i){return n?We.test(Q.css(t,"display"))&&0===t.offsetWidth?Q.swap(t,Xe,function(){return C(t,e,i)}):C(t,e,i):void 0},set:function(t,n,i){var r=i&&Ve(t);return T(t,n,i?S(t,e,i,"border-box"===Q.css(t,"boxSizing",!1,r),r):0)}}}),Q.cssHooks.marginRight=_(J.reliableMarginRight,function(t,e){return e?Q.swap(t,{display:"inline-block"},x,[t,"marginRight"]):void 0}),Q.each({margin:"",padding:"",border:"Width"},function(t,e){Q.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+_e[i]+e]=o[i]||o[i-2]||o[0];return r}},Be.test(t)||(Q.cssHooks[t+e].set=T)}),Q.fn.extend({css:function(t,e){return me(this,function(t,e,n){var i,r,o={},s=0;if(Q.isArray(e)){for(i=Ve(t),r=e.length;r>s;s++)o[e[s]]=Q.css(t,e[s],!1,i);return o}return void 0!==n?Q.style(t,e,n):Q.css(t,e)},t,e,arguments.length>1)},show:function(){return P(this,!0)},hide:function(){return P(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){ke(this)?Q(this).show():Q(this).hide()})}}),Q.Tween=D,D.prototype={constructor:D,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(Q.cssNumber[n]?"":"px")},cur:function(){var t=D.propHooks[this.prop];return t&&t.get?t.get(this):D.propHooks._default.get(this)},run:function(t){var e,n=D.propHooks[this.prop];return this.pos=e=this.options.duration?Q.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=Q.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){Q.fx.step[t.prop]?Q.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[Q.cssProps[t.prop]]||Q.cssHooks[t.prop])?Q.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},Q.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},Q.fx=D.prototype.init,Q.fx.step={};var Je,Ke,Ze=/^(?:toggle|show|hide)$/,Qe=new RegExp("^(?:([+-])=|)("+xe+")([a-z%]*)$","i"),tn=/queueHooks$/,en=[E],nn={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),r=Qe.exec(e),o=r&&r[3]||(Q.cssNumber[t]?"":"px"),s=(Q.cssNumber[t]||"px"!==o&&+i)&&Qe.exec(Q.css(n.elem,t)),a=1,l=20;if(s&&s[3]!==o){o=o||s[3],r=r||[],s=+i||1;do a=a||".5",s/=a,Q.style(n.elem,t,s+o);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return r&&(s=n.start=+s||+i||0,n.unit=o,n.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),n}]};Q.Animation=Q.extend(N,{tweener:function(t,e){Q.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;r>i;i++)n=t[i],nn[n]=nn[n]||[],nn[n].unshift(e)},prefilter:function(t,e){e?en.unshift(t):en.push(t)}}),Q.speed=function(t,e,n){var i=t&&"object"==typeof t?Q.extend({},t):{complete:n||!n&&e||Q.isFunction(t)&&t,duration:t,easing:n&&e||e&&!Q.isFunction(e)&&e};return i.duration=Q.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in Q.fx.speeds?Q.fx.speeds[i.duration]:Q.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){Q.isFunction(i.old)&&i.old.call(this),i.queue&&Q.dequeue(this,i.queue)},i},Q.fn.extend({fadeTo:function(t,e,n,i){return this.filter(ke).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=Q.isEmptyObject(t),o=Q.speed(e,n,i),s=function(){var e=N(this,Q.extend({},t),o);(r||ye.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=Q.timers,s=ye.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&tn.test(r)&&i(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));(e||!n)&&Q.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=ye.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=Q.timers,s=i?i.length:0;for(n.finish=!0,Q.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),Q.each(["toggle","show","hide"],function(t,e){var n=Q.fn[e];Q.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(A(e,!0),t,i,r)}}),Q.each({slideDown:A("show"),slideUp:A("hide"),slideToggle:A("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){Q.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),Q.timers=[],Q.fx.tick=function(){var t,e=0,n=Q.timers;for(Je=Q.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||Q.fx.stop(),Je=void 0},Q.fx.timer=function(t){Q.timers.push(t),t()?Q.fx.start():Q.timers.pop()},Q.fx.interval=13,Q.fx.start=function(){Ke||(Ke=setInterval(Q.fx.tick,Q.fx.interval))},Q.fx.stop=function(){clearInterval(Ke),Ke=null},Q.fx.speeds={slow:600,fast:200,_default:400},Q.fn.delay=function(t,e){return t=Q.fx?Q.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t=K.createElement("input"),e=K.createElement("select"),n=e.appendChild(K.createElement("option"));t.type="checkbox",J.checkOn=""!==t.value,J.optSelected=n.selected,e.disabled=!0,J.optDisabled=!n.disabled,t=K.createElement("input"),t.value="t",t.type="radio",J.radioValue="t"===t.value}();var rn,on,sn=Q.expr.attrHandle;Q.fn.extend({attr:function(t,e){return me(this,Q.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){Q.removeAttr(this,t)})}}),Q.extend({attr:function(t,e,n){var i,r,o=t.nodeType;return t&&3!==o&&8!==o&&2!==o?typeof t.getAttribute===Se?Q.prop(t,e,n):(1===o&&Q.isXMLDoc(t)||(e=e.toLowerCase(),i=Q.attrHooks[e]||(Q.expr.match.bool.test(e)?on:rn)),void 0===n?i&&"get"in i&&null!==(r=i.get(t,e))?r:(r=Q.find.attr(t,e),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):void Q.removeAttr(t,e)):void 0
},removeAttr:function(t,e){var n,i,r=0,o=e&&e.match(de);if(o&&1===t.nodeType)for(;n=o[r++];)i=Q.propFix[n]||n,Q.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!J.radioValue&&"radio"===e&&Q.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),on={set:function(t,e,n){return e===!1?Q.removeAttr(t,n):t.setAttribute(n,n),n}},Q.each(Q.expr.match.bool.source.match(/\w+/g),function(t,e){var n=sn[e]||Q.find.attr;sn[e]=function(t,e,i){var r,o;return i||(o=sn[e],sn[e]=r,r=null!=n(t,e,i)?e.toLowerCase():null,sn[e]=o),r}});var an=/^(?:input|select|textarea|button)$/i;Q.fn.extend({prop:function(t,e){return me(this,Q.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[Q.propFix[t]||t]})}}),Q.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var i,r,o,s=t.nodeType;return t&&3!==s&&8!==s&&2!==s?(o=1!==s||!Q.isXMLDoc(t),o&&(e=Q.propFix[e]||e,r=Q.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]):void 0},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||an.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),J.optSelected||(Q.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),Q.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Q.propFix[this.toLowerCase()]=this});var ln=/[\t\r\n\f]/g;Q.fn.extend({addClass:function(t){var e,n,i,r,o,s,a="string"==typeof t&&t,l=0,c=this.length;if(Q.isFunction(t))return this.each(function(e){Q(this).addClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(de)||[];c>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ln," "):" ")){for(o=0;r=e[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");s=Q.trim(i),n.className!==s&&(n.className=s)}return this},removeClass:function(t){var e,n,i,r,o,s,a=0===arguments.length||"string"==typeof t&&t,l=0,c=this.length;if(Q.isFunction(t))return this.each(function(e){Q(this).removeClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(de)||[];c>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ln," "):"")){for(o=0;r=e[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");s=t?Q.trim(i):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(Q.isFunction(t)?function(n){Q(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,i=0,r=Q(this),o=t.match(de)||[];e=o[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(n===Se||"boolean"===n)&&(this.className&&ye.set(this,"__className__",this.className),this.className=this.className||t===!1?"":ye.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ln," ").indexOf(e)>=0)return!0;return!1}});var cn=/\r/g;Q.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=Q.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=i?t.call(this,n,Q(this).val()):t,null==r?r="":"number"==typeof r?r+="":Q.isArray(r)&&(r=Q.map(r,function(t){return null==t?"":t+""})),e=Q.valHooks[this.type]||Q.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=Q.valHooks[r.type]||Q.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(cn,""):null==n?"":n)):void 0}}),Q.extend({valHooks:{option:{get:function(t){var e=Q.find.attr(t,"value");return null!=e?e:Q.trim(Q.text(t))}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,o="select-one"===t.type||0>r,s=o?null:[],a=o?r+1:i.length,l=0>r?a:o?r:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==r||(J.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Q.nodeName(n.parentNode,"optgroup"))){if(e=Q(n).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var n,i,r=t.options,o=Q.makeArray(e),s=r.length;s--;)i=r[s],(i.selected=Q.inArray(i.value,o)>=0)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),Q.each(["radio","checkbox"],function(){Q.valHooks[this]={set:function(t,e){return Q.isArray(e)?t.checked=Q.inArray(Q(t).val(),e)>=0:void 0}},J.checkOn||(Q.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),Q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){Q.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),Q.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var un=Q.now(),hn=/\?/;Q.parseJSON=function(t){return JSON.parse(t+"")},Q.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{n=new DOMParser,e=n.parseFromString(t,"text/xml")}catch(i){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&Q.error("Invalid XML: "+t),e};var pn,dn,fn=/#.*$/,gn=/([?&])_=[^&]*/,mn=/^(.*?):[ \t]*([^\r\n]*)$/gm,yn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,bn=/^\/\//,wn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,xn={},_n={},kn="*/".concat("*");try{dn=location.href}catch(Tn){dn=K.createElement("a"),dn.href="",dn=dn.href}pn=wn.exec(dn.toLowerCase())||[],Q.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:dn,type:"GET",isLocal:yn.test(pn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":kn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Q.parseJSON,"text xml":Q.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?R(R(t,Q.ajaxSettings),e):R(Q.ajaxSettings,t)},ajaxPrefilter:I(xn),ajaxTransport:I(_n),ajax:function(t,e){function n(t,e,n,s){var l,u,y,v,w,_=e;2!==b&&(b=2,a&&clearTimeout(a),i=void 0,o=s||"",x.readyState=t>0?4:0,l=t>=200&&300>t||304===t,n&&(v=F(h,x,n)),v=H(h,v,x,l),l?(h.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(Q.lastModified[r]=w),w=x.getResponseHeader("etag"),w&&(Q.etag[r]=w)),204===t||"HEAD"===h.type?_="nocontent":304===t?_="notmodified":(_=v.state,u=v.data,y=v.error,l=!y)):(y=_,(t||!_)&&(_="error",0>t&&(t=0))),x.status=t,x.statusText=(e||_)+"",l?f.resolveWith(p,[u,_,x]):f.rejectWith(p,[x,_,y]),x.statusCode(m),m=void 0,c&&d.trigger(l?"ajaxSuccess":"ajaxError",[x,h,l?u:y]),g.fireWith(p,[x,_]),c&&(d.trigger("ajaxComplete",[x,h]),--Q.active||Q.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r,o,s,a,l,c,u,h=Q.ajaxSetup({},e),p=h.context||h,d=h.context&&(p.nodeType||p.jquery)?Q(p):Q.event,f=Q.Deferred(),g=Q.Callbacks("once memory"),m=h.statusCode||{},y={},v={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!s)for(s={};e=mn.exec(o);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=v[n]=v[n]||t,y[t]=e),this},overrideMimeType:function(t){return b||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)m[e]=[m[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return i&&i.abort(e),n(0,e),this}};if(f.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,h.url=((t||h.url||dn)+"").replace(fn,"").replace(bn,pn[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=Q.trim(h.dataType||"*").toLowerCase().match(de)||[""],null==h.crossDomain&&(l=wn.exec(h.url.toLowerCase()),h.crossDomain=!(!l||l[1]===pn[1]&&l[2]===pn[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(pn[3]||("http:"===pn[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Q.param(h.data,h.traditional)),j(xn,h,e,x),2===b)return x;c=h.global,c&&0===Q.active++&&Q.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!vn.test(h.type),r=h.url,h.hasContent||(h.data&&(r=h.url+=(hn.test(r)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=gn.test(r)?r.replace(gn,"$1_="+un++):r+(hn.test(r)?"&":"?")+"_="+un++)),h.ifModified&&(Q.lastModified[r]&&x.setRequestHeader("If-Modified-Since",Q.lastModified[r]),Q.etag[r]&&x.setRequestHeader("If-None-Match",Q.etag[r])),(h.data&&h.hasContent&&h.contentType!==!1||e.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+kn+"; q=0.01":""):h.accepts["*"]);for(u in h.headers)x.setRequestHeader(u,h.headers[u]);if(h.beforeSend&&(h.beforeSend.call(p,x,h)===!1||2===b))return x.abort();w="abort";for(u in{success:1,error:1,complete:1})x[u](h[u]);if(i=j(_n,h,e,x)){x.readyState=1,c&&d.trigger("ajaxSend",[x,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){x.abort("timeout")},h.timeout));try{b=1,i.send(y,n)}catch(_){if(!(2>b))throw _;n(-1,_)}}else n(-1,"No Transport");return x},getJSON:function(t,e,n){return Q.get(t,e,n,"json")},getScript:function(t,e){return Q.get(t,void 0,e,"script")}}),Q.each(["get","post"],function(t,e){Q[e]=function(t,n,i,r){return Q.isFunction(n)&&(r=r||i,i=n,n=void 0),Q.ajax({url:t,type:e,dataType:r,data:n,success:i})}}),Q.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){Q.fn[e]=function(t){return this.on(e,t)}}),Q._evalUrl=function(t){return Q.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Q.fn.extend({wrapAll:function(t){var e;return Q.isFunction(t)?this.each(function(e){Q(this).wrapAll(t.call(this,e))}):(this[0]&&(e=Q(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(Q.isFunction(t)?function(e){Q(this).wrapInner(t.call(this,e))}:function(){var e=Q(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=Q.isFunction(t);return this.each(function(n){Q(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){Q.nodeName(this,"body")||Q(this).replaceWith(this.childNodes)}).end()}}),Q.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},Q.expr.filters.visible=function(t){return!Q.expr.filters.hidden(t)};var Sn=/%20/g,Cn=/\[\]$/,Pn=/\r?\n/g,Dn=/^(?:submit|button|image|reset|file)$/i,Mn=/^(?:input|select|textarea|keygen)/i;Q.param=function(t,e){var n,i=[],r=function(t,e){e=Q.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=Q.ajaxSettings&&Q.ajaxSettings.traditional),Q.isArray(t)||t.jquery&&!Q.isPlainObject(t))Q.each(t,function(){r(this.name,this.value)});else for(n in t)z(n,t[n],e,r);return i.join("&").replace(Sn,"+")},Q.fn.extend({serialize:function(){return Q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=Q.prop(this,"elements");return t?Q.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!Q(this).is(":disabled")&&Mn.test(this.nodeName)&&!Dn.test(t)&&(this.checked||!Te.test(t))}).map(function(t,e){var n=Q(this).val();return null==n?null:Q.isArray(n)?Q.map(n,function(t){return{name:e.name,value:t.replace(Pn,"\r\n")}}):{name:e.name,value:n.replace(Pn,"\r\n")}}).get()}}),Q.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var An=0,On={},En={0:200,1223:204},Ln=Q.ajaxSettings.xhr();t.ActiveXObject&&Q(t).on("unload",function(){for(var t in On)On[t]()}),J.cors=!!Ln&&"withCredentials"in Ln,J.ajax=Ln=!!Ln,Q.ajaxTransport(function(t){var e;return J.cors||Ln&&!t.crossDomain?{send:function(n,i){var r,o=t.xhr(),s=++An;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)o[r]=t.xhrFields[r];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)o.setRequestHeader(r,n[r]);e=function(t){return function(){e&&(delete On[s],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?i(o.status,o.statusText):i(En[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=On[s]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(a){if(e)throw a}},abort:function(){e&&e()}}:void 0}),Q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return Q.globalEval(t),t}}}),Q.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),Q.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,r){e=Q("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),K.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Nn=[],In=/(=)\?(?=&|$)|\?\?/;Q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Nn.pop()||Q.expando+"_"+un++;return this[t]=!0,t}}),Q.ajaxPrefilter("json jsonp",function(e,n,i){var r,o,s,a=e.jsonp!==!1&&(In.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&In.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=Q.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(In,"$1"+r):e.jsonp!==!1&&(e.url+=(hn.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||Q.error(r+" was not called"),s[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){s=arguments},i.always(function(){t[r]=o,e[r]&&(e.jsonpCallback=n.jsonpCallback,Nn.push(r)),s&&Q.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),Q.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||K;var i=se.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=Q.buildFragment([t],e,r),r&&r.length&&Q(r).remove(),Q.merge([],i.childNodes))};var jn=Q.fn.load;Q.fn.load=function(t,e,n){if("string"!=typeof t&&jn)return jn.apply(this,arguments);var i,r,o,s=this,a=t.indexOf(" ");return a>=0&&(i=Q.trim(t.slice(a)),t=t.slice(0,a)),Q.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&Q.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){o=arguments,s.html(i?Q("<div>").append(Q.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){s.each(n,o||[t.responseText,e,t])}),this},Q.expr.filters.animated=function(t){return Q.grep(Q.timers,function(e){return t===e.elem}).length};var Rn=t.document.documentElement;Q.offset={setOffset:function(t,e,n){var i,r,o,s,a,l,c,u=Q.css(t,"position"),h=Q(t),p={};"static"===u&&(t.style.position="relative"),a=h.offset(),o=Q.css(t,"top"),l=Q.css(t,"left"),c=("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1,c?(i=h.position(),s=i.top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),Q.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(p.top=e.top-a.top+s),null!=e.left&&(p.left=e.left-a.left+r),"using"in e?e.using.call(t,p):h.css(p)}},Q.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){Q.offset.setOffset(this,t,e)});var e,n,i=this[0],r={top:0,left:0},o=i&&i.ownerDocument;return o?(e=o.documentElement,Q.contains(e,i)?(typeof i.getBoundingClientRect!==Se&&(r=i.getBoundingClientRect()),n=B(o),{top:r.top+n.pageYOffset-e.clientTop,left:r.left+n.pageXOffset-e.clientLeft}):r):void 0},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===Q.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),Q.nodeName(t[0],"html")||(i=t.offset()),i.top+=Q.css(t[0],"borderTopWidth",!0),i.left+=Q.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-Q.css(n,"marginTop",!0),left:e.left-i.left-Q.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Rn;t&&!Q.nodeName(t,"html")&&"static"===Q.css(t,"position");)t=t.offsetParent;return t||Rn})}}),Q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i="pageYOffset"===n;Q.fn[e]=function(r){return me(this,function(e,r,o){var s=B(e);return void 0===o?s?s[n]:e[r]:void(s?s.scrollTo(i?t.pageXOffset:o,i?o:t.pageYOffset):e[r]=o)},e,r,arguments.length,null)}}),Q.each(["top","left"],function(t,e){Q.cssHooks[e]=_(J.pixelPosition,function(t,n){return n?(n=x(t,e),$e.test(n)?Q(t).position()[e]+"px":n):void 0})}),Q.each({Height:"height",Width:"width"},function(t,e){Q.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){Q.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||r===!0?"margin":"border");return me(this,function(e,n,i){var r;return Q.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===i?Q.css(e,n,s):Q.style(e,n,i,s)},e,o?i:void 0,o,null)}})}),Q.fn.size=function(){return this.length},Q.fn.andSelf=Q.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Q});var Fn=t.jQuery,Hn=t.$;return Q.noConflict=function(e){return t.$===Q&&(t.$=Hn),e&&t.jQuery===Q&&(t.jQuery=Fn),Q},typeof e===Se&&(t.jQuery=t.$=Q),Q}),function(){function t(t){function e(e,n,i,r,o,s){for(;o>=0&&s>o;o+=t){var a=r?r[o]:o;i=n(i,e[a],a,e)}return i}return function(n,i,r,o){i=b(i,o,4);var s=!C(n)&&v.keys(n),a=(s||n).length,l=t>0?0:a-1;return arguments.length<3&&(r=n[s?s[l]:l],l+=t),e(n,i,r,s,l,a)}}function e(t){return function(e,n,i){n=w(n,i);for(var r=S(e),o=t>0?0:r-1;o>=0&&r>o;o+=t)if(n(e[o],o,e))return o;return-1}}function n(t,e,n){return function(i,r,o){var s=0,a=S(i);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return o=n(i,r),i[o]===r?o:-1;if(r!==r)return o=e(u.call(i,s,a),v.isNaN),o>=0?o+s:-1;for(o=t>0?s:a-1;o>=0&&a>o;o+=t)if(i[o]===r)return o;return-1}}function i(t,e){var n=O.length,i=t.constructor,r=v.isFunction(i)&&i.prototype||a,o="constructor";for(v.has(t,o)&&!v.contains(e,o)&&e.push(o);n--;)o=O[n],o in t&&t[o]!==r[o]&&!v.contains(e,o)&&e.push(o)}var r=this,o=r._,s=Array.prototype,a=Object.prototype,l=Function.prototype,c=s.push,u=s.slice,h=a.toString,p=a.hasOwnProperty,d=Array.isArray,f=Object.keys,g=l.bind,m=Object.create,y=function(){},v=function(t){return t instanceof v?t:this instanceof v?void(this._wrapped=t):new v(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),exports._=v):r._=v,v.VERSION="1.8.3";var b=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)}}return function(){return t.apply(e,arguments)}},w=function(t,e,n){return null==t?v.identity:v.isFunction(t)?b(t,e,n):v.isObject(t)?v.matcher(t):v.property(t)};v.iteratee=function(t,e){return w(t,e,1/0)};var x=function(t,e){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var r=1;i>r;r++)for(var o=arguments[r],s=t(o),a=s.length,l=0;a>l;l++){var c=s[l];e&&void 0!==n[c]||(n[c]=o[c])}return n}},_=function(t){if(!v.isObject(t))return{};if(m)return m(t);y.prototype=t;var e=new y;return y.prototype=null,e},k=function(t){return function(e){return null==e?void 0:e[t]}},T=Math.pow(2,53)-1,S=k("length"),C=function(t){var e=S(t);return"number"==typeof e&&e>=0&&T>=e};v.each=v.forEach=function(t,e,n){e=b(e,n);var i,r;if(C(t))for(i=0,r=t.length;r>i;i++)e(t[i],i,t);else{var o=v.keys(t);for(i=0,r=o.length;r>i;i++)e(t[o[i]],o[i],t)}return t},v.map=v.collect=function(t,e,n){e=w(e,n);for(var i=!C(t)&&v.keys(t),r=(i||t).length,o=Array(r),s=0;r>s;s++){var a=i?i[s]:s;o[s]=e(t[a],a,t)}return o},v.reduce=v.foldl=v.inject=t(1),v.reduceRight=v.foldr=t(-1),v.find=v.detect=function(t,e,n){var i;return i=C(t)?v.findIndex(t,e,n):v.findKey(t,e,n),void 0!==i&&-1!==i?t[i]:void 0},v.filter=v.select=function(t,e,n){var i=[];return e=w(e,n),v.each(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i},v.reject=function(t,e,n){return v.filter(t,v.negate(w(e)),n)},v.every=v.all=function(t,e,n){e=w(e,n);for(var i=!C(t)&&v.keys(t),r=(i||t).length,o=0;r>o;o++){var s=i?i[o]:o;if(!e(t[s],s,t))return!1}return!0},v.some=v.any=function(t,e,n){e=w(e,n);for(var i=!C(t)&&v.keys(t),r=(i||t).length,o=0;r>o;o++){var s=i?i[o]:o;if(e(t[s],s,t))return!0}return!1},v.contains=v.includes=v.include=function(t,e,n,i){return C(t)||(t=v.values(t)),("number"!=typeof n||i)&&(n=0),v.indexOf(t,e,n)>=0},v.invoke=function(t,e){var n=u.call(arguments,2),i=v.isFunction(e);return v.map(t,function(t){var r=i?e:t[e];return null==r?r:r.apply(t,n)})},v.pluck=function(t,e){return v.map(t,v.property(e))},v.where=function(t,e){return v.filter(t,v.matcher(e))},v.findWhere=function(t,e){return v.find(t,v.matcher(e))},v.max=function(t,e,n){var i,r,o=-1/0,s=-1/0;if(null==e&&null!=t){t=C(t)?t:v.values(t);for(var a=0,l=t.length;l>a;a++)i=t[a],i>o&&(o=i)}else e=w(e,n),v.each(t,function(t,n,i){r=e(t,n,i),(r>s||r===-1/0&&o===-1/0)&&(o=t,s=r)});return o},v.min=function(t,e,n){var i,r,o=1/0,s=1/0;if(null==e&&null!=t){t=C(t)?t:v.values(t);for(var a=0,l=t.length;l>a;a++)i=t[a],o>i&&(o=i)}else e=w(e,n),v.each(t,function(t,n,i){r=e(t,n,i),(s>r||1/0===r&&1/0===o)&&(o=t,s=r)});return o},v.shuffle=function(t){for(var e,n=C(t)?t:v.values(t),i=n.length,r=Array(i),o=0;i>o;o++)e=v.random(0,o),e!==o&&(r[o]=r[e]),r[e]=n[o];return r},v.sample=function(t,e,n){return null==e||n?(C(t)||(t=v.values(t)),t[v.random(t.length-1)]):v.shuffle(t).slice(0,Math.max(0,e))},v.sortBy=function(t,e,n){return e=w(e,n),v.pluck(v.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var P=function(t){return function(e,n,i){var r={};return n=w(n,i),v.each(e,function(i,o){var s=n(i,o,e);t(r,i,s)}),r}};v.groupBy=P(function(t,e,n){v.has(t,n)?t[n].push(e):t[n]=[e]}),v.indexBy=P(function(t,e,n){t[n]=e}),v.countBy=P(function(t,e,n){v.has(t,n)?t[n]++:t[n]=1}),v.toArray=function(t){return t?v.isArray(t)?u.call(t):C(t)?v.map(t,v.identity):v.values(t):[]},v.size=function(t){return null==t?0:C(t)?t.length:v.keys(t).length},v.partition=function(t,e,n){e=w(e,n);var i=[],r=[];return v.each(t,function(t,n,o){(e(t,n,o)?i:r).push(t)}),[i,r]},v.first=v.head=v.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:v.initial(t,t.length-e)},v.initial=function(t,e,n){return u.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},v.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:v.rest(t,Math.max(0,t.length-e))},v.rest=v.tail=v.drop=function(t,e,n){return u.call(t,null==e||n?1:e)},v.compact=function(t){return v.filter(t,v.identity)};var D=function(t,e,n,i){for(var r=[],o=0,s=i||0,a=S(t);a>s;s++){var l=t[s];if(C(l)&&(v.isArray(l)||v.isArguments(l))){e||(l=D(l,e,n));var c=0,u=l.length;for(r.length+=u;u>c;)r[o++]=l[c++]}else n||(r[o++]=l)}return r};v.flatten=function(t,e){return D(t,e,!1)},v.without=function(t){return v.difference(t,u.call(arguments,1))},v.uniq=v.unique=function(t,e,n,i){v.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=w(n,i));for(var r=[],o=[],s=0,a=S(t);a>s;s++){var l=t[s],c=n?n(l,s,t):l;e?(s&&o===c||r.push(l),o=c):n?v.contains(o,c)||(o.push(c),r.push(l)):v.contains(r,l)||r.push(l)}return r},v.union=function(){return v.uniq(D(arguments,!0,!0))},v.intersection=function(t){for(var e=[],n=arguments.length,i=0,r=S(t);r>i;i++){var o=t[i];if(!v.contains(e,o)){for(var s=1;n>s&&v.contains(arguments[s],o);s++);s===n&&e.push(o)}}return e},v.difference=function(t){var e=D(arguments,!0,!0,1);return v.filter(t,function(t){return!v.contains(e,t)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(t){for(var e=t&&v.max(t,S).length||0,n=Array(e),i=0;e>i;i++)n[i]=v.pluck(t,i);return n},v.object=function(t,e){for(var n={},i=0,r=S(t);r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},v.findIndex=e(1),v.findLastIndex=e(-1),v.sortedIndex=function(t,e,n,i){n=w(n,i,1);for(var r=n(e),o=0,s=S(t);s>o;){var a=Math.floor((o+s)/2);n(t[a])<r?o=a+1:s=a}return o},v.indexOf=n(1,v.findIndex,v.sortedIndex),v.lastIndexOf=n(-1,v.findLastIndex),v.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),o=0;i>o;o++,t+=n)r[o]=t;return r};var M=function(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var o=_(t.prototype),s=t.apply(o,r);return v.isObject(s)?s:o};v.bind=function(t,e){if(g&&t.bind===g)return g.apply(t,u.call(arguments,1));if(!v.isFunction(t))throw new TypeError("Bind must be called on a function");var n=u.call(arguments,2),i=function(){return M(t,i,e,this,n.concat(u.call(arguments)))};return i},v.partial=function(t){var e=u.call(arguments,1),n=function(){for(var i=0,r=e.length,o=Array(r),s=0;r>s;s++)o[s]=e[s]===v?arguments[i++]:e[s];for(;i<arguments.length;)o.push(arguments[i++]);return M(t,n,this,this,o)};return n},v.bindAll=function(t){var e,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(e=1;i>e;e++)n=arguments[e],t[n]=v.bind(t[n],t);return t},v.memoize=function(t,e){var n=function(i){var r=n.cache,o=""+(e?e.apply(this,arguments):i);return v.has(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return n.cache={},n},v.delay=function(t,e){var n=u.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},v.defer=v.partial(v.delay,v,1),v.throttle=function(t,e,n){var i,r,o,s=null,a=0;n||(n={});var l=function(){a=n.leading===!1?0:v.now(),s=null,o=t.apply(i,r),s||(i=r=null)};return function(){var c=v.now();a||n.leading!==!1||(a=c);var u=e-(c-a);return i=this,r=arguments,0>=u||u>e?(s&&(clearTimeout(s),s=null),a=c,o=t.apply(i,r),s||(i=r=null)):s||n.trailing===!1||(s=setTimeout(l,u)),o}},v.debounce=function(t,e,n){var i,r,o,s,a,l=function(){var c=v.now()-s;e>c&&c>=0?i=setTimeout(l,e-c):(i=null,n||(a=t.apply(o,r),i||(o=r=null)))};return function(){o=this,r=arguments,s=v.now();var c=n&&!i;return i||(i=setTimeout(l,e)),c&&(a=t.apply(o,r),o=r=null),a}},v.wrap=function(t,e){return v.partial(e,t)},v.negate=function(t){return function(){return!t.apply(this,arguments)}},v.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},v.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},v.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},v.once=v.partial(v.before,2);var A=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];v.keys=function(t){if(!v.isObject(t))return[];if(f)return f(t);var e=[];for(var n in t)v.has(t,n)&&e.push(n);return A&&i(t,e),e},v.allKeys=function(t){if(!v.isObject(t))return[];var e=[];for(var n in t)e.push(n);return A&&i(t,e),e},v.values=function(t){for(var e=v.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},v.mapObject=function(t,e,n){e=w(e,n);for(var i,r=v.keys(t),o=r.length,s={},a=0;o>a;a++)i=r[a],s[i]=e(t[i],i,t);return s},v.pairs=function(t){for(var e=v.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},v.invert=function(t){for(var e={},n=v.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},v.functions=v.methods=function(t){var e=[];for(var n in t)v.isFunction(t[n])&&e.push(n);return e.sort()},v.extend=x(v.allKeys),v.extendOwn=v.assign=x(v.keys),v.findKey=function(t,e,n){e=w(e,n);for(var i,r=v.keys(t),o=0,s=r.length;s>o;o++)if(i=r[o],e(t[i],i,t))return i},v.pick=function(t,e,n){var i,r,o={},s=t;if(null==s)return o;v.isFunction(e)?(r=v.allKeys(s),i=b(e,n)):(r=D(arguments,!1,!1,1),i=function(t,e,n){return e in n},s=Object(s));for(var a=0,l=r.length;l>a;a++){var c=r[a],u=s[c];i(u,c,s)&&(o[c]=u)}return o},v.omit=function(t,e,n){if(v.isFunction(e))e=v.negate(e);else{var i=v.map(D(arguments,!1,!1,1),String);e=function(t,e){return!v.contains(i,e)}}return v.pick(t,e,n)},v.defaults=x(v.allKeys,!0),v.create=function(t,e){var n=_(t);return e&&v.extendOwn(n,e),n},v.clone=function(t){return v.isObject(t)?v.isArray(t)?t.slice():v.extend({},t):t},v.tap=function(t,e){return e(t),t},v.isMatch=function(t,e){var n=v.keys(e),i=n.length;if(null==t)return!i;for(var r=Object(t),o=0;i>o;o++){var s=n[o];if(e[s]!==r[s]||!(s in r))return!1}return!0};var E=function(t,e,n,i){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof v&&(t=t._wrapped),e instanceof v&&(e=e._wrapped);var r=h.call(t);if(r!==h.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===r;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(v.isFunction(s)&&s instanceof s&&v.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],i=i||[];for(var l=n.length;l--;)if(n[l]===t)return i[l]===e;if(n.push(t),i.push(e),o){if(l=t.length,l!==e.length)return!1;for(;l--;)if(!E(t[l],e[l],n,i))return!1}else{var c,u=v.keys(t);if(l=u.length,v.keys(e).length!==l)return!1;for(;l--;)if(c=u[l],!v.has(e,c)||!E(t[c],e[c],n,i))return!1}return n.pop(),i.pop(),!0};v.isEqual=function(t,e){return E(t,e)},v.isEmpty=function(t){return null==t?!0:C(t)&&(v.isArray(t)||v.isString(t)||v.isArguments(t))?0===t.length:0===v.keys(t).length},v.isElement=function(t){return!(!t||1!==t.nodeType)},v.isArray=d||function(t){return"[object Array]"===h.call(t)},v.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){v["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}}),v.isArguments(arguments)||(v.isArguments=function(t){return v.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(t){return"function"==typeof t||!1}),v.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},v.isNaN=function(t){return v.isNumber(t)&&t!==+t},v.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===h.call(t)},v.isNull=function(t){return null===t},v.isUndefined=function(t){return void 0===t},v.has=function(t,e){return null!=t&&p.call(t,e)},v.noConflict=function(){return r._=o,this},v.identity=function(t){return t},v.constant=function(t){return function(){return t}},v.noop=function(){},v.property=k,v.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},v.matcher=v.matches=function(t){return t=v.extendOwn({},t),function(e){return v.isMatch(e,t)}},v.times=function(t,e,n){var i=Array(Math.max(0,t));e=b(e,n,1);for(var r=0;t>r;r++)i[r]=e(r);return i},v.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},v.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},N=v.invert(L),I=function(t){var e=function(e){return t[e]},n="(?:"+v.keys(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}};v.escape=I(L),v.unescape=I(N),v.result=function(t,e,n){var i=null==t?void 0:t[e];return void 0===i&&(i=n),v.isFunction(i)?i.call(t):i};var j=0;v.uniqueId=function(t){var e=++j+"";return t?t+e:e},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\u2028|\u2029/g,z=function(t){return"\\"+F[t]};v.template=function(t,e,n){!e&&n&&(e=n),e=v.defaults({},e,v.templateSettings);
var i=RegExp([(e.escape||R).source,(e.interpolate||R).source,(e.evaluate||R).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(i,function(e,n,i,s,a){return o+=t.slice(r,a).replace(H,z),r=a+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(e.variable||"obj","_",o)}catch(a){throw a.source=o,a}var l=function(t){return s.call(this,t,v)},c=e.variable||"obj";return l.source="function("+c+"){\n"+o+"}",l},v.chain=function(t){var e=v(t);return e._chain=!0,e};var B=function(t,e){return t._chain?v(e).chain():e};v.mixin=function(t){v.each(v.functions(t),function(e){var n=v[e]=t[e];v.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),B(this,n.apply(v,t))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=s[t];v.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],B(this,n)}}),v.each(["concat","join","slice"],function(t){var e=s[t];v.prototype[t]=function(){return B(this,e.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}.call(this),function(t){var e="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,i,r){e.Backbone=t(e,r,n,i)});else if("undefined"!=typeof exports){var n,i=require("underscore");try{n=require("jquery")}catch(r){}t(e,exports,i,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e,n,i){var r=t.Backbone,o=[].slice;e.VERSION="1.2.1",e.$=i,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s=function(t,e,i){switch(t){case 1:return function(){return n[e](this[i])};case 2:return function(t){return n[e](this[i],t)};case 3:return function(t,r){return n[e](this[i],t,r)};case 4:return function(t,r,o){return n[e](this[i],t,r,o)};default:return function(){var t=o.call(arguments);return t.unshift(this[i]),n[e].apply(n,t)}}},a=function(t,e,i){n.each(e,function(e,r){n[r]&&(t.prototype[r]=s(e,r,i))})},l=e.Events={},c=/\s+/,u=function(t,e,i,r,o){var s,a=0;if(i&&"object"==typeof i){void 0!==r&&"context"in o&&void 0===o.context&&(o.context=r);for(s=n.keys(i);a<s.length;a++)e=t(e,s[a],i[s[a]],o)}else if(i&&c.test(i))for(s=i.split(c);a<s.length;a++)e=t(e,s[a],r,o);else e=t(e,i,r,o);return e};l.on=function(t,e,n){return h(this,t,e,n)};var h=function(t,e,n,i,r){if(t._events=u(p,t._events||{},e,n,{context:i,ctx:t,listening:r}),r){var o=t._listeners||(t._listeners={});o[r.id]=r}return t};l.listenTo=function(t,e,i){if(!t)return this;var r=t._listenId||(t._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),s=o[r];if(!s){var a=this._listenId||(this._listenId=n.uniqueId("l"));s=o[r]={obj:t,objId:r,id:a,listeningTo:o,count:0}}return h(t,e,i,this,s),this};var p=function(t,e,n,i){if(n){var r=t[e]||(t[e]=[]),o=i.context,s=i.ctx,a=i.listening;a&&a.count++,r.push({callback:n,context:o,ctx:o||s,listening:a})}return t};l.off=function(t,e,n){return this._events?(this._events=u(d,this._events,t,e,{context:n,listeners:this._listeners}),this):this},l.stopListening=function(t,e,i){var r=this._listeningTo;if(!r)return this;for(var o=t?[t._listenId]:n.keys(r),s=0;s<o.length;s++){var a=r[o[s]];if(!a)break;a.obj.off(e,i,this)}return n.isEmpty(r)&&(this._listeningTo=void 0),this};var d=function(t,e,i,r){if(t){var o,s=0,a=r.context,l=r.listeners;if(e||i||a){for(var c=e?[e]:n.keys(t);s<c.length;s++){e=c[s];var u=t[e];if(!u)break;for(var h=[],p=0;p<u.length;p++){var d=u[p];i&&i!==d.callback&&i!==d.callback._callback||a&&a!==d.context?h.push(d):(o=d.listening,o&&0===--o.count&&(delete l[o.id],delete o.listeningTo[o.objId]))}h.length?t[e]=h:delete t[e]}return n.size(t)?t:void 0}for(var f=n.keys(l);s<f.length;s++)o=l[f[s]],delete l[o.id],delete o.listeningTo[o.objId]}};l.once=function(t,e,i){var r=u(f,{},t,e,n.bind(this.off,this));return this.on(r,void 0,i)},l.listenToOnce=function(t,e,i){var r=u(f,{},e,i,n.bind(this.stopListening,this,t));return this.listenTo(t,r)};var f=function(t,e,i,r){if(i){var o=t[e]=n.once(function(){r(e,o),i.apply(this,arguments)});o._callback=i}return t};l.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),i=0;e>i;i++)n[i]=arguments[i+1];return u(g,this._events,t,void 0,n),this};var g=function(t,e,n,i){if(t){var r=t[e],o=t.all;r&&o&&(o=o.slice()),r&&m(r,i),o&&m(o,[e].concat(i))}return t},m=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e);return}};l.bind=l.on,l.unbind=l.off,n.extend(e,l);var y=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(y.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,i){if(null==t)return this;var r;if("object"==typeof t?(r=t,i=e):(r={})[t]=e,i||(i={}),!this._validate(r,i))return!1;var o=i.unset,s=i.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var c=this.attributes,u=this.changed,h=this._previousAttributes;this.idAttribute in r&&(this.id=r[this.idAttribute]);for(var p in r)e=r[p],n.isEqual(c[p],e)||a.push(p),n.isEqual(h[p],e)?delete u[p]:u[p]=e,o?delete c[p]:c[p]=e;if(!s){a.length&&(this._pending=i);for(var d=0;d<a.length;d++)this.trigger("change:"+a[d],this,c[a[d]],i)}if(l)return this;if(!s)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e=this._changing?this._previousAttributes:this.attributes,i={};for(var r in t){var o=t[r];n.isEqual(e[r],o)||(i[r]=o)}return n.size(i)?i:!1},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,i=t.success;return t.success=function(n){var r=t.parse?e.parse(n,t):n;return e.set(r,t)?(i&&i.call(t.context,e,n,t),void e.trigger("sync",e,n,t)):!1},H(this,t),this.sync("read",this,t)},save:function(t,e,i){var r;null==t||"object"==typeof t?(r=t,i=e):(r={})[t]=e,i=n.extend({validate:!0,parse:!0},i);var o=i.wait;if(r&&!o){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;var s=this,a=i.success,l=this.attributes;i.success=function(t){s.attributes=l;var e=i.parse?s.parse(t,i):t;return o&&(e=n.extend({},r,e)),e&&!s.set(e,i)?!1:(a&&a.call(i.context,s,t,i),void s.trigger("sync",s,t,i))},H(this,i),r&&o&&(this.attributes=n.extend({},l,r));var c=this.isNew()?"create":i.patch?"patch":"update";"patch"!==c||i.attrs||(i.attrs=r);var u=this.sync(c,this,i);return this.attributes=l,u},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,r=t.wait,o=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(n){r&&o(),i&&i.call(t.context,e,n,t),e.isNew()||e.trigger("sync",e,n,t)};var s=!1;return this.isNew()?n.defer(t.success):(H(this,t),s=this.sync("delete",this,t)),r||o(),s},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.defaults({validate:!0},t))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1):!0}});var v={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};a(y,v,"attributes");var b=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},w={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1};n.extend(b.prototype,l,{model:y,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,x))},remove:function(t,e){e=n.extend({},e);var i=!n.isArray(t);t=i?[t]:n.clone(t);var r=this._removeModels(t,e);return!e.silent&&r&&this.trigger("update",this,e),i?r[0]:r},set:function(t,e){e=n.defaults({},e,w),e.parse&&!this._isModel(t)&&(t=this.parse(t,e));var i=!n.isArray(t);t=i?t?[t]:[]:t.slice();var r,o,s,a,l,c=e.at;null!=c&&(c=+c),0>c&&(c+=this.length+1);for(var u=this.comparator&&null==c&&e.sort!==!1,h=n.isString(this.comparator)?this.comparator:null,p=[],d=[],f={},g=e.add,m=e.merge,y=e.remove,v=!u&&g&&y?[]:!1,b=!1,x=0;x<t.length;x++){if(s=t[x],a=this.get(s))y&&(f[a.cid]=!0),m&&s!==a&&(s=this._isModel(s)?s.attributes:s,e.parse&&(s=a.parse(s,e)),a.set(s,e),u&&!l&&a.hasChanged(h)&&(l=!0)),t[x]=a;else if(g){if(o=t[x]=this._prepareModel(s,e),!o)continue;p.push(o),this._addReference(o,e)}o=a||o,o&&(r=this.modelId(o.attributes),!v||!o.isNew()&&f[r]||(v.push(o),b=b||!this.models[x]||o.cid!==this.models[x].cid),f[r]=!0)}if(y){for(var x=0;x<this.length;x++)f[(o=this.models[x]).cid]||d.push(o);d.length&&this._removeModels(d,e)}if(p.length||b)if(u&&(l=!0),this.length+=p.length,null!=c)for(var x=0;x<p.length;x++)this.models.splice(c+x,0,p[x]);else{v&&(this.models.length=0);for(var _=v||p,x=0;x<_.length;x++)this.models.push(_[x])}if(l&&this.sort({silent:!0}),!e.silent){for(var k=null!=c?n.clone(e):e,x=0;x<p.length;x++)null!=c&&(k.index=c+x),(o=p[x]).trigger("add",o,this,k);(l||b)&&this.trigger("sort",this,e),(p.length||d.length)&&this.trigger("update",this,e)}return i?t[0]:t},reset:function(t,e){e=e?n.clone(e):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null==t)return void 0;var e=this.modelId(this._isModel(t)?t.attributes:t);return this._byId[t]||this._byId[e]||this._byId[t.cid]},at:function(t){return 0>t&&(t+=this.length),this.models[t]},where:function(t,e){var i=n.matches(t);return this[e?"find":"filter"](function(t){return i(t.attributes)})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=n.extend({parse:!0},t);var e=t.success,i=this;return t.success=function(n){var r=t.reset?"reset":"set";i[r](n,t),e&&e.call(t.context,i,n,t),i.trigger("sync",i,n,t)},H(this,t),this.sync("read",this,t)},create:function(t,e){e=e?n.clone(e):{};var i=e.wait;if(t=this._prepareModel(t,e),!t)return!1;i||this.add(t,e);var r=this,o=e.success;return e.success=function(t,e,n){i&&r.add(t,n),o&&o.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?n.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_removeModels:function(t,e){for(var n=[],i=0;i<t.length;i++){var r=this.get(t[i]);if(r){var o=this.indexOf(r);this.models.splice(o,1),this.length--,e.silent||(e.index=o,r.trigger("remove",r,this,e)),n.push(r),this._removeReference(r,e)}}return n.length?n:!1},_isModel:function(t){return t instanceof y},_addReference:function(t){this._byId[t.cid]=t;var e=this.modelId(t.attributes);null!=e&&(this._byId[e]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t){delete this._byId[t.cid];var e=this.modelId(t.attributes);null!=e&&delete this._byId[e],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){if("add"!==t&&"remove"!==t||n===this){if("destroy"===t&&this.remove(e,i),"change"===t){var r=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);r!==o&&(null!=r&&delete this._byId[r],null!=o&&(this._byId[o]=e))}this.trigger.apply(this,arguments)}}});var _={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:2,contains:2,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3};a(b,_,"models");var k=["groupBy","countBy","sortBy","indexBy"];n.each(k,function(t){n[t]&&(b.prototype[t]=function(e,i){var r=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,r,i)})});var T=e.View=function(t){this.cid=n.uniqueId("view"),n.extend(this,n.pick(t,C)),this._ensureElement(),this.initialize.apply(this,arguments)},S=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];n.extend(T.prototype,l,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[i]),i){var r=e.match(S);this.delegate(r[1],r[2],n.bind(i,this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,i,r){var o=P[t];n.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:o,dataType:"json"};if(r.url||(s.url=n.result(i,"url")||F()),null!=r.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",r.emulateJSON&&(s.data._method=o);var a=r.beforeSend;r.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===s.type||r.emulateJSON||(s.processData=!1);var l=r.error;r.error=function(t,e,n){r.textStatus=e,r.errorThrown=n,l&&l.call(r.context,t,e,n)};var c=r.xhr=e.ajax(n.extend(s,r));return i.trigger("request",i,c,r),c};var P={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var D=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,O=/\*\w+/g,E=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(D.prototype,l,{initialize:function(){},route:function(t,i,r){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var o=this;return e.history.route(t,function(n){var s=o._extractParameters(t,n);o.execute(r,s,i)!==!1&&(o.trigger.apply(o,["route:"+i].concat(s)),o.trigger("route",i,s),e.history.trigger("route",o,i,s))}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(E,"\\$&").replace(M,"(?:$1)?").replace(A,function(t,e){return e?t:"([^/?]+)"}).replace(O,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var L=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},N=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,j=/#.*$/;L.started=!1,n.extend(L.prototype,l,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(N,"")},start:function(t){if(L.started)throw new Error("Backbone.history has already been started");if(L.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(I,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,r=i.insertBefore(this.iframe,i.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};return this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),L.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return this.matchRoot()?(t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})):!1},navigate:function(t,e){if(!L.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;(""===t||"?"===t.charAt(0))&&(n=n.slice(0,-1)||"/");var i=n+t;if(t=this.decodeFragment(t.replace(j,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;e.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new L;var R=function(t,e){var i,r=this;i=t&&n.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,e);var o=function(){this.constructor=i};return o.prototype=r.prototype,i.prototype=new o,t&&n.extend(i.prototype,t),i.__super__=r.prototype,i};y.extend=b.extend=D.extend=T.extend=L.extend=R;var F=function(){throw new Error('A "url" property or function must be specified')},H=function(t,e){var n=e.error;e.error=function(i){n&&n.call(e.context,t,i,e),t.trigger("error",t,i,e)}};return e}),!function(t){if("object"==typeof exports&&"function"==typeof require)module.exports=t(require("underscore"),require("backbone"));else if("function"==typeof define&&define.amd)define(["underscore","backbone"],t);else if("undefined"!=typeof _&&"undefined"!=typeof Backbone){var e=Backbone.PageableCollection,n=t(_,Backbone);Backbone.PageableCollection.noConflict=function(){return Backbone.PageableCollection=e,n}}}(function(t,e){"use strict";function n(e,n){if(!t.isNumber(e)||t.isNaN(e)||!t.isFinite(e)||~~e!==e)throw new TypeError("`"+n+"` must be a finite integer");return e}function i(t){for(var e,n,i,r,o={},s=decodeURIComponent,a=t.split("&"),l=0,c=a.length;c>l;l++){var u=a[l];e=u.split("="),n=e[0],i=e[1]||!0,n=s(n),i=s(i),r=o[n],f(r)?r.push(i):o[n]=r?[r,i]:i}return o}function r(t,e,n){var i=t._events[e];if(i&&i.length){var r=i[i.length-1],o=r.callback;r.callback=function(){try{o.apply(this,arguments),n()}catch(t){throw t}finally{r.callback=o}}}else n()}var o=t.extend,s=t.omit,a=t.clone,l=t.each,c=t.pick,u=t.contains,h=t.isEmpty,p=t.pairs,d=t.invert,f=t.isArray,g=t.isFunction,m=t.isObject,y=t.keys,v=t.isUndefined,b=Math.ceil,w=Math.floor,x=Math.max,_=e.Collection.prototype,k=/[\s'"]/g,T=/[<>\s'"]/g,S=e.PageableCollection=e.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(t,e){_.constructor.apply(this,arguments),e=e||{};var n=this.mode=e.mode||this.mode||C.mode,i=o({},C.queryParams,this.queryParams,e.queryParams||{});i.directions=o({},C.queryParams.directions,this.queryParams.directions,i.directions||{}),this.queryParams=i;var r=this.state=o({},C.state,this.state,e.state||{});r.currentPage=null==r.currentPage?r.firstPage:r.currentPage,f(t)||(t=t?[t]:[]),t=t.slice(),"server"==n||null!=r.totalRecords||h(t)||(r.totalRecords=t.length),this.switchMode(n,o({fetch:!1,resetState:!1,models:t},e));var s=e.comparator;if(r.sortKey&&!s&&this.setSorting(r.sortKey,r.order,e),"server"!=n){var l=this.fullCollection;s&&e.full&&(this.comparator=null,l.comparator=s),e.full&&l.sort(),t&&!h(t)&&(this.reset(t,o({silent:!0},e)),this.getPage(r.currentPage),t.splice.apply(t,[0,t.length].concat(this.models)))}this._initState=a(this.state)},_makeFullCollection:function(t,n){var i,r,o,s=["url","model","sync","comparator"],a=this.constructor.prototype,l={};for(i=0,r=s.length;r>i;i++)o=s[i],v(a[o])||(l[o]=a[o]);var c=new(e.Collection.extend(l))(t,n);for(i=0,r=s.length;r>i;i++)o=s[i],this[o]!==a[o]&&(c[o]=this[o]);return c},_makeCollectionEventHandler:function(t,e){return function(n,i,s,c){var u=t._handlers;l(y(u),function(n){var i=u[n];t.off(n,i),e.off(n,i)});var h=a(t.state),p=h.firstPage,d=0===p?h.currentPage:h.currentPage-1,f=h.pageSize,g=d*f,m=g+f;if("add"==n){var w,x,_,k,c=c||{};if(s==e)x=e.indexOf(i),x>=g&&m>x&&(k=t,w=_=x-g);else{w=t.indexOf(i),x=g+w,k=e;var _=v(c.at)?x:c.at+g}if(c.onRemove||(++h.totalRecords,delete c.onRemove),t.state=t._checkState(h),k){k.add(i,o({},c||{},{at:_}));var T=w>=f?i:!v(c.at)&&m>_&&t.length>f?t.at(f):null;T&&r(s,n,function(){t.remove(T,{onAdd:!0})})}}if("remove"==n)if(c.onAdd)delete c.onAdd;else{if(--h.totalRecords){var S=h.totalPages=b(h.totalRecords/f);h.lastPage=0===p?S-1:S||p,h.currentPage>S&&(h.currentPage=h.lastPage)}else h.totalRecords=null,h.totalPages=null;t.state=t._checkState(h);var C,P=c.index;s==t?((C=e.at(m))?r(t,n,function(){t.push(C,{onRemove:!0})}):!t.length&&h.totalRecords&&t.reset(e.models.slice(g-f,m-f),o({},c,{parse:!1})),e.remove(i)):P>=g&&m>P&&((C=e.at(m-1))&&r(t,n,function(){t.push(C,{onRemove:!0})}),t.remove(i),!t.length&&h.totalRecords&&t.reset(e.models.slice(g-f,m-f),o({},c,{parse:!1})))}if("reset"==n)if(c=s,s=i,s==t&&null==c.from&&null==c.to){var D=e.models.slice(0,g),M=e.models.slice(g+t.models.length);e.reset(D.concat(t.models).concat(M),c)}else s==e&&((h.totalRecords=e.models.length)||(h.totalRecords=null,h.totalPages=null),"client"==t.mode&&(h.lastPage=h.currentPage=h.firstPage),t.state=t._checkState(h),t.reset(e.models.slice(g,m),o({},c,{parse:!1})));"sort"==n&&(c=s,s=i,s===e&&t.reset(e.models.slice(g,m),o({},c,{parse:!1}))),l(y(u),function(n){var i=u[n];l([t,e],function(t){t.on(n,i);var e=t._events[n]||[];e.unshift(e.pop())})})}},_checkState:function(t){var e=this.mode,i=this.links,r=t.totalRecords,o=t.pageSize,s=t.currentPage,a=t.firstPage,l=t.totalPages;if(null!=r&&null!=o&&null!=s&&null!=a&&("infinite"==e?i:!0)){if(r=n(r,"totalRecords"),o=n(o,"pageSize"),s=n(s,"currentPage"),a=n(a,"firstPage"),1>o)throw new RangeError("`pageSize` must be >= 1");if(l=t.totalPages=b(r/o),0>a||a>1)throw new RangeError("`firstPage must be 0 or 1`");if(t.lastPage=0===a?x(0,l-1):l||a,"infinite"==e){if(!i[s+""])throw new RangeError("No link found for page "+s)}else if(a>s||l>0&&(a?s>l:s>=l))throw new RangeError("`currentPage` must be firstPage <= currentPage "+(a?">":">=")+" totalPages if "+a+"-based. Got "+s+".")}return t},setPageSize:function(t,e){t=n(t,"pageSize"),e=e||{first:!1};var i=this.state,r=b(i.totalRecords/t),a=r?x(i.firstPage,w(r*i.currentPage/i.totalPages)):i.firstPage;return i=this.state=this._checkState(o({},i,{pageSize:t,currentPage:e.first?i.firstPage:a,totalPages:r})),this.getPage(i.currentPage,s(e,["first"]))},switchMode:function(e,n){if(!u(["server","client","infinite"],e))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');n=n||{fetch:!0,resetState:!0};var i=this.state=n.resetState?a(this._initState):this._checkState(o({},this.state));this.mode=e;var r,c=this,h=this.fullCollection,p=this._handlers=this._handlers||{};if("server"==e||h)"server"==e&&h&&(l(y(p),function(t){r=p[t],c.off(t,r),h.off(t,r)}),delete this._handlers,this._fullComparator=h.comparator,delete this.fullCollection);else{h=this._makeFullCollection(n.models||[],n),h.pageableCollection=this,this.fullCollection=h;var d=this._makeCollectionEventHandler(this,h);l(["add","remove","reset","sort"],function(e){p[e]=r=t.bind(d,{},e),c.on(e,r),h.on(e,r)}),h.comparator=this._fullComparator}if("infinite"==e)for(var f=this.links={},g=i.firstPage,m=b(i.totalRecords/i.pageSize),v=0===g?x(0,m-1):m||g,w=i.firstPage;v>=w;w++)f[w]=this.url;else this.links&&delete this.links;return n.fetch?this.fetch(s(n,"fetch","resetState")):this},hasPreviousPage:function(){var t=this.state,e=t.currentPage;return"infinite"!=this.mode?e>t.firstPage:!!this.links[e-1]},hasNextPage:function(){var t=this.state,e=this.state.currentPage;return"infinite"!=this.mode?e<t.lastPage:!!this.links[e+1]},getFirstPage:function(t){return this.getPage("first",t)},getPreviousPage:function(t){return this.getPage("prev",t)},getNextPage:function(t){return this.getPage("next",t)},getLastPage:function(t){return this.getPage("last",t)},getPage:function(t,e){var i=this.mode,r=this.fullCollection;e=e||{fetch:!1};var a=this.state,l=a.firstPage,c=a.currentPage,u=a.lastPage,p=a.pageSize,d=t;switch(t){case"first":d=l;break;case"prev":d=c-1;break;case"next":d=c+1;break;case"last":d=u;break;default:d=n(t,"index")}this.state=this._checkState(o({},a,{currentPage:d})),e.from=c,e.to=d;var f=(0===l?d:d-1)*p,g=r&&r.length?r.models.slice(f,f+p):[];return"client"!=i&&("infinite"!=i||h(g))||e.fetch?("infinite"==i&&(e.url=this.links[d]),this.fetch(s(e,"fetch"))):(this.reset(g,s(e,"fetch")),this)},getPageByOffset:function(t,e){if(0>t)throw new RangeError("`offset must be > 0`");t=n(t);var i=w(t/this.state.pageSize);return 0!==this.state.firstPage&&i++,i>this.state.lastPage&&(i=this.state.lastPage),this.getPage(i,e)},sync:function(t,n,i){var r=this;if("infinite"==r.mode){var s=i.success,a=r.state.currentPage;i.success=function(t,e,n){var l=r.links,c=r.parseLinks(t,o({xhr:n},i));c.first&&(l[r.state.firstPage]=c.first),c.prev&&(l[a-1]=c.prev),c.next&&(l[a+1]=c.next),s&&s(t,e,n)}}return(_.sync||e.sync).call(r,t,n,i)},parseLinks:function(t,e){var n={},i=e.xhr.getResponseHeader("Link");if(i){var r=["first","prev","next"];l(i.split(","),function(t){var e=t.split(";"),i=e[0].replace(T,""),o=e.slice(1);l(o,function(t){var e=t.split("="),o=e[0].replace(k,""),s=e[1].replace(k,"");"rel"==o&&u(r,s)&&(n[s]=i)})})}return n},parse:function(t,e){var n=this.parseState(t,a(this.queryParams),a(this.state),e);return n&&(this.state=this._checkState(o({},this.state,n))),this.parseRecords(t,e)},parseState:function(e,n,i){if(e&&2===e.length&&m(e[0])&&f(e[1])){var r=a(i),o=e[0];return l(p(s(n,"directions")),function(e){var n=e[0],i=e[1],s=o[i];v(s)||t.isNull(s)||(r[n]=o[i])}),o.order&&(r.order=1*d(n.directions)[o.order]),r}},parseRecords:function(t){return t&&2===t.length&&m(t[0])&&f(t[1])?t[1]:t},fetch:function(t){t=t||{};var e=this._checkState(this.state),n=this.mode;"infinite"!=n||t.url||(t.url=this.links[e.currentPage]);var r=t.data||{},l=t.url||this.url||"";g(l)&&(l=l.call(this));var u=l.indexOf("?");-1!=u&&(o(r,i(l.slice(u+1))),l=l.slice(0,u)),t.url=l,t.data=r;var h,d,f,m,b="client"==this.mode?c(this.queryParams,"sortKey","order"):s(c(this.queryParams,y(C.queryParams)),"directions"),w=p(b),x=a(this);
for(h=0;h<w.length;h++)d=w[h],f=d[0],m=d[1],m=g(m)?m.call(x):m,null!=e[f]&&null!=m&&(r[m]=e[f]);if(e.sortKey&&e.order){var k=g(b.order)?b.order.call(x):b.order;r[k]=this.queryParams.directions[e.order+""]}else e.sortKey||delete r[b.order];var T=p(s(this.queryParams,y(C.queryParams)));for(h=0;h<T.length;h++)d=T[h],m=d[1],m=g(m)?m.call(x):m,null!=m&&(r[d[0]]=m);if("server"!=n){var S=this,P=this.fullCollection,D=t.success;return t.success=function(e,i,r){r=r||{},v(t.silent)?delete r.silent:r.silent=t.silent;var s=e.models;"client"==n?P.reset(s,r):(P.add(s,o({at:P.length},o(r,{parse:!1}))),S.trigger("reset",S,r)),D&&D(e,i,r)},_.fetch.call(this,o({},t,{silent:!0}))}return _.fetch.call(this,t)},_makeComparator:function(t,e,n){var i=this.state;return t=t||i.sortKey,e=e||i.order,t&&e?(n||(n=function(t,e){return t.get(e)}),function(i,r){var o,s=n(i,t),a=n(r,t);return 1===e&&(o=s,s=a,a=o),s===a?0:a>s?-1:1}):void 0},setSorting:function(t,e,n){var i=this.state;i.sortKey=t,i.order=e=e||i.order;var r=this.fullCollection,s=!1,a=!1;t||(s=a=!0);var l=this.mode;n=o({side:"client"==l?l:"server",full:!0},n);var c=this._makeComparator(t,e,n.sortValue),u=n.full,h=n.side;return"client"==h?u?(r&&(r.comparator=c),s=!0):(this.comparator=c,a=!0):"server"!=h||u||(this.comparator=c),s&&(this.comparator=null),a&&r&&(r.comparator=null),this}}),C=S.prototype;return S}),!function(t){"object"==typeof exports?module.exports=t(module.exports,require("underscore"),require("backbone")):t(this,this._,this.Backbone)}(function(t,e,n){"use strict";function i(t,e,n){var i=e-(t+"").length;i=0>i?0:i;for(var r="",o=0;i>o;o++)r+=n;return r+t}var r="	\n\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029";if(!String.prototype.trim||r.trim()){r="["+r+"]";var o=new RegExp("^"+r+r+"*"),s=new RegExp(r+r+"*$");String.prototype.trim=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(o,"").replace(s,"")}}var a=n.$,l=t.Backgrid={Extension:{},resolveNameToClass:function(t,n){if(e.isString(t)){var i=e.map(t.split("-"),function(t){return t.slice(0,1).toUpperCase()+t.slice(1)}).join("")+n,r=l[i]||l.Extension[i];if(e.isUndefined(r))throw new ReferenceError("Class '"+i+"' not found");return r}return t},callByNeed:function(){var t=arguments[0];if(!e.isFunction(t))return t;var n=arguments[1],i=[].slice.call(arguments,2);return t.apply(n,i+""?i:[])}};e.extend(l,n.Events);var c=l.Command=function(t){e.extend(this,{altKey:!!t.altKey,"char":t["char"],charCode:t.charCode,ctrlKey:!!t.ctrlKey,key:t.key,keyCode:t.keyCode,locale:t.locale,location:t.location,metaKey:!!t.metaKey,repeat:!!t.repeat,shiftKey:!!t.shiftKey,which:t.which})};e.extend(c.prototype,{moveUp:function(){return 38==this.keyCode},moveDown:function(){return 40===this.keyCode},moveLeft:function(){return this.shiftKey&&9===this.keyCode},moveRight:function(){return!this.shiftKey&&9===this.keyCode},save:function(){return 13===this.keyCode},cancel:function(){return 27===this.keyCode},passThru:function(){return!(this.moveUp()||this.moveDown()||this.moveLeft()||this.moveRight()||this.save()||this.cancel())}});var u=l.CellFormatter=function(){};e.extend(u.prototype,{fromRaw:function(t){return t},toRaw:function(t){return t}});var h=l.NumberFormatter=function(t){if(e.extend(this,this.defaults,t||{}),this.decimals<0||this.decimals>20)throw new RangeError("decimals must be between 0 and 20")};h.prototype=new u,e.extend(h.prototype,{defaults:{decimals:2,decimalSeparator:".",orderSeparator:","},HUMANIZED_NUM_RE:/(\d)(?=(?:\d{3})+$)/g,fromRaw:function(t){if(e.isNull(t)||e.isUndefined(t))return"";t=t.toFixed(~~this.decimals);var n=t.split("."),i=n[0],r=n[1]?(this.decimalSeparator||".")+n[1]:"";return i.replace(this.HUMANIZED_NUM_RE,"$1"+this.orderSeparator)+r},toRaw:function(t){if(t=t.trim(),""===t)return null;for(var n="",i=t.split(this.orderSeparator),r=0;r<i.length;r++)n+=i[r];var o=n.split(this.decimalSeparator);n="";for(var r=0;r<o.length;r++)n=n+o[r]+".";"."===n[n.length-1]&&(n=n.slice(0,n.length-1));var s=1*(1*n).toFixed(~~this.decimals);return e.isNumber(s)&&!e.isNaN(s)?s:void 0}});var p=l.PercentFormatter=function(){l.NumberFormatter.apply(this,arguments)};p.prototype=new l.NumberFormatter,e.extend(p.prototype,{defaults:e.extend({},h.prototype.defaults,{multiplier:1,symbol:"%"}),fromRaw:function(t){var e=[].slice.call(arguments,1);return e.unshift(t*this.multiplier),(h.prototype.fromRaw.apply(this,e)||"0")+this.symbol},toRaw:function(t){var n=t.split(this.symbol);if(n&&n[0]&&""===n[1]||null==n[1]){var i=h.prototype.toRaw.call(this,n[0]);return e.isUndefined(i)?i:i/this.multiplier}}});var d=l.DatetimeFormatter=function(t){if(e.extend(this,this.defaults,t||{}),!this.includeDate&&!this.includeTime)throw new Error("Either includeDate or includeTime must be true")};d.prototype=new u,e.extend(d.prototype,{defaults:{includeDate:!0,includeTime:!0,includeMilli:!1},DATE_RE:/^([+\-]?\d{4})-(\d{2})-(\d{2})$/,TIME_RE:/^(\d{2}):(\d{2}):(\d{2})(\.(\d{3}))?$/,ISO_SPLITTER_RE:/T|Z| +/,_convert:function(t,n){if(""===(t+"").trim())return null;var r,o=null;if(e.isNumber(t)){var s=new Date(t);r=i(s.getUTCFullYear(),4,0)+"-"+i(s.getUTCMonth()+1,2,0)+"-"+i(s.getUTCDate(),2,0),o=i(s.getUTCHours(),2,0)+":"+i(s.getUTCMinutes(),2,0)+":"+i(s.getUTCSeconds(),2,0)}else{t=t.trim();var a=t.split(this.ISO_SPLITTER_RE)||[];r=this.DATE_RE.test(a[0])?a[0]:"",o=r&&a[1]?a[1]:this.TIME_RE.test(a[0])?a[0]:""}var l=this.DATE_RE.exec(r)||[],c=this.TIME_RE.exec(o)||[];if(n){if(this.includeDate&&e.isUndefined(l[0]))return;if(this.includeTime&&e.isUndefined(c[0]))return;if(!this.includeDate&&r)return;if(!this.includeTime&&o)return}var s=new Date(Date.UTC(1*l[1]||0,1*l[2]-1||0,1*l[3]||0,1*c[1]||null,1*c[2]||null,1*c[3]||null,1*c[5]||null)),u="";return this.includeDate&&(u=i(s.getUTCFullYear(),4,0)+"-"+i(s.getUTCMonth()+1,2,0)+"-"+i(s.getUTCDate(),2,0)),this.includeTime&&(u=u+(this.includeDate?"T":"")+i(s.getUTCHours(),2,0)+":"+i(s.getUTCMinutes(),2,0)+":"+i(s.getUTCSeconds(),2,0),this.includeMilli&&(u=u+"."+i(s.getUTCMilliseconds(),3,0))),this.includeDate&&this.includeTime&&(u+="Z"),u},fromRaw:function(t){return e.isNull(t)||e.isUndefined(t)?"":this._convert(t)},toRaw:function(t){return this._convert(t,!0)}});var f=l.StringFormatter=function(){};f.prototype=new u,e.extend(f.prototype,{fromRaw:function(t){return e.isUndefined(t)||e.isNull(t)?"":t+""}});var g=l.EmailFormatter=function(){};g.prototype=new u,e.extend(g.prototype,{toRaw:function(t){var n=t.trim().split("@");return 2===n.length&&e.all(n)?t:void 0}});var m=l.SelectFormatter=function(){};m.prototype=new u,e.extend(m.prototype,{fromRaw:function(t){return e.isArray(t)?t:null!=t?[t]:[]}});var y=l.CellEditor=n.View.extend({initialize:function(t){this.formatter=t.formatter,this.column=t.column,this.column instanceof D||(this.column=new D(this.column)),this.listenTo(this.model,"backgrid:editing",this.postRender)},postRender:function(t,e){return(null==e||e.get("name")==this.column.get("name"))&&this.$el.focus(),this}}),v=l.InputCellEditor=y.extend({tagName:"input",attributes:{type:"text"},events:{blur:"saveOrCancel",keydown:"saveOrCancel"},initialize:function(t){v.__super__.initialize.apply(this,arguments),t.placeholder&&this.$el.attr("placeholder",t.placeholder)},render:function(){var t=this.model;return this.$el.val(this.formatter.fromRaw(t.get(this.column.get("name")),t)),this},saveOrCancel:function(t){var n=this.formatter,i=this.model,r=this.column,o=new c(t),s="blur"===t.type;if(o.moveUp()||o.moveDown()||o.moveLeft()||o.moveRight()||o.save()||s){t.preventDefault(),t.stopPropagation();var a=this.$el.val(),l=n.toRaw(a,i);e.isUndefined(l)?i.trigger("backgrid:error",i,r,a):(i.set(r.get("name"),l),i.trigger("backgrid:edited",i,r,o))}else o.cancel()&&(t.stopPropagation(),i.trigger("backgrid:edited",i,r,o))},postRender:function(t,e){if(null==e||e.get("name")==this.column.get("name"))if("right"===this.$el.css("text-align")){var n=this.$el.val();this.$el.focus().val(null).val(n)}else this.$el.focus();return this}}),b=l.Cell=n.View.extend({tagName:"td",formatter:u,editor:v,events:{click:"enterEditMode"},initialize:function(t){this.column=t.column,this.column instanceof D||(this.column=new D(this.column));var n=this.column,i=this.model,r=this.$el,o=l.resolveNameToClass(n.get("formatter")||this.formatter,"Formatter");e.isFunction(o.fromRaw)||e.isFunction(o.toRaw)||(o=new o),this.formatter=o,this.editor=l.resolveNameToClass(this.editor,"CellEditor"),this.listenTo(i,"change:"+n.get("name"),function(){r.hasClass("editor")||this.render()}),this.listenTo(i,"backgrid:error",this.renderError),this.listenTo(n,"change:editable change:sortable change:renderable",function(t){var e=t.changedAttributes();for(var n in e)e.hasOwnProperty(n)&&r.toggleClass(n,e[n])}),l.callByNeed(n.editable(),n,i)&&r.addClass("editable"),l.callByNeed(n.sortable(),n,i)&&r.addClass("sortable"),l.callByNeed(n.renderable(),n,i)&&r.addClass("renderable")},render:function(){this.$el.empty();var t=this.model;return this.$el.text(this.formatter.fromRaw(t.get(this.column.get("name")),t)),this.delegateEvents(),this},enterEditMode:function(){var t=this.model,e=this.column,n=l.callByNeed(e.editable(),e,t);n&&(this.currentEditor=new this.editor({column:this.column,model:this.model,formatter:this.formatter}),t.trigger("backgrid:edit",t,e,this,this.currentEditor),this.undelegateEvents(),this.$el.empty(),this.$el.append(this.currentEditor.$el),this.currentEditor.render(),this.$el.addClass("editor"),t.trigger("backgrid:editing",t,e,this,this.currentEditor))},renderError:function(t,e){(null==e||e.get("name")==this.column.get("name"))&&this.$el.addClass("error")},exitEditMode:function(){this.$el.removeClass("error"),this.currentEditor.remove(),this.stopListening(this.currentEditor),delete this.currentEditor,this.$el.removeClass("editor"),this.render()},remove:function(){return this.currentEditor&&(this.currentEditor.remove.apply(this.currentEditor,arguments),delete this.currentEditor),b.__super__.remove.apply(this,arguments)}}),w=l.StringCell=b.extend({className:"string-cell",formatter:f}),x=l.UriCell=b.extend({className:"uri-cell",title:null,target:"_blank",initialize:function(t){x.__super__.initialize.apply(this,arguments),this.title=t.title||this.title,this.target=t.target||this.target},render:function(){this.$el.empty();var t=this.model.get(this.column.get("name")),e=this.formatter.fromRaw(t,this.model);return this.$el.append(a("<a>",{tabIndex:-1,href:t,title:this.title||e,target:this.target}).text(e)),this.delegateEvents(),this}}),_=(l.EmailCell=w.extend({className:"email-cell",formatter:g,render:function(){this.$el.empty();var t=this.model,e=this.formatter.fromRaw(t.get(this.column.get("name")),t);return this.$el.append(a("<a>",{tabIndex:-1,href:"mailto:"+e,title:e}).text(e)),this.delegateEvents(),this}}),l.NumberCell=b.extend({className:"number-cell",decimals:h.prototype.defaults.decimals,decimalSeparator:h.prototype.defaults.decimalSeparator,orderSeparator:h.prototype.defaults.orderSeparator,formatter:h,initialize:function(){_.__super__.initialize.apply(this,arguments);var t=this.formatter;t.decimals=this.decimals,t.decimalSeparator=this.decimalSeparator,t.orderSeparator=this.orderSeparator}})),k=(l.IntegerCell=_.extend({className:"integer-cell",decimals:0}),l.PercentCell=_.extend({className:"percent-cell",multiplier:p.prototype.defaults.multiplier,symbol:p.prototype.defaults.symbol,formatter:p,initialize:function(){k.__super__.initialize.apply(this,arguments);var t=this.formatter;t.multiplier=this.multiplier,t.symbol=this.symbol}})),T=l.DatetimeCell=b.extend({className:"datetime-cell",includeDate:d.prototype.defaults.includeDate,includeTime:d.prototype.defaults.includeTime,includeMilli:d.prototype.defaults.includeMilli,formatter:d,initialize:function(){T.__super__.initialize.apply(this,arguments);var t=this.formatter;t.includeDate=this.includeDate,t.includeTime=this.includeTime,t.includeMilli=this.includeMilli;var n=this.includeDate?"YYYY-MM-DD":"";n+=this.includeDate&&this.includeTime?"T":"",n+=this.includeTime?"HH:mm:ss":"",n+=this.includeTime&&this.includeMilli?".SSS":"",this.editor=this.editor.extend({attributes:e.extend({},this.editor.prototype.attributes,this.editor.attributes,{placeholder:n})})}}),S=(l.DateCell=T.extend({className:"date-cell",includeTime:!1}),l.TimeCell=T.extend({className:"time-cell",includeDate:!1}),l.BooleanCellEditor=y.extend({tagName:"input",attributes:{tabIndex:-1,type:"checkbox"},events:{mousedown:function(){this.mouseDown=!0},blur:"enterOrExitEditMode",mouseup:function(){this.mouseDown=!1},change:"saveOrCancel",keydown:"saveOrCancel"},render:function(){var t=this.model,e=this.formatter.fromRaw(t.get(this.column.get("name")),t);return this.$el.prop("checked",e),this},enterOrExitEditMode:function(t){if(!this.mouseDown){var e=this.model;e.trigger("backgrid:edited",e,this.column,new c(t))}},saveOrCancel:function(t){var e=this.model,n=this.column,i=this.formatter,r=new c(t);if(r.passThru()&&"change"!=t.type)return!0;r.cancel()&&(t.stopPropagation(),e.trigger("backgrid:edited",e,n,r));var o=this.$el;if(r.save()||r.moveLeft()||r.moveRight()||r.moveUp()||r.moveDown()){t.preventDefault(),t.stopPropagation();var s=i.toRaw(o.prop("checked"),e);e.set(n.get("name"),s),e.trigger("backgrid:edited",e,n,r)}else if("change"==t.type){var s=i.toRaw(o.prop("checked"),e);e.set(n.get("name"),s),o.focus()}}})),C=(l.BooleanCell=b.extend({className:"boolean-cell",editor:S,events:{click:"enterEditMode"},render:function(){this.$el.empty();var t=this.model,e=this.column,n=l.callByNeed(e.editable(),e,t);return this.$el.append(a("<input>",{tabIndex:-1,type:"checkbox",checked:this.formatter.fromRaw(t.get(e.get("name")),t),disabled:!n})),this.delegateEvents(),this}}),l.SelectCellEditor=y.extend({tagName:"select",events:{change:"save",blur:"close",keydown:"close"},template:e.template('<option value="<%- value %>" <%= selected ? \'selected="selected"\' : "" %>><%- text %></option>',null,{variable:null}),setOptionValues:function(t){this.optionValues=t,this.optionValues=e.result(this,"optionValues")},setMultiple:function(t){this.multiple=t,this.$el.prop("multiple",t)},_renderOptions:function(t,n){for(var i="",r=0;r<t.length;r++)i+=this.template({text:t[r][0],value:t[r][1],selected:e.indexOf(n,t[r][1])>-1});return i},render:function(){this.$el.empty();var t=e.result(this,"optionValues"),n=this.model,i=this.formatter.fromRaw(n.get(this.column.get("name")),n);if(!e.isArray(t))throw new TypeError("optionValues must be an array");for(var r=null,o=null,r=null,s=null,l=null,c=0;c<t.length;c++){var r=t[c];if(e.isArray(r))o=r[0],r=r[1],this.$el.append(this.template({text:o,value:r,selected:e.indexOf(i,r)>-1}));else{if(!e.isObject(r))throw new TypeError("optionValues elements must be a name-value pair or an object hash of { name: 'optgroup label', value: [option name-value pairs] }");s=r.name,l=a("<optgroup></optgroup>",{label:s}),l.append(this._renderOptions.call(this,r.values,i)),this.$el.append(l)}}return this.delegateEvents(),this},save:function(){var t=this.model,e=this.column;t.set(e.get("name"),this.formatter.toRaw(this.$el.val(),t))},close:function(t){var e=this.model,n=this.column,i=new c(t);i.cancel()?(t.stopPropagation(),e.trigger("backgrid:edited",e,n,new c(t))):(i.save()||i.moveLeft()||i.moveRight()||i.moveUp()||i.moveDown()||"blur"==t.type)&&(t.preventDefault(),t.stopPropagation(),this.save(t),e.trigger("backgrid:edited",e,n,new c(t)))}})),P=l.SelectCell=b.extend({className:"select-cell",editor:C,multiple:!1,formatter:m,optionValues:void 0,delimiter:", ",initialize:function(){P.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"backgrid:edit",function(t,e,n,i){e.get("name")==this.column.get("name")&&(i.setOptionValues(this.optionValues),i.setMultiple(this.multiple))})},render:function(){this.$el.empty();var t=e.result(this,"optionValues"),n=this.model,i=this.formatter.fromRaw(n.get(this.column.get("name")),n),r=[];try{if(!e.isArray(t)||e.isEmpty(t))throw new TypeError;for(var o=0;o<i.length;o++)for(var s=i[o],a=0;a<t.length;a++){var l=t[a];if(e.isArray(l)){var c=l[0],l=l[1];l==s&&r.push(c)}else{if(!e.isObject(l))throw new TypeError;for(var u=l.values,h=0;h<u.length;h++){var p=u[h];p[1]==s&&r.push(p[0])}}}this.$el.append(r.join(this.delimiter))}catch(d){if(d instanceof TypeError)throw new TypeError("'optionValues' must be of type {Array.<Array>|Array.<{name: string, values: Array.<Array>}>}");throw d}return this.delegateEvents(),this}}),D=l.Column=n.Model.extend({defaults:{name:void 0,label:void 0,sortable:!0,editable:!0,renderable:!0,formatter:void 0,sortType:"cycle",sortValue:void 0,direction:null,cell:void 0,headerCell:void 0},initialize:function(){this.has("label")||this.set({label:this.get("name")},{silent:!0});var t=l.resolveNameToClass(this.get("headerCell"),"HeaderCell"),e=l.resolveNameToClass(this.get("cell"),"Cell");this.set({cell:e,headerCell:t},{silent:!0})},sortValue:function(){var t=this.get("sortValue");return e.isString(t)?this[t]:e.isFunction(t)?t:function(t,e){return t.get(e)}}});e.each(["sortable","renderable","editable"],function(t){D.prototype[t]=function(){var n=this.get(t);return e.isString(n)?this[n]:e.isFunction(n)?n:!!n}});var M=l.Columns=n.Collection.extend({model:D}),A=l.Row=n.View.extend({tagName:"tr",initialize:function(t){var e=this.columns=t.columns;e instanceof n.Collection||(e=this.columns=new M(e));for(var i=this.cells=[],r=0;r<e.length;r++)i.push(this.makeCell(e.at(r),t));this.listenTo(e,"add",function(e,n){var r=n.indexOf(e),o=this.makeCell(e,t);i.splice(r,0,o);var s=this.$el;0===r?s.prepend(o.render().$el):r===n.length-1?s.append(o.render().$el):s.children().eq(r).before(o.render().$el)}),this.listenTo(e,"remove",function(t,e,n){i[n.index].remove(),i.splice(n.index,1)})},makeCell:function(t){return new(t.get("cell"))({column:t,model:this.model})},render:function(){this.$el.empty();for(var t=document.createDocumentFragment(),e=0;e<this.cells.length;e++)t.appendChild(this.cells[e].render().el);return this.el.appendChild(t),this.delegateEvents(),this},remove:function(){for(var t=0;t<this.cells.length;t++){var e=this.cells[t];e.remove.apply(e,arguments)}return n.View.prototype.remove.apply(this,arguments)}}),O=l.EmptyRow=n.View.extend({tagName:"tr",emptyText:null,initialize:function(t){this.emptyText=t.emptyText,this.columns=t.columns},render:function(){this.$el.empty();var t=document.createElement("td");return t.setAttribute("colspan",this.columns.length),t.appendChild(document.createTextNode(e.result(this,"emptyText"))),this.el.className="empty",this.el.appendChild(t),this}}),E=l.HeaderCell=n.View.extend({tagName:"th",events:{"click a":"onClick"},initialize:function(t){this.column=t.column,this.column instanceof D||(this.column=new D(this.column));var e=this.column,n=this.collection,i=this.$el;this.listenTo(e,"change:editable change:sortable change:renderable",function(t){var e=t.changedAttributes();for(var n in e)e.hasOwnProperty(n)&&i.toggleClass(n,e[n])}),this.listenTo(e,"change:direction",this.setCellDirection),this.listenTo(e,"change:name change:label",this.render),l.callByNeed(e.editable(),e,n)&&i.addClass("editable"),l.callByNeed(e.sortable(),e,n)&&i.addClass("sortable"),l.callByNeed(e.renderable(),e,n)&&i.addClass("renderable"),this.listenTo(n.fullCollection||n,"sort",this.removeCellDirection)},removeCellDirection:function(){this.$el.removeClass("ascending").removeClass("descending"),this.column.set("direction",null)},setCellDirection:function(t,e){this.$el.removeClass("ascending").removeClass("descending"),t.cid==this.column.cid&&this.$el.addClass(e)},onClick:function(t){function e(t,e){"ascending"===i.get("direction")?r.trigger(o,e,"descending"):"descending"===i.get("direction")?r.trigger(o,e,null):r.trigger(o,e,"ascending")}function n(t,e){"ascending"===i.get("direction")?r.trigger(o,e,"descending"):r.trigger(o,e,"ascending")}t.preventDefault();var i=this.column,r=this.collection,o="backgrid:sort",s=l.callByNeed(i.sortable(),i,this.collection);if(s){var a=i.get("sortType");"toggle"===a?n(this,i):e(this,i)}},render:function(){this.$el.empty();var t,e=this.column,n=l.callByNeed(e.sortable(),e,this.collection);return t=n?a("<a>").text(e.get("label")).append("<b class='sort-caret'></b>"):document.createTextNode(e.get("label")),this.$el.append(t),this.$el.addClass(e.get("name")),this.$el.addClass(e.get("direction")),this.delegateEvents(),this}}),L=(l.HeaderRow=l.Row.extend({requiredOptions:["columns","collection"],initialize:function(){l.Row.prototype.initialize.apply(this,arguments)},makeCell:function(t,e){var n=t.get("headerCell")||e.headerCell||E;return n=new n({column:t,collection:this.collection})}}),l.Header=n.View.extend({tagName:"thead",initialize:function(t){this.columns=t.columns,this.columns instanceof n.Collection||(this.columns=new M(this.columns)),this.row=new l.HeaderRow({columns:this.columns,collection:this.collection})},render:function(){return this.$el.append(this.row.render().$el),this.delegateEvents(),this},remove:function(){return this.row.remove.apply(this.row,arguments),n.View.prototype.remove.apply(this,arguments)}})),N=l.Body=n.View.extend({tagName:"tbody",initialize:function(t){this.columns=t.columns,this.columns instanceof n.Collection||(this.columns=new M(this.columns)),this.row=t.row||A,this.rows=this.collection.map(function(t){var e=new this.row({columns:this.columns,model:t});return e},this),this.emptyText=t.emptyText,this._unshiftEmptyRowMayBe();var e=this.collection;this.listenTo(e,"add",this.insertRow),this.listenTo(e,"remove",this.removeRow),this.listenTo(e,"sort",this.refresh),this.listenTo(e,"reset",this.refresh),this.listenTo(e,"backgrid:sort",this.sort),this.listenTo(e,"backgrid:edited",this.moveToNextCell)},_unshiftEmptyRowMayBe:function(){0===this.rows.length&&null!=this.emptyText&&this.rows.unshift(new O({emptyText:this.emptyText,columns:this.columns}))},insertRow:function(t,e,i){if(this.rows[0]instanceof O&&this.rows.pop().remove(),!(e instanceof n.Collection||i))return void this.collection.add(t,i=e);var r=new this.row({columns:this.columns,model:t}),o=e.indexOf(t);this.rows.splice(o,0,r);var s=this.$el,a=s.children(),l=r.render().$el;return o>=a.length?s.append(l):a.eq(o).before(l),this},removeRow:function(t,n,i){return i?((e.isUndefined(i.render)||i.render)&&this.rows[i.index].remove(),this.rows.splice(i.index,1),this._unshiftEmptyRowMayBe(),this):(this.collection.remove(t,i=n),void this._unshiftEmptyRowMayBe())},refresh:function(){for(var t=0;t<this.rows.length;t++)this.rows[t].remove();return this.rows=this.collection.map(function(t){var e=new this.row({columns:this.columns,model:t});return e},this),this._unshiftEmptyRowMayBe(),this.render(),this.collection.trigger("backgrid:refresh",this),this},render:function(){this.$el.empty();for(var t=document.createDocumentFragment(),e=0;e<this.rows.length;e++){var n=this.rows[e];t.appendChild(n.render().el)}return this.el.appendChild(t),this.delegateEvents(),this},remove:function(){for(var t=0;t<this.rows.length;t++){var e=this.rows[t];e.remove.apply(e,arguments)}return n.View.prototype.remove.apply(this,arguments)},sort:function(t,i){if(!e.contains(["ascending","descending",null],i))throw new RangeError('direction must be one of "ascending", "descending" or `null`');e.isString(t)&&(t=this.columns.findWhere({name:t}));var r,o=this.collection;r="ascending"===i?-1:"descending"===i?1:null;var s=this.makeComparator(t.get("name"),r,r?t.sortValue():function(t){return 1*t.cid.replace("c","")});return n.PageableCollection&&o instanceof n.PageableCollection?(o.setSorting(r&&t.get("name"),r,{sortValue:t.sortValue()}),o.fullCollection?(null==o.fullCollection.comparator&&(o.fullCollection.comparator=s),o.fullCollection.sort(),o.trigger("backgrid:sorted",t,i,o)):o.fetch({reset:!0,success:function(){o.trigger("backgrid:sorted",t,i,o)}})):(o.comparator=s,o.sort(),o.trigger("backgrid:sorted",t,i,o)),t.set("direction",i),this},makeComparator:function(t,e,n){return function(i,r){var o,s=n(i,t),a=n(r,t);return 1===e&&(o=s,s=a,a=o),s===a?0:a>s?-1:1}},moveToNextCell:function(t,e,n){var i,r,o,s,a,c=this.collection.indexOf(t),u=this.columns.indexOf(e);if(this.rows[c].cells[u].exitEditMode(),n.moveUp()||n.moveDown()||n.moveLeft()||n.moveRight()||n.save()){var h=this.columns.length,p=h*this.collection.length;if(n.moveUp()||n.moveDown()){s=c+(n.moveUp()?-1:1);var d=this.rows[s];d?(i=d.cells[u],l.callByNeed(i.column.editable(),i.column,t)&&(i.enterEditMode(),t.trigger("backgrid:next",s,u,!1))):t.trigger("backgrid:next",s,u,!0)}else if(n.moveLeft()||n.moveRight()){for(var f=n.moveRight(),g=c*h+u+(f?1:-1);g>=0&&p>g;f?g++:g--)if(s=~~(g/h),a=g-s*h,i=this.rows[s].cells[a],r=l.callByNeed(i.column.renderable(),i.column,i.model),o=l.callByNeed(i.column.editable(),i.column,t),r&&o){i.enterEditMode(),t.trigger("backgrid:next",s,a,!1);break}g==p&&t.trigger("backgrid:next",~~(g/h),g-s*h,!0)}}return this}});return l.Footer=n.View.extend({tagName:"tfoot",initialize:function(t){this.columns=t.columns,this.columns instanceof n.Collection||(this.columns=new l.Columns(this.columns))}}),l.Grid=n.View.extend({tagName:"table",className:"backgrid",header:L,body:N,footer:null,initialize:function(t){t.columns instanceof n.Collection||(t.columns=new M(t.columns)),this.columns=t.columns;var i=e.omit(t,["el","id","attributes","className","tagName","events"]);this.body=t.body||this.body,this.body=new this.body(i),this.header=t.header||this.header,this.header&&(this.header=new this.header(i)),this.footer=t.footer||this.footer,this.footer&&(this.footer=new this.footer(i)),this.listenTo(this.columns,"reset",function(){this.header&&(this.header=new(this.header.remove().constructor)(i)),this.body=new(this.body.remove().constructor)(i),this.footer&&(this.footer=new(this.footer.remove().constructor)(i)),this.render()})},insertRow:function(){return this.body.insertRow.apply(this.body,arguments),this},removeRow:function(){return this.body.removeRow.apply(this.body,arguments),this},insertColumn:function(){return this.columns.add.apply(this.columns,arguments),this},removeColumn:function(){return this.columns.remove.apply(this.columns,arguments),this},sort:function(){return this.body.sort.apply(this.body,arguments),this},render:function(){return this.$el.empty(),this.header&&this.$el.append(this.header.render().$el),this.footer&&this.$el.append(this.footer.render().$el),this.$el.append(this.body.render().$el),this.delegateEvents(),this.trigger("backgrid:rendered",this),this},remove:function(){return this.header&&this.header.remove.apply(this.header,arguments),this.body.remove.apply(this.body,arguments),this.footer&&this.footer.remove.apply(this.footer,arguments),n.View.prototype.remove.apply(this,arguments)}}),l}),!function(t,e){"object"==typeof exports&&(module.exports=e(require("underscore"),require("backbone"),require("backgrid"),require("backbone.paginator"))),"function"==typeof define&&define.amd?define(["underscore","backbone","backgrid","backbone.paginator"],e):e(t._,t.Backbone,t.Backgrid)}(this,function(t,e,n){"use strict";var i=n.Extension.PageHandle=e.View.extend({tagName:"li",events:{"click a":"changePage"},title:function(t){return"Page "+t.label},isRewind:!1,isBack:!1,isForward:!1,isFastForward:!1,initialize:function(e){var n=this.collection,i=n.state,r=i.currentPage,o=i.firstPage,s=i.lastPage;t.extend(this,t.pick(e,["isRewind","isBack","isForward","isFastForward"]));var a;this.isRewind?a=o:this.isBack?a=Math.max(o,r-1):this.isForward?a=Math.min(s,r+1):this.isFastForward?a=s:(a=+e.pageIndex,a=o?a+1:a),this.pageIndex=a,this.label=(e.label||(o?a:a+1))+"";var l=e.title||this.title;this.title=t.isFunction(l)?l({label:this.label}):l},render:function(){this.$el.empty();var t=document.createElement("a");t.href="#",this.title&&(t.title=this.title),t.innerHTML=this.label,this.el.appendChild(t);var e=this.collection,n=e.state,i=n.currentPage,r=this.pageIndex;return this.isRewind&&i==n.firstPage||this.isBack&&!e.hasPreviousPage()||this.isForward&&!e.hasNextPage()||this.isFastForward&&(i==n.lastPage||n.totalPages<1)?this.$el.addClass("disabled"):this.isRewind||this.isBack||this.isForward||this.isFastForward||n.currentPage!=r||this.$el.addClass("active"),this.delegateEvents(),this},changePage:function(t){t.preventDefault();var e=this.$el,n=this.collection;return e.hasClass("active")||e.hasClass("disabled")||(this.isRewind?n.getFirstPage():this.isBack?n.getPreviousPage():this.isForward?n.getNextPage():this.isFastForward?n.getLastPage():n.getPage(this.pageIndex,{reset:!0})),this}}),r=n.Extension.Paginator=e.View.extend({className:"backgrid-paginator",windowSize:10,slideScale:.5,controls:{rewind:{label:"\u300a",title:"First"},back:{label:"\u3008",title:"Previous"},forward:{label:"\u3009",title:"Next"},fastForward:{label:"\u300b",title:"Last"}},renderIndexedPageHandles:!0,pageHandle:i,goBackFirstOnSort:!0,initialize:function(e){var n=this;n.controls=t.defaults(e.controls||{},n.controls,r.prototype.controls),t.extend(n,t.pick(e||{},"windowSize","pageHandle","slideScale","goBackFirstOnSort","renderIndexedPageHandles"));var i=n.collection;n.listenTo(i,"add",n.render),n.listenTo(i,"remove",n.render),n.listenTo(i,"reset",n.render),n.listenTo(i,"backgrid:sorted",function(){n.goBackFirstOnSort&&i.getFirstPage({reset:!0})})},slideMaybe:function(t,e,n,i){return Math.round(n%i/i)},slideThisMuch:function(t,e,n,i,r){return~~(i*r)},_calculateWindow:function(){var t=this.collection,e=t.state,n=e.firstPage,i=+e.lastPage;i=Math.max(0,n?i-1:i);var r=Math.max(e.currentPage,e.firstPage);r=n?r-1:r;var o=this.windowSize,s=this.slideScale,a=Math.floor(r/o)*o;r<=i-this.slideThisMuch()&&(a+=this.slideMaybe(n,i,r,o,s)*this.slideThisMuch(n,i,r,o,s));var l=Math.min(i+1,a+o);return[a,l]},makeHandles:function(){var e=[],n=this.collection,i=this._calculateWindow(),r=i[0],o=i[1];if(this.renderIndexedPageHandles)for(var s=r;o>s;s++)e.push(new this.pageHandle({collection:n,pageIndex:s}));var a=this.controls;return t.each(["back","rewind","forward","fastForward"],function(t){var i=a[t];if(i){var r={collection:n,title:i.title,label:i.label};r["is"+t.slice(0,1).toUpperCase()+t.slice(1)]=!0;var o=new this.pageHandle(r);"rewind"==t||"back"==t?e.unshift(o):e.push(o)}},this),e},render:function(){if(this.$el.empty(),this.handles)for(var t=0,e=this.handles.length;e>t;t++)this.handles[t].remove();for(var n=this.handles=this.makeHandles(),i=document.createElement("ul"),t=0;t<n.length;t++)i.appendChild(n[t].render().el);return this.el.appendChild(i),this}})}),Backbone.Syphon=function(t,e,n){var i={};i.ignoredTypes=["button","submit","reset","fieldset"],i.serialize=function(t,i){var s={},c=a(i),u=r(t,c);return n.each(u,function(t){var n=e(t),i=o(n),r=c.keyExtractors.get(i),a=r(n),u=c.inputReaders.get(i),h=u(n),p=c.keyAssignmentValidators.get(i);if(p(n,a,h)){var d=c.keySplitter(a);s=l(s,d,h)}}),s},i.deserialize=function(t,i,s){var l=a(s),u=r(t,l),h=c(l,i);n.each(u,function(t){var n=e(t),i=o(n),r=l.keyExtractors.get(i),s=r(n),a=l.inputWriters.get(i),c=h[s];a(n,c)})};var r=function(t,i){var r=s(t),a=r.elements;return a=n.reject(a,function(t){var r,s=o(t),a=i.keyExtractors.get(s),l=a(e(t)),c=n.include(i.ignoredTypes,s),u=n.include(i.include,l),h=n.include(i.exclude,l);return r=u?!1:i.include?!0:h||c})},o=function(t){var n,i=e(t),r=i[0].tagName,o=r;return"input"===r.toLowerCase()&&(n=i.attr("type"),o=n?n:"text"),o.toLowerCase()},s=function(t){return n.isUndefined(t.$el)&&"form"===t.tagName.toLowerCase()?t:t.$el.is("form")?t.el:t.$("form")[0]},a=function(t){var e=n.clone(t)||{};return e.ignoredTypes=n.clone(i.ignoredTypes),e.inputReaders=e.inputReaders||i.InputReaders,e.inputWriters=e.inputWriters||i.InputWriters,e.keyExtractors=e.keyExtractors||i.KeyExtractors,e.keySplitter=e.keySplitter||i.KeySplitter,e.keyJoiner=e.keyJoiner||i.KeyJoiner,e.keyAssignmentValidators=e.keyAssignmentValidators||i.KeyAssignmentValidators,e},l=function(t,e,i){if(!e)return t;var r=e.shift();return t[r]||(t[r]=n.isArray(r)?[]:{}),0===e.length&&(n.isArray(t[r])?t[r].push(i):t[r]=i),e.length>0&&l(t[r],e,i),t},c=function(t,e,i){var r={};return n.each(e,function(e,o){var s={};i&&(o=t.keyJoiner(i,o)),n.isArray(e)?(o+="[]",s[o]=e):n.isObject(e)?s=c(t,e,o):s[o]=e,n.extend(r,s)}),r};return i}(Backbone,jQuery,_),Backbone.Syphon.TypeRegistry=function(){this.registeredTypes={}},Backbone.Syphon.TypeRegistry.extend=Backbone.Model.extend,_.extend(Backbone.Syphon.TypeRegistry.prototype,{get:function(t){var e=this.registeredTypes[t];return e||(e=this.registeredTypes["default"]),e},register:function(t,e){this.registeredTypes[t]=e},registerDefault:function(t){this.registeredTypes["default"]=t},unregister:function(t){this.registeredTypes[t]&&delete this.registeredTypes[t]
}}),Backbone.Syphon.KeyExtractorSet=Backbone.Syphon.TypeRegistry.extend(),Backbone.Syphon.KeyExtractors=new Backbone.Syphon.KeyExtractorSet,Backbone.Syphon.KeyExtractors.registerDefault(function(t){return t.prop("name")}),Backbone.Syphon.InputReaderSet=Backbone.Syphon.TypeRegistry.extend(),Backbone.Syphon.InputReaders=new Backbone.Syphon.InputReaderSet,Backbone.Syphon.InputReaders.registerDefault(function(t){return t.val()}),Backbone.Syphon.InputReaders.register("checkbox",function(t){var e=t.prop("checked");return e}),Backbone.Syphon.InputWriterSet=Backbone.Syphon.TypeRegistry.extend(),Backbone.Syphon.InputWriters=new Backbone.Syphon.InputWriterSet,Backbone.Syphon.InputWriters.registerDefault(function(t,e){t.val(e)}),Backbone.Syphon.InputWriters.register("checkbox",function(t,e){t.prop("checked",e)}),Backbone.Syphon.InputWriters.register("radio",function(t,e){t.prop("checked",t.val()===e)}),Backbone.Syphon.KeyAssignmentValidatorSet=Backbone.Syphon.TypeRegistry.extend(),Backbone.Syphon.KeyAssignmentValidators=new Backbone.Syphon.KeyAssignmentValidatorSet,Backbone.Syphon.KeyAssignmentValidators.registerDefault(function(){return!0}),Backbone.Syphon.KeyAssignmentValidators.register("radio",function(t){return t.prop("checked")}),Backbone.Syphon.KeySplitter=function(t){var e=t.match(/[^\[\]]+/g);return t.indexOf("[]")===t.length-2&&(lastKey=e.pop(),e.push([lastKey])),e},Backbone.Syphon.KeyJoiner=function(t,e){return t+"["+e+"]"},function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(){return e.apply(t,arguments)}):"object"==typeof module&&module.exports?module.exports=e.call(t,require("jquery")):e.call(t,t.jQuery)}("object"==typeof global?global:this,function(t){function e(t){return t.match(/\D+$/)}function n(e,n,i,r){if("d"!=i&&u(e)){var o=v.exec(n),s="auto"===e.css(i)?0:e.css(i),a="string"==typeof s?c(s):s,h=("string"==typeof n?c(n):n,r===!0?0:a),p=e.is(":hidden"),d=e.translation();if("left"==i&&(h=parseInt(a,10)+d.x),"right"==i&&(h=parseInt(a,10)+d.x),"top"==i&&(h=parseInt(a,10)+d.y),"bottom"==i&&(h=parseInt(a,10)+d.y),o||"show"!=n?o||"hide"!=n||(h=0):(h=1,p&&(elem=e[0],elem.style&&(display=elem.style.display,t._data(elem,"olddisplay")||"none"!==display||(display=elem.style.display=""),""===display&&"none"===t.css(elem,"display")&&t._data(elem,"olddisplay",l(elem.tagName)),(""===display||"none"===display)&&(elem.style.display=t._data(elem,"olddisplay")||"")),e.css("opacity",0))),o){var f=parseFloat(o[2]);return o[1]&&(f=("-="===o[1]?-1:1)*f+parseInt(h,10)),o[3]&&"px"!=o[3]&&(f+=o[3]),f}return h}}function i(t,e,n){return n===!0||E===!0&&n!==!1&&O?"translate3d("+t+"px, "+e+"px, 0)":"translate("+t+"px,"+e+"px)"}function r(e,n,i,r,s,l,u,h){var p=e.data(_),d=p&&!a(p)?p:t.extend(!0,{},w),f=s,m=t.inArray(n,g)>-1;if(m){var y=d.meta,v=c(e.css(n))||0,b=n+"_o";f=s-v,y[n]=f,y[b]="auto"==e.css(n)?0+f:v+f||0,d.meta=y,u&&0===f&&(f=0-y[b],y[n]=f,y[b]=0)}return e.data(_,o(e,d,n,i,r,f,l,u,h))}function o(t,e,n,r,o,s,a,l,c){var u=!1,h=a===!0&&l===!0;e=e||{},e.original||(e.original={},u=!0),e.properties=e.properties||{},e.secondary=e.secondary||{};for(var p=e.meta,d=e.original,f=e.properties,g=e.secondary,y=m.length-1;y>=0;y--){var v=m[y]+"transition-property",b=m[y]+"transition-duration",w=m[y]+"transition-timing-function";n=h?m[y]+"transform":n,u&&(d[v]=t.css(v)||"",d[b]=t.css(b)||"",d[w]=t.css(w)||""),g[n]=h?i(p.left,p.top,c):s,f[v]=(f[v]?f[v]+",":"")+n,f[b]=(f[b]?f[b]+",":"")+r+"ms",f[w]=(f[w]?f[w]+",":"")+o}return e}function s(t){for(var e in t)if(!("width"!=e&&"height"!=e||"show"!=t[e]&&"hide"!=t[e]&&"toggle"!=t[e]))return!0;return!1}function a(t){for(var e in t)return!1;return!0}function l(t){t=t.toUpperCase();var e={LI:"list-item",TR:"table-row",TD:"table-cell",TH:"table-cell",CAPTION:"table-caption",COL:"table-column",COLGROUP:"table-column-group",TFOOT:"table-footer-group",THEAD:"table-header-group",TBODY:"table-row-group"};return"string"==typeof e[t]?e[t]:"block"}function c(t){return parseFloat(t.replace(e(t),""))}function u(t){var e=!0;return t.each(function(t,n){return e=e&&n.ownerDocument}),e}function h(e,n,i){if(!u(i))return!1;var r=t.inArray(e,f)>-1;return"width"!=e&&"height"!=e&&"opacity"!=e||parseFloat(n)!==parseFloat(i.css(e))||(r=!1),r}var p=t.fn.animate,d=t.fn.stop,f=["top","right","bottom","left","opacity","height","width"],g=["top","right","bottom","left"],m=["-webkit-","-moz-","-o-",""],y=["avoidTransforms","useTranslate3d","leaveTransforms"],v=/^([+-]=)?([\d+-.]+)(.*)$/,b=/([A-Z])/g,w={secondary:{},meta:{top:0,right:0,bottom:0,left:0}},x="px",_="jQe",k="cubic-bezier(",T=")",S=null,C=!1,P=document.body||document.documentElement,D=P.style,M="webkitTransitionEnd oTransitionEnd transitionend",A=void 0!==D.WebkitTransition||void 0!==D.MozTransition||void 0!==D.OTransition||void 0!==D.transition,O="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,E=O;t.expr&&t.expr.filters&&(S=t.expr.filters.animated,t.expr.filters.animated=function(e){return t(e).data("events")&&t(e).data("events")[M]?!0:S.call(this,e)}),t.extend({toggle3DByDefault:function(){return E=!E},toggleDisabledByDefault:function(){return C=!C},setDisabledByDefault:function(t){return C=t}}),t.fn.translation=function(){if(!this[0])return null;var t=this[0],e=window.getComputedStyle(t,null),n={x:0,y:0};if(e)for(var i=m.length-1;i>=0;i--){var r=e.getPropertyValue(m[i]+"transform");if(r&&/matrix/i.test(r)){var o=r.replace(/^matrix\(/i,"").split(/, |\)$/g);n={x:parseInt(o[4],10),y:parseInt(o[5],10)};break}}return n},t.fn.animate=function(e,i,o,l){e=e||{};var c=!("undefined"!=typeof e.bottom||"undefined"!=typeof e.right),u=t.speed(i,o,l),d=0,f=function(){d--,0===d&&"function"==typeof u.complete&&u.complete.apply(this,arguments)},v="undefined"!=typeof e.avoidCSSTransitions?e.avoidCSSTransitions:C;return v===!0||!A||a(e)||s(e)||u.duration<=0||u.step?p.apply(this,arguments):this[u.queue===!0?"queue":"each"](function(){var i=t(this),o=t.extend({},u),s=function(n){var r=i.data(_)||{original:{}},o={};if(2==n.eventPhase){if(e.leaveTransforms!==!0){for(var s=m.length-1;s>=0;s--)o[m[s]+"transform"]="";if(c&&"undefined"!=typeof r.meta)for(var a,l=0;a=g[l];++l){var u=r.meta[a+"_o"];"undefined"!=typeof u&&(o[a]=u+x,t(this).css(a,o[a]))}}i.unbind(M).css(r.original).css(o).data(_,null),"hide"===e.opacity&&(elem=i[0],elem.style&&(display=t.css(elem,"display"),"none"===display||t._data(elem,"olddisplay")||t._data(elem,"olddisplay",display),elem.style.display="none"),i.css("opacity","")),f.call(this)}},l={bounce:k+"0.0, 0.35, .5, 1.3"+T,linear:"linear",swing:"ease-in-out",easeInQuad:k+"0.550, 0.085, 0.680, 0.530"+T,easeInCubic:k+"0.550, 0.055, 0.675, 0.190"+T,easeInQuart:k+"0.895, 0.030, 0.685, 0.220"+T,easeInQuint:k+"0.755, 0.050, 0.855, 0.060"+T,easeInSine:k+"0.470, 0.000, 0.745, 0.715"+T,easeInExpo:k+"0.950, 0.050, 0.795, 0.035"+T,easeInCirc:k+"0.600, 0.040, 0.980, 0.335"+T,easeInBack:k+"0.600, -0.280, 0.735, 0.045"+T,easeOutQuad:k+"0.250, 0.460, 0.450, 0.940"+T,easeOutCubic:k+"0.215, 0.610, 0.355, 1.000"+T,easeOutQuart:k+"0.165, 0.840, 0.440, 1.000"+T,easeOutQuint:k+"0.230, 1.000, 0.320, 1.000"+T,easeOutSine:k+"0.390, 0.575, 0.565, 1.000"+T,easeOutExpo:k+"0.190, 1.000, 0.220, 1.000"+T,easeOutCirc:k+"0.075, 0.820, 0.165, 1.000"+T,easeOutBack:k+"0.175, 0.885, 0.320, 1.275"+T,easeInOutQuad:k+"0.455, 0.030, 0.515, 0.955"+T,easeInOutCubic:k+"0.645, 0.045, 0.355, 1.000"+T,easeInOutQuart:k+"0.770, 0.000, 0.175, 1.000"+T,easeInOutQuint:k+"0.860, 0.000, 0.070, 1.000"+T,easeInOutSine:k+"0.445, 0.050, 0.550, 0.950"+T,easeInOutExpo:k+"1.000, 0.000, 0.000, 1.000"+T,easeInOutCirc:k+"0.785, 0.135, 0.150, 0.860"+T,easeInOutBack:k+"0.680, -0.550, 0.265, 1.550"+T},v={},b=l[o.easing||"swing"]?l[o.easing||"swing"]:o.easing||"swing";for(var w in e)if(-1===t.inArray(w,y)){var S=t.inArray(w,g)>-1,C=n(i,e[w],w,S&&e.avoidTransforms!==!0);h(w,C,i)?r(i,w,o.duration,b,C,S&&e.avoidTransforms!==!0,c,e.useTranslate3d):v[w]=e[w]}i.unbind(M);var P=i.data(_);if(!P||a(P)||a(P.secondary))o.queue=!1;else{d++,i.css(P.properties);var D=P.secondary;setTimeout(function(){i.bind(M,s).css(D)})}return a(v)||(d++,p.apply(i,[v,{duration:o.duration,easing:t.easing[o.easing]?o.easing:t.easing.swing?"swing":"linear",complete:f,queue:o.queue}])),!0})},t.fn.animate.defaults={},t.fn.stop=function(e,n,i){return A?(e&&this.queue([]),this.each(function(){var r=t(this),o=r.data(_);if(o&&!a(o)){var s,l={};if(n){if(l=o.secondary,!i&&void 0!==typeof o.meta.left_o||void 0!==typeof o.meta.top_o)for(l.left=void 0!==typeof o.meta.left_o?o.meta.left_o:"auto",l.top=void 0!==typeof o.meta.top_o?o.meta.top_o:"auto",s=m.length-1;s>=0;s--)l[m[s]+"transform"]=""}else if(!a(o.secondary)){var c=window.getComputedStyle(r[0],null);if(c)for(var u in o.secondary)if(o.secondary.hasOwnProperty(u)&&(u=u.replace(b,"-$1").toLowerCase(),l[u]=c.getPropertyValue(u),!i&&/matrix/i.test(l[u]))){var h=l[u].replace(/^matrix\(/i,"").split(/, |\)$/g);for(l.left=parseFloat(h[4])+parseFloat(r.css("left"))+x||"auto",l.top=parseFloat(h[5])+parseFloat(r.css("top"))+x||"auto",s=m.length-1;s>=0;s--)l[m[s]+"transform"]=""}}r.unbind(M),r.css(o.original).css(l).data(_,null)}else d.apply(r,[e,n])}),this):d.apply(this,[e,n])}}),function(){var t=Date,e=Date.CultureStrings?Date.CultureStrings.lang:null,n={},i={getFromKey:function(t,e){var n;return n=Date.CultureStrings&&Date.CultureStrings[e]&&Date.CultureStrings[e][t]?Date.CultureStrings[e][t]:i.buildFromDefault(t),"/"===t.charAt(0)&&(n=i.buildFromRegex(t,e)),n},getFromObjectValues:function(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=i.getFromKey(t[n],e));return r},getFromObjectKeys:function(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[i.getFromKey(n,e)]=t[n]);return r},getFromArray:function(t,e){for(var n=[],r=0;r<t.length;r++)r in t&&(n[r]=i.getFromKey(t[r],e));return n},buildFromDefault:function(t){var e,n,i;switch(t){case"name":e="en-US";break;case"englishName":e="English (United States)";break;case"nativeName":e="English (United States)";break;case"twoDigitYearMax":e=2049;break;case"firstDayOfWeek":e=0;break;default:e=t,i=t.split("_"),n=i.length,n>1&&"/"!==t.charAt(0)&&(t=i[n-1].toLowerCase(),"initial"===t||"abbr"===t)&&(e=i[0])}return e},buildFromRegex:function(t,e){return Date.CultureStrings&&Date.CultureStrings[e]&&Date.CultureStrings[e][t]?new RegExp(Date.CultureStrings[e][t],"i"):new RegExp(t.replace(RegExp("/","g"),""),"i")}},r=function(t,r){var o=r?r:e;return n[t]=t,"object"==typeof t?t instanceof Array?i.getFromArray(t,o):i.getFromObjectKeys(t,o):i.getFromKey(t,o)},o=function(t){t=Date.Config.i18n+t+".js";var e=document.getElementsByTagName("head")[0]||document.documentElement,n=document.createElement("script");n.src=t;var i={done:function(){}};return n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i.done(),e.removeChild(n))},setTimeout(function(){e.insertBefore(n,e.firstChild)},0),{done:function(t){i.done=function(){t&&setTimeout(t,0)}}}},s={buildFromMethodHash:function(t){for(var e in t)t.hasOwnProperty(e)&&(t[e]=s[t[e]]());return t},timeZoneDST:function(){return r({CHADT:"+1345",NZDT:"+1300",AEDT:"+1100",ACDT:"+1030",AZST:"+0500",IRDT:"+0430",EEST:"+0300",CEST:"+0200",BST:"+0100",PMDT:"-0200",ADT:"-0300",NDT:"-0230",EDT:"-0400",CDT:"-0500",MDT:"-0600",PDT:"-0700",AKDT:"-0800",HADT:"-0900"})},timeZoneStandard:function(){return r({LINT:"+1400",TOT:"+1300",CHAST:"+1245",NZST:"+1200",NFT:"+1130",SBT:"+1100",AEST:"+1000",ACST:"+0930",JST:"+0900",CWST:"+0845",CT:"+0800",ICT:"+0700",MMT:"+0630",BST:"+0600",NPT:"+0545",IST:"+0530",PKT:"+0500",AFT:"+0430",MSK:"+0400",IRST:"+0330",FET:"+0300",EET:"+0200",CET:"+0100",GMT:"+0000",UTC:"+0000",CVT:"-0100",GST:"-0200",BRT:"-0300",NST:"-0330",AST:"-0400",EST:"-0500",CST:"-0600",MST:"-0700",PST:"-0800",AKST:"-0900",MIT:"-0930",HST:"-1000",SST:"-1100",BIT:"-1200"})},timeZones:function(t){var e;t.timezones=[];for(e in t.abbreviatedTimeZoneStandard)t.abbreviatedTimeZoneStandard.hasOwnProperty(e)&&t.timezones.push({name:e,offset:t.abbreviatedTimeZoneStandard[e]});for(e in t.abbreviatedTimeZoneDST)t.abbreviatedTimeZoneDST.hasOwnProperty(e)&&t.timezones.push({name:e,offset:t.abbreviatedTimeZoneDST[e],dst:!0});return t.timezones},days:function(){return r("Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "))},dayAbbr:function(){return r("Sun Mon Tue Wed Thu Fri Sat".split(" "))},dayShortNames:function(){return r("Su Mo Tu We Th Fr Sa".split(" "))},dayFirstLetters:function(){return r("S_Sun_Initial M_Mon_Initial T_Tues_Initial W_Wed_Initial T_Thu_Initial F_Fri_Initial S_Sat_Initial".split(" "))},months:function(){return r("January February March April May June July August September October November December".split(" "))},monthAbbr:function(){return r("Jan_Abbr Feb_Abbr Mar_Abbr Apr_Abbr May_Abbr Jun_Abbr Jul_Abbr Aug_Abbr Sep_Abbr Oct_Abbr Nov_Abbr Dec_Abbr".split(" "))},formatPatterns:function(){return i.getFromObjectValues({shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},Date.i18n.currentLanguage())},regex:function(){return i.getFromObjectValues({inTheMorning:"/( in the )(morn(ing)?)\\b/",thisMorning:"/(this )(morn(ing)?)\\b/",amThisMorning:"/(\b\\d(am)? )(this )(morn(ing)?)/",inTheEvening:"/( in the )(even(ing)?)\\b/",thisEvening:"/(this )(even(ing)?)\\b/",pmThisEvening:"/(\b\\d(pm)? )(this )(even(ing)?)/",jan:"/jan(uary)?/",feb:"/feb(ruary)?/",mar:"/mar(ch)?/",apr:"/apr(il)?/",may:"/may/",jun:"/jun(e)?/",jul:"/jul(y)?/",aug:"/aug(ust)?/",sep:"/sep(t(ember)?)?/",oct:"/oct(ober)?/",nov:"/nov(ember)?/",dec:"/dec(ember)?/",sun:"/^su(n(day)?)?/",mon:"/^mo(n(day)?)?/",tue:"/^tu(e(s(day)?)?)?/",wed:"/^we(d(nesday)?)?/",thu:"/^th(u(r(s(day)?)?)?)?/",fri:"/fr(i(day)?)?/",sat:"/^sa(t(urday)?)?/",future:"/^next/",past:"/^last|past|prev(ious)?/",add:"/^(\\+|aft(er)?|from|hence)/",subtract:"/^(\\-|bef(ore)?|ago)/",yesterday:"/^yes(terday)?/",today:"/^t(od(ay)?)?/",tomorrow:"/^tom(orrow)?/",now:"/^n(ow)?/",millisecond:"/^ms|milli(second)?s?/",second:"/^sec(ond)?s?/",minute:"/^mn|min(ute)?s?/",hour:"/^h(our)?s?/",week:"/^w(eek)?s?/",month:"/^m(onth)?s?/",day:"/^d(ay)?s?/",year:"/^y(ear)?s?/",shortMeridian:"/^(a|p)/",longMeridian:"/^(a\\.?m?\\.?|p\\.?m?\\.?)/",timezone:"/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\\s*(\\+|\\-)\\s*\\d\\d\\d\\d?)|gmt|utc)/",ordinalSuffix:"/^\\s*(st|nd|rd|th)/",timeContext:"/^\\s*(\\:|a(?!u|p)|p)/"},Date.i18n.currentLanguage())}},a=function(){var t,e=i.getFromObjectValues({name:"name",englishName:"englishName",nativeName:"nativeName",amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:"firstDayOfWeek",twoDigitYearMax:"twoDigitYearMax",dateElementOrder:"mdy"},Date.i18n.currentLanguage()),n=s.buildFromMethodHash({dayNames:"days",abbreviatedDayNames:"dayAbbr",shortestDayNames:"dayShortNames",firstLetterDayNames:"dayFirstLetters",monthNames:"months",abbreviatedMonthNames:"monthAbbr",formatPatterns:"formatPatterns",regexPatterns:"regex",abbreviatedTimeZoneDST:"timeZoneDST",abbreviatedTimeZoneStandard:"timeZoneStandard"});for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return s.timeZones(e),e};t.i18n={__:function(t,e){return r(t,e)},currentLanguage:function(){return e||"en-US"},setLanguage:function(n,i,r){var s=!1;if(i||"en-US"===n||Date.CultureStrings&&Date.CultureStrings[n])e=n,Date.CultureStrings=Date.CultureStrings||{},Date.CultureStrings.lang=n,Date.CultureInfo=new a;else if(!Date.CultureStrings||!Date.CultureStrings[n])if("undefined"!=typeof exports&&this.exports!==exports)try{require("../i18n/"+n+".js"),e=n,Date.CultureStrings.lang=n,Date.CultureInfo=new a}catch(l){throw Error("The DateJS IETF language tag '"+n+"' could not be loaded by Node. It likely does not exist.")}else{if(!Date.Config||!Date.Config.i18n)return Date.console.error("The DateJS IETF language tag '"+n+"' is not available and has not been loaded."),!1;s=!0,o(n).done(function(){e=n,Date.CultureStrings=Date.CultureStrings||{},Date.CultureStrings.lang=n,Date.CultureInfo=new a,t.Parsing.Normalizer.buildReplaceData(),t.Grammar&&t.Grammar.buildGrammarFormats(),r&&setTimeout(r,0)})}t.Parsing.Normalizer.buildReplaceData(),t.Grammar&&t.Grammar.buildGrammarFormats(),!s&&r&&setTimeout(r,0)},getLoggedKeys:function(){return n},updateCultureInfo:function(){Date.CultureInfo=new a}},t.i18n.updateCultureInfo()}(),function(){var t=Date,e=t.prototype,n=function(t,e){return e||(e=2),("000"+t).slice(-1*e)};t.console="undefined"!=typeof window&&"undefined"!=typeof window.console&&"undefined"!=typeof window.console.log?console:{log:function(){},error:function(){}},t.Config=t.Config||{},t.initOverloads=function(){t.now?t._now||(t._now=t.now):t._now=function(){return(new Date).getTime()},t.now=function(e){return e?t.present():t._now()},e.toISOString||(e.toISOString=function(){return this.getUTCFullYear()+"-"+n(this.getUTCMonth()+1)+"-"+n(this.getUTCDate())+"T"+n(this.getUTCHours())+":"+n(this.getUTCMinutes())+":"+n(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}),void 0===e._toString&&(e._toString=e.toString)},t.initOverloads(),t.today=function(){return(new Date).clearTime()},t.present=function(){return new Date},t.compare=function(t,e){if(isNaN(t)||isNaN(e))throw Error(t+" - "+e);if(t instanceof Date&&e instanceof Date)return e>t?-1:t>e?1:0;throw new TypeError(t+" - "+e)},t.equals=function(t,e){return 0===t.compareTo(e)},t.getDayName=function(t){return Date.CultureInfo.dayNames[t]},t.getDayNumberFromName=function(t){var e=Date.CultureInfo.dayNames,n=Date.CultureInfo.abbreviatedDayNames,i=Date.CultureInfo.shortestDayNames;t=t.toLowerCase();for(var r=0;r<e.length;r++)if(e[r].toLowerCase()===t||n[r].toLowerCase()===t||i[r].toLowerCase()===t)return r;return-1},t.getMonthNumberFromName=function(t){var e=Date.CultureInfo.monthNames,n=Date.CultureInfo.abbreviatedMonthNames;t=t.toLowerCase();for(var i=0;i<e.length;i++)if(e[i].toLowerCase()===t||n[i].toLowerCase()===t)return i;return-1},t.getMonthName=function(t){return Date.CultureInfo.monthNames[t]},t.isLeapYear=function(t){return 0===t%4&&0!==t%100||0===t%400},t.getDaysInMonth=function(e,n){return!n&&t.validateMonth(e)&&(n=e,e=Date.today().getFullYear()),[31,t.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][n]},e.getDaysInMonth=function(){return t.getDaysInMonth(this.getFullYear(),this.getMonth())},t.getTimezoneAbbreviation=function(t,e){var n,i=e?Date.CultureInfo.abbreviatedTimeZoneDST:Date.CultureInfo.abbreviatedTimeZoneStandard;for(n in i)if(i.hasOwnProperty(n)&&i[n]===t)return n;return null},t.getTimezoneOffset=function(t,e){var n,i=[],r=Date.CultureInfo.timezones;for(t||(t=(new Date).getTimezone()),n=0;n<r.length;n++)r[n].name===t.toUpperCase()&&i.push(n);if(!r[i[0]])return null;if(1===i.length||!e)return r[i[0]].offset;for(n=0;n<i.length;n++)if(r[i[n]].dst)return r[i[n]].offset},t.getQuarter=function(t){return t=t||new Date,[1,2,3,4][Math.floor(t.getMonth()/3)]},t.getDaysLeftInQuarter=function(t){t=t||new Date;var e=new Date(t);return e.setMonth(e.getMonth()+3-e.getMonth()%3,0),Math.floor((e-t)/864e5)};var i=function(t,e,n){if("undefined"==typeof t)return!1;if("number"!=typeof t)throw new TypeError(t+" is not a Number.");return e>t||t>n?!1:!0};t.validateMillisecond=function(t){return i(t,0,999,"millisecond")},t.validateSecond=function(t){return i(t,0,59,"second")},t.validateMinute=function(t){return i(t,0,59,"minute")},t.validateHour=function(t){return i(t,0,23,"hour")},t.validateDay=function(e,n,r){return void 0===n||null===n||void 0===r||null===r?!1:i(e,1,t.getDaysInMonth(n,r),"day")},t.validateWeek=function(t){return i(t,0,53,"week")},t.validateMonth=function(t){return i(t,0,11,"month")},t.validateYear=function(t){return i(t,-271822,275760,"year")},t.validateTimezone=function(t){return 1==={ACDT:1,ACST:1,ACT:1,ADT:1,AEDT:1,AEST:1,AFT:1,AKDT:1,AKST:1,AMST:1,AMT:1,ART:1,AST:1,AWDT:1,AWST:1,AZOST:1,AZT:1,BDT:1,BIOT:1,BIT:1,BOT:1,BRT:1,BST:1,BTT:1,CAT:1,CCT:1,CDT:1,CEDT:1,CEST:1,CET:1,CHADT:1,CHAST:1,CHOT:1,ChST:1,CHUT:1,CIST:1,CIT:1,CKT:1,CLST:1,CLT:1,COST:1,COT:1,CST:1,CT:1,CVT:1,CWST:1,CXT:1,DAVT:1,DDUT:1,DFT:1,EASST:1,EAST:1,EAT:1,ECT:1,EDT:1,EEDT:1,EEST:1,EET:1,EGST:1,EGT:1,EIT:1,EST:1,FET:1,FJT:1,FKST:1,FKT:1,FNT:1,GALT:1,GAMT:1,GET:1,GFT:1,GILT:1,GIT:1,GMT:1,GST:1,GYT:1,HADT:1,HAEC:1,HAST:1,HKT:1,HMT:1,HOVT:1,HST:1,ICT:1,IDT:1,IOT:1,IRDT:1,IRKT:1,IRST:1,IST:1,JST:1,KGT:1,KOST:1,KRAT:1,KST:1,LHST:1,LINT:1,MAGT:1,MART:1,MAWT:1,MDT:1,MET:1,MEST:1,MHT:1,MIST:1,MIT:1,MMT:1,MSK:1,MST:1,MUT:1,MVT:1,MYT:1,NCT:1,NDT:1,NFT:1,NPT:1,NST:1,NT:1,NUT:1,NZDT:1,NZST:1,OMST:1,ORAT:1,PDT:1,PET:1,PETT:1,PGT:1,PHOT:1,PHT:1,PKT:1,PMDT:1,PMST:1,PONT:1,PST:1,PYST:1,PYT:1,RET:1,ROTT:1,SAKT:1,SAMT:1,SAST:1,SBT:1,SCT:1,SGT:1,SLST:1,SRT:1,SST:1,SYOT:1,TAHT:1,THA:1,TFT:1,TJT:1,TKT:1,TLT:1,TMT:1,TOT:1,TVT:1,UCT:1,ULAT:1,UTC:1,UYST:1,UYT:1,UZT:1,VET:1,VLAT:1,VOLT:1,VOST:1,VUT:1,WAKT:1,WAST:1,WAT:1,WEDT:1,WEST:1,WET:1,WST:1,YAKT:1,YEKT:1,Z:1}[t]},t.validateTimezoneOffset=function(t){return t>-841&&721>t}}(),function(){var t=Date,e=t.prototype,n=function(t,e){return e||(e=2),("000"+t).slice(-1*e)},i=function(e){var n,i,r={},o=this;i=function(n,i,r){if("day"===n){n=void 0!==e.month?e.month:o.getMonth();var s=void 0!==e.year?e.year:o.getFullYear();return t[i](r,s,n)}return t[i](r)};for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s="validate"+n.charAt(0).toUpperCase()+n.slice(1);t[s]&&null!==e[n]&&i(n,s,e[n])&&(r[n]=e[n])}return r};e.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},e.setTimeToNow=function(){var t=new Date;return this.setHours(t.getHours()),this.setMinutes(t.getMinutes()),this.setSeconds(t.getSeconds()),this.setMilliseconds(t.getMilliseconds()),this},e.clone=function(){return new Date(this.getTime())},e.compareTo=function(t){return Date.compare(this,t)},e.equals=function(t){return Date.equals(this,void 0!==t?t:new Date)},e.between=function(t,e){return this.getTime()>=t.getTime()&&this.getTime()<=e.getTime()},e.isAfter=function(t){return 1===this.compareTo(t||new Date)},e.isBefore=function(t){return-1===this.compareTo(t||new Date)},e.isToday=e.isSameDay=function(t){return this.clone().clearTime().equals((t||new Date).clone().clearTime())},e.addMilliseconds=function(t){return t?(this.setTime(this.getTime()+1*t),this):this},e.addSeconds=function(t){return t?this.addMilliseconds(1e3*t):this},e.addMinutes=function(t){return t?this.addMilliseconds(6e4*t):this},e.addHours=function(t){return t?this.addMilliseconds(36e5*t):this},e.addDays=function(t){return t?(this.setDate(this.getDate()+1*t),this):this},e.addWeekdays=function(t){if(!t)return this;var e=this.getDay(),n=Math.ceil(Math.abs(t)/7);if((0===e||6===e)&&t>0&&(this.next().monday(),this.addDays(-1),e=this.getDay()),0>t){for(;0>t;)this.addDays(-1),e=this.getDay(),0!==e&&6!==e&&t++;return this}return(t>5||t>=6-e)&&(t+=2*n),this.addDays(t)},e.addWeeks=function(t){return t?this.addDays(7*t):this},e.addMonths=function(e){if(!e)return this;var n=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+1*e),this.setDate(Math.min(n,t.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},e.addQuarters=function(t){return t?this.addMonths(3*t):this},e.addYears=function(t){return t?this.addMonths(12*t):this},e.add=function(t){return"number"==typeof t?(this._orient=t,this):(t.day&&0!==t.day-this.getDate()&&this.setDate(t.day),t.milliseconds&&this.addMilliseconds(t.milliseconds),t.seconds&&this.addSeconds(t.seconds),t.minutes&&this.addMinutes(t.minutes),t.hours&&this.addHours(t.hours),t.weeks&&this.addWeeks(t.weeks),t.months&&this.addMonths(t.months),t.years&&this.addYears(t.years),t.days&&this.addDays(t.days),this)},e.getWeek=function(t){var e=new Date(this.valueOf());return t?(e.addMinutes(e.getTimezoneOffset()),t=e.clone()):t=this,t=(t.getDay()+6)%7,e.setDate(e.getDate()-t+3),t=e.valueOf(),e.setMonth(0,1),4!==e.getDay()&&e.setMonth(0,1+(4-e.getDay()+7)%7),1+Math.ceil((t-e)/6048e5)},e.getISOWeek=function(){return n(this.getWeek(!0))},e.setWeek=function(t){return 0===t-this.getWeek()?1!==this.getDay()?this.moveToDayOfWeek(1,1<this.getDay()?-1:1):this:this.moveToDayOfWeek(1,1<this.getDay()?-1:1).addWeeks(t-this.getWeek())},e.setQuarter=function(t){return t=Math.abs(3*(t-1)+1),this.setMonth(t,1)},e.getQuarter=function(){return Date.getQuarter(this)},e.getDaysLeftInQuarter=function(){return Date.getDaysLeftInQuarter(this)},e.moveToNthOccurrence=function(t,e){if("Weekday"===t){if(e>0)this.moveToFirstDayOfMonth(),this.is().weekday()&&--e;else{if(!(0>e))return this;this.moveToLastDayOfMonth(),this.is().weekday()&&(e+=1)}return this.addWeekdays(e)}var n=0;if(e>0)n=e-1;else if(-1===e)return this.moveToLastDayOfMonth(),this.getDay()!==t&&this.moveToDayOfWeek(t,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(t,1).addWeeks(n)};var r=function(t,e,n){return function(i,r){var o=(i-this[t]()+n*(r||1))%n;return this[e](0===o?o+n*(r||1):o)}};e.moveToDayOfWeek=r("getDay","addDays",7),e.moveToMonth=r("getMonth","addMonths",12),e.getOrdinate=function(){var t=this.getDate();return o(t)},e.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},e.getTimezone=function(){return t.getTimezoneAbbreviation(this.getUTCOffset(),this.isDaylightSavingTime())},e.setTimezoneOffset=function(t){var e=this.getTimezoneOffset();return(t=-6*Number(t)/10)||0===t?this.addMinutes(t-e):this},e.setTimezone=function(e){return this.setTimezoneOffset(t.getTimezoneOffset(e))},e.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},e.isDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==this.getTimezoneOffset()},e.getUTCOffset=function(t){return t=-10*(t||this.getTimezoneOffset())/6,0>t?(t=(t-1e4).toString(),t.charAt(0)+t.substr(2)):(t=(t+1e4).toString(),"+"+t.substr(1))},e.getElapsed=function(t){return(t||new Date)-this},e.set=function(t){t=i.call(this,t);for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n,r,o=e.charAt(0).toUpperCase()+e.slice(1);"week"!==e&&"month"!==e&&"timezone"!==e&&"timezoneOffset"!==e&&(o+="s"),n="add"+o,r="get"+o,"month"===e?n+="s":"year"===e&&(r="getFullYear"),"day"!==e&&"timezone"!==e&&"timezoneOffset"!==e&&"week"!==e&&"hour"!==e?this[n](t[e]-this[r]()):("timezone"===e||"timezoneOffset"===e||"week"===e||"hour"===e)&&this["set"+o](t[e])}return t.day&&this.addDays(t.day-this.getDate()),this},e.moveToFirstDayOfMonth=function(){return this.set({day:1})},e.moveToLastDayOfMonth=function(){return this.set({day:t.getDaysInMonth(this.getFullYear(),this.getMonth())})};var o=function(t){switch(1*t){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},s=function(t){var e=Date.CultureInfo.formatPatterns;switch(t){case"d":return this.toString(e.shortDate);case"D":return this.toString(e.longDate);case"F":return this.toString(e.fullDateTime);case"m":return this.toString(e.monthDay);case"r":case"R":return t=this.clone().addMinutes(this.getTimezoneOffset()),t.toString(e.rfc1123)+" GMT";case"s":return this.toString(e.sortableDateTime);case"t":return this.toString(e.shortTime);case"T":return this.toString(e.longTime);case"u":return t=this.clone().addMinutes(this.getTimezoneOffset()),t.toString(e.universalSortableDateTime);case"y":return this.toString(e.yearMonth);default:return!1}},a=function(e){return function(i){if("\\"===i.charAt(0))return i.replace("\\","");switch(i){case"hh":return n(13>e.getHours()?0===e.getHours()?12:e.getHours():e.getHours()-12);case"h":return 13>e.getHours()?0===e.getHours()?12:e.getHours():e.getHours()-12;case"HH":return n(e.getHours());case"H":return e.getHours();case"mm":return n(e.getMinutes());case"m":return e.getMinutes();case"ss":return n(e.getSeconds());case"s":return e.getSeconds();case"yyyy":return n(e.getFullYear(),4);case"yy":return n(e.getFullYear());case"y":return e.getFullYear();case"E":case"dddd":return Date.CultureInfo.dayNames[e.getDay()];case"ddd":return Date.CultureInfo.abbreviatedDayNames[e.getDay()];case"dd":return n(e.getDate());case"d":return e.getDate();case"MMMM":return Date.CultureInfo.monthNames[e.getMonth()];case"MMM":return Date.CultureInfo.abbreviatedMonthNames[e.getMonth()];case"MM":return n(e.getMonth()+1);case"M":return e.getMonth()+1;case"t":return 12>e.getHours()?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return 12>e.getHours()?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"S":return o(e.getDate());case"W":return e.getWeek();case"WW":return e.getISOWeek();case"Q":return"Q"+e.getQuarter();case"q":return String(e.getQuarter());case"z":return e.getTimezone();case"Z":case"X":return Date.getTimezoneOffset(e.getTimezone());case"ZZ":return-60*e.getTimezoneOffset();case"u":return e.getDay();case"L":return t.isLeapYear(e.getFullYear())?1:0;case"B":return"@"+(e.getUTCSeconds()+60*e.getUTCMinutes()+3600*(e.getUTCHours()+1))/86.4;default:return i}}};e.toString=function(t,e){if(!e&&t&&1===t.length&&(output=s.call(this,t)))return output;var n=a(this);return t?t.replace(/((\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S|q|Q|WW?W?W?)(?![^\[]*\]))/g,n).replace(/\[|\]/g,""):this._toString()}}(),function(){var t=Date,e=t.prototype,n=Number.prototype;e._orient=1,e._nth=null,e._is=!1,e._same=!1,e._isSecond=!1,n._dateElement="days",e.next=function(){return this._move=!0,this._orient=1,this},t.next=function(){return t.today().next()},e.last=e.prev=e.previous=function(){return this._move=!0,this._orient=-1,this},t.last=t.prev=t.previous=function(){return t.today().last()},e.is=function(){return this._is=!0,this},e.same=function(){return this._same=!0,this._isSecond=!1,this},e.today=function(){return this.same().day()},e.weekday=function(){return this._nth?l("Weekday").call(this):this._move?this.addWeekdays(this._orient):this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},e.weekend=function(){return this._is?(this._is=!1,this.is().sat()||this.is().sun()):!1},e.at=function(e){return"string"==typeof e?t.parse(this.toString("d")+" "+e):this.set(e)},n.fromNow=n.after=function(t){var e={};return e[this._dateElement]=this,(t?t.clone():new Date).add(e)},n.ago=n.before=function(t){var e={};return e["s"!==this._dateElement[this._dateElement.length-1]?this._dateElement+"s":this._dateElement]=-1*this,(t?t.clone():new Date).add(e)};var i="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),r="january february march april may june july august september october november december".split(/\s/),o="Millisecond Second Minute Hour Day Week Month Year Quarter Weekday".split(/\s/),s="Milliseconds Seconds Minutes Hours Date Week Month FullYear Quarter".split(/\s/),a="final first second third fourth fifth".split(/\s/);e.toObject=function(){for(var t={},e=0;e<o.length;e++)this["get"+s[e]]&&(t[o[e].toLowerCase()]=this["get"+s[e]]());return t},t.fromObject=function(t){return t.week=null,Date.today().set(t)};var l=function(e){return function(){if(this._is)return this._is=!1,this.getDay()===e;if(this._move&&(this._move=null),null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var n=this._nth;this._nth=null;var i=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(e,n),this>i)throw new RangeError(t.getDayName(e)+" does not occur "+n+" times in the month of "+t.getMonthName(i.getMonth())+" "+i.getFullYear()+".");return this}return this.moveToDayOfWeek(e,this._orient)}},c=function(n,i,r){for(var o=0;o<n.length;o++)t[n[o].toUpperCase()]=t[n[o].toUpperCase().substring(0,3)]=o,t[n[o]]=t[n[o].substring(0,3)]=i(o),e[n[o]]=e[n[o].substring(0,3)]=r(o)};c(i,function(e){return function(){var n=t.today(),i=e-n.getDay();return 0===e&&1===Date.CultureInfo.firstDayOfWeek&&0!==n.getDay()&&(i+=7),n.addDays(i)}},l),c(r,function(e){return function(){return t.today().set({month:e,day:1})}},function(t){return function(){return this._is?(this._is=!1,this.getMonth()===t):this.moveToMonth(t,this._orient)}});for(var r=function(t){return function(e){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;var n=this.toObject();e=(e||new Date).toObject();for(var i="",r=t.toLowerCase(),r="s"===r[r.length-1]?r.substring(0,r.length-1):r,s=o.length-1;s>-1;s--){if(i=o[s].toLowerCase(),n[i]!==e[i])return!1;if(r===i)break}return!0}return"s"!==t.substring(t.length-1)&&(t+="s"),this._move&&(this._move=null),this["add"+t](this._orient)}},c=function(t){return function(){return this._dateElement=t,this
}},u=0;u<o.length;u++)i=o[u].toLowerCase(),"weekday"!==i&&(e[i]=e[i+"s"]=r(o[u]),n[i]=n[i+"s"]=c(i+"s"));for(e._ss=r("Second"),n=function(t){return function(e){return this._same?this._ss(e):e||0===e?this.moveToNthOccurrence(e,t):(this._nth=t,2!==t||void 0!==e&&null!==e?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},i=0;i<a.length;i++)e[a[i]]=n(0===i?-1:i)}(),function(){Date.Parsing={Exception:function(t){this.message="Parse error at '"+t.substring(0,10)+" ...'"}};var t=Date.Parsing,e=[0,31,59,90,120,151,181,212,243,273,304,334],n=[0,31,60,91,121,152,182,213,244,274,305,335];t.isLeapYear=function(t){return 0===t%4&&0!==t%100||0===t%400};var i={multiReplace:function(t,e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i;"function"!=typeof e[n]&&(i=e[n]instanceof RegExp?e[n]:new RegExp(e[n],"g")),t=t.replace(i,n)}return t},getDayOfYearFromWeek:function(t){var e;return t.weekDay=t.weekDay||0===t.weekDay?t.weekDay:1,e=new Date(t.year,0,4),e=(0===e.getDay()?7:e.getDay())+3,t.dayOfYear=7*t.week+(0===t.weekDay?7:t.weekDay)-e,t},getDayOfYear:function(t,e){t.dayOfYear||(t=i.getDayOfYearFromWeek(t));for(var n=0;n<=e.length;n++){if(t.dayOfYear<e[n]||n===e.length){t.day=t.day?t.day:t.dayOfYear-e[n-1];break}t.month=n}return t},adjustForTimeZone:function(t,e){var n;return"Z"===t.zone.toUpperCase()||0===t.zone_hours&&0===t.zone_minutes?n=-e.getTimezoneOffset():(n=60*t.zone_hours+(t.zone_minutes||0),"+"===t.zone_sign&&(n*=-1),n-=e.getTimezoneOffset()),e.setMinutes(e.getMinutes()+n),e},setDefaults:function(t){return t.year=t.year||Date.today().getFullYear(),t.hours=t.hours||0,t.minutes=t.minutes||0,t.seconds=t.seconds||0,t.milliseconds=t.milliseconds||0,(t.month||!t.week&&!t.dayOfYear)&&(t.month=t.month||0,t.day=t.day||1),t},dataNum:function(t,e,n,i){var r=1*t;return e?i?t?1*e(t):t:t?e(r):t:n?t&&"undefined"!=typeof t?r:t:t?r:t},timeDataProcess:function(t){var e,n={};for(e in t.data)t.data.hasOwnProperty(e)&&(n[e]=t.ignore[e]?t.data[e]:i.dataNum(t.data[e],t.mods[e],t.explict[e],t.postProcess[e]));return t.data.secmins&&(t.data.secmins=60*t.data.secmins.replace(",","."),n.minutes?n.seconds||(n.seconds=t.data.secmins):n.minutes=t.data.secmins,delete t.secmins),n},buildTimeObjectFromData:function(t){return i.timeDataProcess({data:{year:t[1],month:t[5],day:t[7],week:t[8],dayOfYear:t[10],hours:t[15],zone_hours:t[23],zone_minutes:t[24],zone:t[21],zone_sign:t[22],weekDay:t[9],minutes:t[16],seconds:t[19],milliseconds:t[20],secmins:t[18]},mods:{month:function(t){return t-1},weekDay:function(t){return t=Math.abs(t),7===t?0:t},minutes:function(t){return t.replace(":","")},seconds:function(t){return Math.floor(1*t.replace(":","").replace(",","."))},milliseconds:function(t){return 1e3*t.replace(",",".")}},postProcess:{minutes:!0,seconds:!0,milliseconds:!0},explict:{zone_hours:!0,zone_minutes:!0},ignore:{zone:!0,zone_sign:!0,secmins:!0}})},addToHash:function(t,e,n){for(var i=e.length,r=0;i>r;r++)t[e[r]]=n[r];return t},combineRegex:function(t,e){return new RegExp("(("+t.source+")\\s("+e.source+"))")},getDateNthString:function(t,e,n){return t?Date.today().addDays(n).toString("d"):e?Date.today().last()[n]().toString("d"):void 0},buildRegexData:function(t){for(var e=[],n=t.length,i=0;n>i;i++)e.push("[object Array]"===Object.prototype.toString.call(t[i])?this.combineRegex(t[i][0],t[i][1]):t[i]);return e}};t.processTimeObject=function(r){var o;return i.setDefaults(r),o=t.isLeapYear(r.year)?n:e,r.month||!r.week&&!r.dayOfYear?r.dayOfYear=o[r.month]+r.day:i.getDayOfYear(r,o),o=new Date(r.year,r.month,r.day,r.hours,r.minutes,r.seconds,r.milliseconds),r.zone&&i.adjustForTimeZone(r,o),o},t.ISO={regex:/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-4])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?\s?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,parse:function(e){return e=e.match(this.regex),e&&e.length?(e=i.buildTimeObjectFromData(e),e.year&&(e.year||e.month||e.day||e.week||e.dayOfYear)?t.processTimeObject(e):null):null}},t.Numeric={isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},regex:/\b([0-1]?[0-9])([0-3]?[0-9])([0-2]?[0-9]?[0-9][0-9])\b/i,parse:function(e){var n,i={},r=Date.CultureInfo.dateElementOrder.split("");if(!this.isNumeric(e)||"+"===e[0]&&"-"===e[0])return null;if(5>e.length&&0>e.indexOf(".")&&0>e.indexOf("/"))return i.year=e,t.processTimeObject(i);if(e=e.match(this.regex),!e||!e.length)return null;for(n=0;n<r.length;n++)switch(r[n]){case"d":i.day=e[n+1];break;case"m":i.month=e[n+1]-1;break;case"y":i.year=e[n+1]}return t.processTimeObject(i)}},t.Normalizer={regexData:function(){var t=Date.CultureInfo.regexPatterns;return i.buildRegexData([t.tomorrow,t.yesterday,[t.past,t.mon],[t.past,t.tue],[t.past,t.wed],[t.past,t.thu],[t.past,t.fri],[t.past,t.sat],[t.past,t.sun]])},basicReplaceHash:function(){var t=Date.CultureInfo.regexPatterns;return{January:t.jan.source,February:t.feb,March:t.mar,April:t.apr,May:t.may,June:t.jun,July:t.jul,August:t.aug,September:t.sep,October:t.oct,November:t.nov,December:t.dec,"":/\bat\b/gi," ":/\s{2,}/,am:t.inTheMorning,"9am":t.thisMorning,pm:t.inTheEvening,"7pm":t.thisEvening}},keys:function(){return[i.getDateNthString(!0,!1,1),i.getDateNthString(!0,!1,-1),i.getDateNthString(!1,!0,"monday"),i.getDateNthString(!1,!0,"tuesday"),i.getDateNthString(!1,!0,"wednesday"),i.getDateNthString(!1,!0,"thursday"),i.getDateNthString(!1,!0,"friday"),i.getDateNthString(!1,!0,"saturday"),i.getDateNthString(!1,!0,"sunday")]},buildRegexFunctions:function(){var t=Date.CultureInfo.regexPatterns,e=Date.i18n.__,e=new RegExp("(\\b\\d\\d?("+e("AM")+"|"+e("PM")+")? )("+t.tomorrow.source.slice(1)+")","i");this.replaceFuncs=[[new RegExp(t.today.source+"(?!\\s*([+-]))\\b"),function(t){return 1<t.length?Date.today().toString("d"):t}],[e,function(t,e){return Date.today().addDays(1).toString("d")+" "+e}],[t.amThisMorning,function(t,e){return e}],[t.pmThisEvening,function(t,e){return e}]]},buildReplaceData:function(){this.buildRegexFunctions(),this.replaceHash=i.addToHash(this.basicReplaceHash(),this.keys(),this.regexData())},stringReplaceFuncs:function(t){for(var e=0;e<this.replaceFuncs.length;e++)t=t.replace(this.replaceFuncs[e][0],this.replaceFuncs[e][1]);return t},parse:function(e){e=this.stringReplaceFuncs(e),e=i.multiReplace(e,this.replaceHash);try{var n=e.split(/([\s\-\.\,\/\x27]+)/);3===n.length&&t.Numeric.isNumeric(n[0])&&t.Numeric.isNumeric(n[2])&&4<=n[2].length&&"d"===Date.CultureInfo.dateElementOrder[0]&&(e="1/"+n[0]+"/"+n[2])}catch(r){}return e}},t.Normalizer.buildReplaceData()}(),function(){for(var t=Date.Parsing,e=t.Operators={rtoken:function(e){return function(n){var i=n.match(e);if(i)return[i[0],n.substring(i[0].length)];throw new t.Exception(n)}},token:function(){return function(t){return e.rtoken(new RegExp("^\\s*"+t+"\\s*"))(t)}},stoken:function(t){return e.rtoken(new RegExp("^"+t))},until:function(t){return function(e){for(var n=[],i=null;e.length;){try{i=t.call(this,e)}catch(r){n.push(i[0]),e=i[1];continue}break}return[n,e]}},many:function(t){return function(e){for(var n=[],i=null;e.length;){try{i=t.call(this,e)}catch(r){break}n.push(i[0]),e=i[1]}return[n,e]}},optional:function(t){return function(e){var n=null;try{n=t.call(this,e)}catch(i){return[null,e]}return[n[0],n[1]]}},not:function(e){return function(n){try{e.call(this,n)}catch(i){return[null,n]}throw new t.Exception(n)}},ignore:function(t){return t?function(e){var n=null,n=t.call(this,e);return[null,n[1]]}:null},product:function(){for(var t=arguments[0],n=Array.prototype.slice.call(arguments,1),i=[],r=0;r<t.length;r++)i.push(e.each(t[r],n));return i},cache:function(e){var n={},i=0,r=[],o=Date.Config.CACHE_MAX||1e5,s=null;return function(a){if(i===o)for(var l=0;10>l;l++){var c=r.shift();c&&(delete n[c],i--)}try{s=n[a]=n[a]||e.call(this,a)}catch(u){s=n[a]=u}if(i++,r.push(a),s instanceof t.Exception)throw s;return s}},any:function(){var e=arguments;return function(n){for(var i=null,r=0;r<e.length;r++)if(null!=e[r]){try{i=e[r].call(this,n)}catch(o){i=null}if(i)return i}throw new t.Exception(n)}},each:function(){var e=arguments;return function(n){for(var i=[],r=null,o=0;o<e.length;o++)if(null!=e[o]){try{r=e[o].call(this,n)}catch(s){throw new t.Exception(n)}i.push(r[0]),n=r[1]}return[i,n]}},all:function(){var t=t;return t.each(t.optional(arguments))},sequence:function(n,i,r){return i=i||e.rtoken(/^\s*/),r=r||null,1===n.length?n[0]:function(e){for(var o=null,s=null,a=[],l=0;l<n.length;l++){try{o=n[l].call(this,e)}catch(c){break}a.push(o[0]);try{s=i.call(this,o[1])}catch(u){s=null;break}e=s[1]}if(!o)throw new t.Exception(e);if(s)throw new t.Exception(s[1]);if(r)try{o=r.call(this,o[1])}catch(h){throw new t.Exception(o[1])}return[a,o?o[1]:e]}},between:function(t,n,i){i=i||t;var o=e.each(e.ignore(t),n,e.ignore(i));return function(t){return t=o.call(this,t),[[t[0][0],r[0][2]],t[1]]}},list:function(t,n,i){return n=n||e.rtoken(/^\s*/),i=i||null,t instanceof Array?e.each(e.product(t.slice(0,-1),e.ignore(n)),t.slice(-1),e.ignore(i)):e.each(e.many(e.each(t,e.ignore(n))),px,e.ignore(i))},set:function(n,i,r){return i=i||e.rtoken(/^\s*/),r=r||null,function(o){for(var s=null,a=s=null,l=null,c=[[],o],u=!1,h=0;h<n.length;h++){s=a=null,u=1===n.length;try{s=n[h].call(this,o)}catch(p){continue}if(l=[[s[0]],s[1]],0<s[1].length&&!u)try{a=i.call(this,s[1])}catch(d){u=!0}else u=!0;if(u||0!==a[1].length||(u=!0),!u){for(s=[],u=0;u<n.length;u++)h!==u&&s.push(n[u]);s=e.set(s,i).call(this,a[1]),0<s[0].length&&(l[0]=l[0].concat(s[0]),l[1]=s[1])}if(l[1].length<c[1].length&&(c=l),0===c[1].length)break}if(0===c[0].length)return c;if(r){try{a=r.call(this,c[1])}catch(f){throw new t.Exception(c[1])}c[1]=a[1]}return c}},forward:function(t,e){return function(n){return t[e].call(this,n)}},replace:function(t,e){return function(n){return n=t.call(this,n),[e,n[1]]}},process:function(t,e){return function(n){return n=t.call(this,n),[e.call(this,n[0]),n[1]]}},min:function(e,n){return function(i){var r=n.call(this,i);if(r[0].length<e)throw new t.Exception(i);return r}}},n=function(t){return function(){var e,n=null,i=[];return 1<arguments.length?n=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(n=arguments[0]),n?(e=n.shift(),0<e.length?(n.unshift(e[void 0]),i.push(t.apply(null,n)),n.shift(),i):void 0):t.apply(null,arguments)}},i="optional not ignore cache".split(/\s/),o=0;o<i.length;o++)e[i[o]]=n(e[i[o]]);for(n=function(t){return function(){return arguments[0]instanceof Array?t.apply(null,arguments[0]):t.apply(null,arguments)}},i="each any all".split(/\s/),o=0;o<i.length;o++)e[i[o]]=n(e[i[o]])}(),function(){var t=Date,e=function(t){for(var n=[],i=0;i<t.length;i++)t[i]instanceof Array?n=n.concat(e(t[i])):t[i]&&n.push(t[i]);return n},n=function(){if(this.meridian&&(this.hour||0===this.hour)){if("a"===this.meridian&&11<this.hour&&Date.Config.strict24hr)throw"Invalid hour and meridian combination";if("p"===this.meridian&&12>this.hour&&Date.Config.strict24hr)throw"Invalid hour and meridian combination";"p"===this.meridian&&12>this.hour?this.hour+=12:"a"===this.meridian&&12===this.hour&&(this.hour=0)}};t.Translator={hour:function(t){return function(){this.hour=Number(t)}},minute:function(t){return function(){this.minute=Number(t)}},second:function(t){return function(){this.second=Number(t)}},secondAndMillisecond:function(t){return function(){var e=t.match(/^([0-5][0-9])\.([0-9]{1,3})/);this.second=Number(e[1]),this.millisecond=Number(e[2])}},meridian:function(t){return function(){this.meridian=t.slice(0,1).toLowerCase()}},timezone:function(t){return function(){var e=t.replace(/[^\d\+\-]/g,"");e.length?this.timezoneOffset=Number(e):this.timezone=t.toLowerCase()}},day:function(t){var e=t[0];return function(){if(this.day=Number(e.match(/\d+/)[0]),1>this.day)throw"invalid day"}},month:function(t){return function(){if(this.month=3===t.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(t)/4:Number(t)-1,0>this.month)throw"invalid month"}},year:function(t){return function(){var e=Number(t);this.year=2<t.length?e:e+(e+2e3<Date.CultureInfo.twoDigitYearMax?2e3:1900)}},rday:function(t){return function(){switch(t){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(e){e=e instanceof Array?e:[e];for(var i=0;i<e.length;i++)e[i]&&e[i].call(this);if(e=new Date,!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=e.getDate()),this.year||(this.year=e.getFullYear()),this.month||0===this.month||(this.month=e.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.millisecond||(this.millisecond=0),n.call(this),this.day>t.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");return e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond),100>this.year&&e.setFullYear(this.year),this.timezone?e.set({timezone:this.timezone}):this.timezoneOffset&&e.set({timezoneOffset:this.timezoneOffset}),e},finish:function(i){var r,o,s;if(i=i instanceof Array?e(i):[i],0===i.length)return null;for(r=0;r<i.length;r++)"function"==typeof i[r]&&i[r].call(this);if(this.now&&!this.unit&&!this.operator)return new Date;if(i=this.now||-1!=="hour minute second".indexOf(this.unit)?new Date:t.today(),r=!!(this.days&&null!==this.days||this.orient||this.operator),o="past"===this.orient||"subtract"===this.operator?-1:1,this.month&&"week"===this.unit&&(this.value=this.month+1,delete this.month,delete this.day),!this.month&&0!==this.month||-1==="year day hour minute second".indexOf(this.unit)||(this.value||(this.value=this.month+1),this.month=null,r=!0),r||!this.weekday||this.day||this.days||(s=Date[this.weekday](),this.day=s.getDate(),this.month||(this.month=s.getMonth()),this.year=s.getFullYear()),r&&this.weekday&&"month"!==this.unit&&"week"!==this.unit){var a=i;s=o||1,this.unit="day",this.days=(a=t.getDayNumberFromName(this.weekday)-a.getDay())?(a+7*s)%7:7*s}return!this.weekday||"week"===this.unit||this.day||this.days||(s=Date[this.weekday](),this.day=s.getDate(),s.getMonth()!==i.getMonth()&&(this.month=s.getMonth())),this.month&&"day"===this.unit&&this.operator&&(this.value||(this.value=this.month+1),this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(i.set({day:1*this.value}),r||(this.day=1*this.value)),this.month||!this.value||"month"!==this.unit||this.now||(this.month=this.value,r=!0),r&&(this.month||0===this.month)&&"year"!==this.unit&&(s=o||1,this.unit="month",this.months=(a=this.month-i.getMonth())?(a+12*s)%12:12*s,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"===this.operator?1:-1)+(this.value||0)*o:(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*o),n.call(this),!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!==this.unit||!this.value||this.day||this.month?"week"!==this.unit||!this.weeks||this.day||this.month?(r&&this.timezone&&this.day&&this.days&&(this.day=this.days),r?i.add(this):i.set(this),this.timezone&&(this.timezone=this.timezone.toUpperCase(),r=t.getTimezoneOffset(this.timezone),i.hasDaylightSavingTime()&&(o=t.getTimezoneAbbreviation(r,i.isDaylightSavingTime()),o!==this.timezone&&i.addHours(i.isDaylightSavingTime()?-1:1)),i.setTimezoneOffset(r)),i):(i=Date[void 0!==this.weekday?this.weekday:"today"]().addWeeks(this.weeks),this.now&&i.setTimeToNow(),i):Date.today().setWeek(this.value)}}}(),function(){var t=Date;t.Grammar={};var e,n=t.Parsing.Operators,i=t.Grammar,r=t.Translator;e=function(){return n.each(n.any.apply(null,arguments),n.not(i.ctoken2("timeContext")))},i.datePartDelimiter=n.rtoken(/^([\s\-\.\,\/\x27]+)/),i.timePartDelimiter=n.stoken(":"),i.whiteSpace=n.rtoken(/^\s*/),i.generalDelimiter=n.rtoken(/^(([\s\,]|at|@|on)+)/);var o={};i.ctoken=function(t){var e=o[t];if(!e){for(var e=Date.CultureInfo.regexPatterns,i=t.split(/\s+/),r=[],s=0;s<i.length;s++)r.push(n.replace(n.rtoken(e[i[s]]),i[s]));e=o[t]=n.any.apply(null,r)}return e},i.ctoken2=function(t){return n.rtoken(Date.CultureInfo.regexPatterns[t])};var s=function(t,e,r,o){i[t]=n.cache(o?n.process(n.each(n.rtoken(e),n.optional(i.ctoken2(o))),r):n.process(n.rtoken(e),r))},a=function(t,e){return n.cache(n.process(i.ctoken2(t),e))},l={},c=function(t){return l[t]=l[t]||i.format(t)[0],l[t]};i.allformats=function(t){var e=[];if(t instanceof Array)for(var n=0;n<t.length;n++)e.push(c(t[n]));else e.push(c(t));return e},i.formats=function(t){if(t instanceof Array){for(var e=[],i=0;i<t.length;i++)e.push(c(t[i]));return n.any.apply(null,e)}return c(t)};var u={timeFormats:function(){var t,e="h hh H HH m mm s ss ss.s z zz".split(" "),o=[/^(0[0-9]|1[0-2]|[1-9])/,/^(0[0-9]|1[0-2])/,/^([0-1][0-9]|2[0-3]|[0-9])/,/^([0-1][0-9]|2[0-3])/,/^([0-5][0-9]|[0-9])/,/^[0-5][0-9]/,/^([0-5][0-9]|[0-9])/,/^[0-5][0-9]/,/^[0-5][0-9]\.[0-9]{1,3}/,/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/,/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/],l=[r.hour,r.hour,r.hour,r.hour,r.minute,r.minute,r.second,r.second,r.secondAndMillisecond,r.timezone,r.timezone];for(t=0;t<e.length;t++)s(e[t],o[t],l[t]);i.hms=n.cache(n.sequence([i.H,i.m,i.s],i.timePartDelimiter)),i.t=a("shortMeridian",r.meridian),i.tt=a("longMeridian",r.meridian),i.zzz=a("timezone",r.timezone),i.timeSuffix=n.each(n.ignore(i.whiteSpace),n.set([i.tt,i.zzz])),i.time=n.each(n.optional(n.ignore(n.stoken("T"))),i.hms,i.timeSuffix)},dateFormats:function(){var t,o=function(){return n.set(arguments,i.datePartDelimiter)},a="d dd M MM y yy yyy yyyy".split(" "),l=[/^([0-2]\d|3[0-1]|\d)/,/^([0-2]\d|3[0-1])/,/^(1[0-2]|0\d|\d)/,/^(1[0-2]|0\d)/,/^(\d+)/,/^(\d\d)/,/^(\d\d?\d?\d?)/,/^(\d\d\d\d)/],c=[r.day,r.day,r.month,r.month,r.year,r.year,r.year,r.year],u=["ordinalSuffix","ordinalSuffix"];for(t=0;t<a.length;t++)s(a[t],l[t],c[t],u[t]);i.MMM=i.MMMM=n.cache(n.process(i.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),r.month)),i.ddd=i.dddd=n.cache(n.process(i.ctoken("sun mon tue wed thu fri sat"),function(t){return function(){this.weekday=t}})),i.day=e(i.d,i.dd),i.month=e(i.M,i.MMM),i.year=e(i.yyyy,i.yy),i.mdy=o(i.ddd,i.month,i.day,i.year),i.ymd=o(i.ddd,i.year,i.month,i.day),i.dmy=o(i.ddd,i.day,i.month,i.year),i.date=function(t){return(i[Date.CultureInfo.dateElementOrder]||i.mdy).call(this,t)}},relative:function(){i.orientation=n.process(i.ctoken("past future"),function(t){return function(){this.orient=t}}),i.operator=n.process(i.ctoken("add subtract"),function(t){return function(){this.operator=t}}),i.rday=n.process(i.ctoken("yesterday tomorrow today now"),r.rday),i.unit=n.process(i.ctoken("second minute hour day week month year"),function(t){return function(){this.unit=t}})}};i.buildGrammarFormats=function(){o={},u.timeFormats(),u.dateFormats(),u.relative(),i.value=n.process(n.rtoken(/^([-+]?\d+)?(st|nd|rd|th)?/),function(t){return function(){this.value=t.replace(/\D/g,"")}}),i.expression=n.set([i.rday,i.operator,i.value,i.unit,i.orientation,i.ddd,i.MMM]),i.format=n.process(n.many(n.any(n.process(n.rtoken(/^(dd?d?d?(?!e)|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(e){if(i[e])return i[e];throw t.Parsing.Exception(e)}),n.process(n.rtoken(/^[^dMyhHmstz]+/),function(t){return n.ignore(n.stoken(t))}))),function(t){return n.process(n.each.apply(null,t),r.finishExact)}),i._start=n.process(n.set([i.date,i.time,i.expression],i.generalDelimiter,i.whiteSpace),r.finish)},i.buildGrammarFormats(),i._formats=i.formats('"yyyy-MM-ddTHH:mm:ssZ";yyyy-MM-ddTHH:mm:ss.sz;yyyy-MM-ddTHH:mm:ssZ;yyyy-MM-ddTHH:mm:ssz;yyyy-MM-ddTHH:mm:ss;yyyy-MM-ddTHH:mmZ;yyyy-MM-ddTHH:mmz;yyyy-MM-ddTHH:mm;ddd, MMM dd, yyyy H:mm:ss tt;ddd MMM d yyyy HH:mm:ss zzz;MMddyyyy;ddMMyyyy;Mddyyyy;ddMyyyy;Mdyyyy;dMyyyy;yyyy;Mdyy;dMyy;d'.split(";")),i.start=function(t){try{var e=i._formats.call({},t);if(0===e[1].length)return e}catch(n){}return i._start.call({},t)}}(),function(){var t=Date,e={removeOrds:function(t){return t=(ords=t.match(/\b(\d+)(?:st|nd|rd|th)\b/))&&2===ords.length?t.replace(ords[0],ords[1]):t},grammarParser:function(e){var n=null;try{n=t.Grammar.start.call({},e.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(i){return null}return 0===n[1].length?n[0]:null},nativeFallback:function(t){var e;try{return(e=Date._parse(t))||0===e?new Date(e):null}catch(n){return null}}};t._parse||(t._parse=t.parse),t.parse=function(n){var i;return n?n instanceof Date?n.clone():(4<=n.length&&"0"!==n.charAt(0)&&"+"!==n.charAt(0)&&"-"!==n.charAt(0)&&(i=t.Parsing.ISO.parse(n)||t.Parsing.Numeric.parse(n)),i instanceof Date&&!isNaN(i.getTime())?i:(n=t.Parsing.Normalizer.parse(e.removeOrds(n)),i=e.grammarParser(n),null!==i?i:e.nativeFallback(n))):null},Date.getParseFunction=function(t){var e=Date.Grammar.allformats(t);return function(t){for(var n=null,i=0;i<e.length;i++){try{n=e[i].call({},t)}catch(r){continue}if(0===n[1].length)return n[0]}return null}},t.parseExact=function(e,n){return t.getParseFunction(n)(e)}}(),function(){var e=Date,n=e.prototype,i=function(t,e){return e||(e=2),("000"+t).slice(-1*e)},r={d:"dd","%d":"dd",D:"ddd","%a":"ddd",j:"dddd",l:"dddd","%A":"dddd",S:"S",F:"MMMM","%B":"MMMM",m:"MM","%m":"MM",M:"MMM","%b":"MMM","%h":"MMM",n:"M",Y:"yyyy","%Y":"yyyy",y:"yy","%y":"yy",g:"h","%I":"h",G:"H",h:"hh",H:"HH","%H":"HH",i:"mm","%M":"mm",s:"ss","%S":"ss","%r":"hh:mm tt","%R":"H:mm","%T":"H:mm:ss","%X":"t","%x":"d","%e":"d","%D":"MM/dd/yy","%n":"\\n","%t":"\\t",e:"z",T:"z","%z":"z","%Z":"z",Z:"ZZ",N:"u",w:"u","%w":"u",W:"W","%V":"W"},o={substitutes:function(t){return r[t]},interpreted:function(n,r){var o;switch(n){case"%u":return r.getDay()+1;case"z":return r.getOrdinalNumber();case"%j":return i(r.getOrdinalNumber(),3);case"%U":o=r.clone().set({month:0,day:1}).addDays(-1).moveToDayOfWeek(0);var s=r.clone().addDays(1).moveToDayOfWeek(0,-1);return o>s?"00":i((s.getOrdinalNumber()-o.getOrdinalNumber())/7+1);case"%W":return i(r.getWeek());case"t":return e.getDaysInMonth(r.getFullYear(),r.getMonth());case"o":case"%G":return r.setWeek(r.getISOWeek()).toString("yyyy");case"%g":return r._format("%G").slice(-2);case"a":case"%p":return t("tt").toLowerCase();case"A":return t("tt").toUpperCase();case"u":return i(r.getMilliseconds(),3);case"I":return r.isDaylightSavingTime()?1:0;case"O":return r.getUTCOffset();case"P":return o=r.getUTCOffset(),o.substring(0,o.length-2)+":"+o.substring(o.length-2);case"B":return o=new Date,Math.floor((3600*o.getHours()+60*o.getMinutes()+o.getSeconds()+60*(o.getTimezoneOffset()+60))/86.4);case"c":return r.toISOString().replace(/\"/g,"");case"U":return e.strtotime("now");case"%c":return t("d")+" "+t("t");case"%C":return Math.floor(r.getFullYear()/100+1)}},shouldOverrideDefaults:function(t){switch(t){case"%e":return!0;default:return!1}},parse:function(t,e){var n,i=e||new Date;return(n=o.substitutes(t))?n:(n=o.interpreted(t,i))?n:t}};e.normalizeFormat=function(t,e){return t.replace(/(%|\\)?.|%%/g,function(t){return o.parse(t,e)})},e.strftime=function(t,e){return Date.parse(e)._format(t)},e.strtotime=function(t){return t=e.parse(t),Math.round(e.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())/1e3)};var s=function(t){return function(n){var i=!1;return"\\"===n.charAt(0)||"%%"===n.substring(0,2)?n.replace("\\","").replace("%%","%"):(i=o.shouldOverrideDefaults(n),(n=e.normalizeFormat(n,t))?t.toString(n,i):void 0)}};n._format=function(t){var e=s(this);return t?t.replace(/(%|\\)?.|%%/g,e):this._toString()},n.format||(n.format=n._format)}(),function(){var t=function(t){return function(){return this[t]}},e=function(t){return function(e){return this[t]=e,this}},n=function(t,e,i,r,o){if(1===arguments.length&&"number"==typeof t){var s=0>t?-1:1,a=Math.abs(t);this.setDays(Math.floor(a/864e5)*s),a%=864e5,this.setHours(Math.floor(a/36e5)*s),a%=36e5,this.setMinutes(Math.floor(a/6e4)*s),a%=6e4,this.setSeconds(Math.floor(a/1e3)*s),this.setMilliseconds(a%1e3*s)}else this.set(t,e,i,r,o);return this.getTotalMilliseconds=function(){return 864e5*this.getDays()+36e5*this.getHours()+6e4*this.getMinutes()+1e3*this.getSeconds()},this.compareTo=function(t){var e=new Date(1970,1,1,this.getHours(),this.getMinutes(),this.getSeconds());return t=null===t?new Date(1970,1,1,0,0,0):new Date(1970,1,1,t.getHours(),t.getMinutes(),t.getSeconds()),t>e?-1:e>t?1:0},this.equals=function(t){return 0===this.compareTo(t)},this.add=function(t){return null===t?this:this.addSeconds(t.getTotalMilliseconds()/1e3)},this.subtract=function(t){return null===t?this:this.addSeconds(-t.getTotalMilliseconds()/1e3)},this.addDays=function(t){return new n(this.getTotalMilliseconds()+864e5*t)},this.addHours=function(t){return new n(this.getTotalMilliseconds()+36e5*t)},this.addMinutes=function(t){return new n(this.getTotalMilliseconds()+6e4*t)},this.addSeconds=function(t){return new n(this.getTotalMilliseconds()+1e3*t)},this.addMilliseconds=function(t){return new n(this.getTotalMilliseconds()+t)},this.get12HourHour=function(){return 12<this.getHours()?this.getHours()-12:0===this.getHours()?12:this.getHours()},this.getDesignator=function(){return 12>this.getHours()?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator},this.toString=function(t){this._toString=function(){return null!==this.getDays()&&0<this.getDays()?this.getDays()+"."+this.getHours()+":"+this.p(this.getMinutes())+":"+this.p(this.getSeconds()):this.getHours()+":"+this.p(this.getMinutes())+":"+this.p(this.getSeconds())},this.p=function(t){return 2>t.toString().length?"0"+t:t};var e=this;return t?t.replace(/dd?|HH?|hh?|mm?|ss?|tt?/g,function(t){switch(t){case"d":return e.getDays();case"dd":return e.p(e.getDays());case"H":return e.getHours();case"HH":return e.p(e.getHours());case"h":return e.get12HourHour();case"hh":return e.p(e.get12HourHour());case"m":return e.getMinutes();case"mm":return e.p(e.getMinutes());case"s":return e.getSeconds();case"ss":return e.p(e.getSeconds());case"t":return(12>e.getHours()?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator).substring(0,1);case"tt":return 12>e.getHours()?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator}}):this._toString()},this};!function(n,i){for(var r=0;r<i.length;r++){var o=i[r],s=o.slice(0,1).toUpperCase()+o.slice(1);n.prototype[o]=0,n.prototype["get"+s]=t(o),n.prototype["set"+s]=e(o)}}(n,"years months days hours minutes seconds milliseconds".split(" ").slice(2)),n.prototype.set=function(t,e,n,i,r){this.setDays(t||this.getDays()),this.setHours(e||this.getHours()),this.setMinutes(n||this.getMinutes()),this.setSeconds(i||this.getSeconds()),this.setMilliseconds(r||this.getMilliseconds())},Date.prototype.getTimeOfDay=function(){return new n(0,this.getHours(),this.getMinutes(),this.getSeconds(),this.getMilliseconds())},Date.TimeSpan=n,"undefined"!=typeof window&&(window.TimeSpan=n)}(),function(){var t=function(t){return function(){return this[t]}},e=function(t){return function(e){return this[t]=e,this}},n=function(t,e,n,i){function r(){e.addMonths(-t),i.months++,12===i.months&&(i.years++,i.months=0)}if(1===t)for(;e>n;)r();else for(;n>e;)r();i.months--,i.months*=t,i.years*=t},i=function(t,e,i,r,o,s,a){if(7===arguments.length)this.set(t,e,i,r,o,s,a);else if(2===arguments.length&&arguments[0]instanceof Date&&arguments[1]instanceof Date){var l=arguments[0].clone(),c=arguments[1].clone(),u=l>c?1:-1;this.dates={start:arguments[0].clone(),end:arguments[1].clone()},n(u,l,c,this);var h=!1==(l.isDaylightSavingTime()===c.isDaylightSavingTime());h&&1===u?l.addHours(-1):h&&l.addHours(1),l=c-l,0!==l&&(l=new TimeSpan(l),this.set(this.years,this.months,l.getDays(),l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds()))}return this};!function(n,i){for(var r=0;r<i.length;r++){var o=i[r],s=o.slice(0,1).toUpperCase()+o.slice(1);n.prototype[o]=0,n.prototype["get"+s]=t(o),n.prototype["set"+s]=e(o)}}(i,"years months days hours minutes seconds milliseconds".split(" ")),i.prototype.set=function(t,e,n,i,r,o,s){this.setYears(t||this.getYears()),this.setMonths(e||this.getMonths()),this.setDays(n||this.getDays()),this.setHours(i||this.getHours()),this.setMinutes(r||this.getMinutes()),this.setSeconds(o||this.getSeconds()),this.setMilliseconds(s||this.getMilliseconds())},Date.TimePeriod=i,"undefined"!=typeof window&&(window.TimePeriod=i)}(),function(t,e){"function"==typeof define&&define.amd?define("sifter",e):"object"==typeof exports?module.exports=e():t.Sifter=e()}(this,function(){var t=function(t,e){this.items=t,this.settings=e||{diacritics:!0}};t.prototype.tokenize=function(t){if(t=i(String(t||"").toLowerCase()),!t||!t.length)return[];var e,n,o,a,l=[],c=t.split(/ +/);for(e=0,n=c.length;n>e;e++){if(o=r(c[e]),this.settings.diacritics)for(a in s)s.hasOwnProperty(a)&&(o=o.replace(new RegExp(a,"g"),s[a]));l.push({string:c[e],regex:new RegExp(o,"i")})}return l},t.prototype.iterator=function(t,e){var n;n=o(t)?Array.prototype.forEach||function(t){for(var e=0,n=this.length;n>e;e++)t(this[e],e,this)}:function(t){for(var e in this)this.hasOwnProperty(e)&&t(this[e],e,this)},n.apply(t,[e])},t.prototype.getScoreFunction=function(t,e){var n,i,r,o;n=this,t=n.prepareSearch(t,e),r=t.tokens,i=t.options.fields,o=r.length;var s=function(t,e){var n,i;return t?(t=String(t||""),i=t.search(e.regex),-1===i?0:(n=e.string.length/t.length,0===i&&(n+=.5),n)):0},a=function(){var t=i.length;return t?1===t?function(t,e){return s(e[i[0]],t)}:function(e,n){for(var r=0,o=0;t>r;r++)o+=s(n[i[r]],e);return o/t}:function(){return 0}}();return o?1===o?function(t){return a(r[0],t)}:"and"===t.options.conjunction?function(t){for(var e,n=0,i=0;o>n;n++){if(e=a(r[n],t),0>=e)return 0;i+=e}return i/o}:function(t){for(var e=0,n=0;o>e;e++)n+=a(r[e],t);return n/o}:function(){return 0}},t.prototype.getSortFunction=function(t,n){var i,r,o,s,a,l,c,u,h,p,d;if(o=this,t=o.prepareSearch(t,n),d=!t.query&&n.sort_empty||n.sort,h=function(t,e){return"$score"===t?e.score:o.items[e.id][t]},a=[],d)for(i=0,r=d.length;r>i;i++)(t.query||"$score"!==d[i].field)&&a.push(d[i]);if(t.query){for(p=!0,i=0,r=a.length;r>i;i++)if("$score"===a[i].field){p=!1;break}p&&a.unshift({field:"$score",direction:"desc"})}else for(i=0,r=a.length;r>i;i++)if("$score"===a[i].field){a.splice(i,1);break}for(u=[],i=0,r=a.length;r>i;i++)u.push("desc"===a[i].direction?-1:1);return l=a.length,l?1===l?(s=a[0].field,c=u[0],function(t,n){return c*e(h(s,t),h(s,n))}):function(t,n){var i,r,o;for(i=0;l>i;i++)if(o=a[i].field,r=u[i]*e(h(o,t),h(o,n)))return r;return 0}:null},t.prototype.prepareSearch=function(t,e){if("object"==typeof t)return t;e=n({},e);var i=e.fields,r=e.sort,s=e.sort_empty;return i&&!o(i)&&(e.fields=[i]),r&&!o(r)&&(e.sort=[r]),s&&!o(s)&&(e.sort_empty=[s]),{options:e,query:String(t||"").toLowerCase(),tokens:this.tokenize(t),total:0,items:[]}},t.prototype.search=function(t,e){var n,i,r,o,s=this;return i=this.prepareSearch(t,e),e=i.options,t=i.query,o=e.score||s.getScoreFunction(i),t.length?s.iterator(s.items,function(t,r){n=o(t),(e.filter===!1||n>0)&&i.items.push({score:n,id:r})}):s.iterator(s.items,function(t,e){i.items.push({score:1,id:e})}),r=s.getSortFunction(i,e),r&&i.items.sort(r),i.total=i.items.length,"number"==typeof e.limit&&(i.items=i.items.slice(0,e.limit)),i};var e=function(t,e){return"number"==typeof t&&"number"==typeof e?t>e?1:e>t?-1:0:(t=a(String(t||"")),e=a(String(e||"")),t>e?1:e>t?-1:0)},n=function(t){var e,n,i,r;for(e=1,n=arguments.length;n>e;e++)if(r=arguments[e])for(i in r)r.hasOwnProperty(i)&&(t[i]=r[i]);return t},i=function(t){return(t+"").replace(/^\s+|\s+$|/g,"")},r=function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},o=Array.isArray||$&&$.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s={a:"[a\xc0\xc1\xc2\xc3\xc4\xc5\xe0\xe1\xe2\xe3\xe4\xe5\u0100\u0101\u0105\u0104]",c:"[c\xc7\xe7\u0107\u0106\u010d\u010c]",d:"[d\u0111\u0110\u010f\u010e]",e:"[e\xc8\xc9\xca\xcb\xe8\xe9\xea\xeb\u011b\u011a\u0112\u0113\u0119\u0118]",i:"[i\xcc\xcd\xce\xcf\xec\xed\xee\xef\u012a\u012b]",l:"[l\u0142\u0141]",n:"[n\xd1\xf1\u0148\u0147\u0144\u0143]",o:"[o\xd2\xd3\xd4\xd5\xd5\xd6\xd8\xf2\xf3\xf4\xf5\xf6\xf8\u014c\u014d]",r:"[r\u0159\u0158]",s:"[s\u0160\u0161\u015b\u015a]",t:"[t\u0165\u0164]",u:"[u\xd9\xda\xdb\xdc\xf9\xfa\xfb\xfc\u016f\u016e\u016a\u016b]",y:"[y\u0178\xff\xfd\xdd]",z:"[z\u017d\u017e\u017c\u017b\u017a\u0179]"},a=function(){var t,e,n,i,r="",o={};for(n in s)if(s.hasOwnProperty(n))for(i=s[n].substring(2,s[n].length-1),r+=i,t=0,e=i.length;e>t;t++)o[i.charAt(t)]=n;var a=new RegExp("["+r+"]","g");
return function(t){return t.replace(a,function(t){return o[t]}).toLowerCase()}}();return t}),function(t,e){"function"==typeof define&&define.amd?define("microplugin",e):"object"==typeof exports?module.exports=e():t.MicroPlugin=e()}(this,function(){var t={};t.mixin=function(t){t.plugins={},t.prototype.initializePlugins=function(t){var n,i,r,o=this,s=[];if(o.plugins={names:[],settings:{},requested:{},loaded:{}},e.isArray(t))for(n=0,i=t.length;i>n;n++)"string"==typeof t[n]?s.push(t[n]):(o.plugins.settings[t[n].name]=t[n].options,s.push(t[n].name));else if(t)for(r in t)t.hasOwnProperty(r)&&(o.plugins.settings[r]=t[r],s.push(r));for(;s.length;)o.require(s.shift())},t.prototype.loadPlugin=function(e){var n=this,i=n.plugins,r=t.plugins[e];if(!t.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');i.requested[e]=!0,i.loaded[e]=r.fn.apply(n,[n.plugins.settings[e]||{}]),i.names.push(e)},t.prototype.require=function(t){var e=this,n=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(n.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return n.loaded[t]},t.define=function(e,n){t.plugins[e]={name:e,fn:n}}};var e={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}};return t}),function(t,e){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],e):"object"==typeof exports?module.exports=e(require("jquery"),require("sifter"),require("microplugin")):t.Selectize=e(t.jQuery,t.Sifter,t.MicroPlugin)}(this,function(t,e,n){"use strict";var i=function(t,e){if("string"!=typeof e||e.length){var n="string"==typeof e?new RegExp(e,"i"):e,i=function(t){var e=0;if(3===t.nodeType){var r=t.data.search(n);if(r>=0&&t.data.length>0){var o=t.data.match(n),s=document.createElement("span");s.className="highlight";var a=t.splitText(r),l=(a.splitText(o[0].length),a.cloneNode(!0));s.appendChild(l),a.parentNode.replaceChild(s,a),e=1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName))for(var c=0;c<t.childNodes.length;++c)c+=i(t.childNodes[c]);return e};return t.each(function(){i(this)})}},r=function(){};r.prototype={on:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},off:function(t,e){var n=arguments.length;return 0===n?delete this._events:1===n?delete this._events[t]:(this._events=this._events||{},void(t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(e),1)))},trigger:function(t){if(this._events=this._events||{},t in this._events!=!1)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},r.mixin=function(t){for(var e=["on","off","trigger"],n=0;n<e.length;n++)t.prototype[e[n]]=r.prototype[e[n]]};var o=/Mac/.test(navigator.userAgent),s=65,a=13,l=27,c=37,u=38,h=80,p=39,d=40,f=78,g=8,m=46,y=16,v=o?91:17,b=o?18:17,w=9,x=1,_=2,k=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,T=function(t){return"undefined"!=typeof t},S=function(t){return"undefined"==typeof t||null===t?null:"boolean"==typeof t?t?"1":"0":t+""},C=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},P=function(t){return(t+"").replace(/\$/g,"$$$$")},D={};D.before=function(t,e,n){var i=t[e];t[e]=function(){return n.apply(t,arguments),i.apply(t,arguments)}},D.after=function(t,e,n){var i=t[e];t[e]=function(){var e=i.apply(t,arguments);return n.apply(t,arguments),e}};var M=function(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}},A=function(t,e){var n;return function(){var i=this,r=arguments;window.clearTimeout(n),n=window.setTimeout(function(){t.apply(i,r)},e)}},O=function(t,e,n){var i,r=t.trigger,o={};t.trigger=function(){var n=arguments[0];return-1===e.indexOf(n)?r.apply(t,arguments):void(o[n]=arguments)},n.apply(t,[]),t.trigger=r;for(i in o)o.hasOwnProperty(i)&&r.apply(t,o[i])},E=function(t,e,n,i){t.on(e,n,function(e){for(var n=e.target;n&&n.parentNode!==t[0];)n=n.parentNode;return e.currentTarget=n,i.apply(this,[e])})},L=function(t){var e={};if("selectionStart"in t)e.start=t.selectionStart,e.length=t.selectionEnd-e.start;else if(document.selection){t.focus();var n=document.selection.createRange(),i=document.selection.createRange().text.length;n.moveStart("character",-t.value.length),e.start=n.text.length-i,e.length=i}return e},N=function(t,e,n){var i,r,o={};if(n)for(i=0,r=n.length;r>i;i++)o[n[i]]=t.css(n[i]);else o=t.css();e.css(o)},I=function(e,n){if(!e)return 0;var i=t("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(e).appendTo("body");N(n,i,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var r=i.width();return i.remove(),r},j=function(t){var e=null,n=function(n,i){var r,o,s,a,l,c,u,h;n=n||window.event||{},i=i||{},n.metaKey||n.altKey||(i.force||t.data("grow")!==!1)&&(r=t.val(),n.type&&"keydown"===n.type.toLowerCase()&&(o=n.keyCode,s=o>=97&&122>=o||o>=65&&90>=o||o>=48&&57>=o||32===o,o===m||o===g?(h=L(t[0]),h.length?r=r.substring(0,h.start)+r.substring(h.start+h.length):o===g&&h.start?r=r.substring(0,h.start-1)+r.substring(h.start+1):o===m&&"undefined"!=typeof h.start&&(r=r.substring(0,h.start)+r.substring(h.start+1))):s&&(c=n.shiftKey,u=String.fromCharCode(n.keyCode),u=c?u.toUpperCase():u.toLowerCase(),r+=u)),a=t.attr("placeholder"),!r&&a&&(r=a),l=I(r,t)+4,l!==e&&(e=l,t.width(l),t.triggerHandler("resize")))};t.on("keydown keyup update blur",n),n()},R=function(n,i){var r,o,s,a,l=this;a=n[0],a.selectize=l;var c=window.getComputedStyle&&window.getComputedStyle(a,null);if(s=c?c.getPropertyValue("direction"):a.currentStyle&&a.currentStyle.direction,s=s||n.parents("[dir]:first").attr("dir")||"",t.extend(l,{order:0,settings:i,$input:n,tabIndex:n.attr("tabindex")||"",tagType:"select"===a.tagName.toLowerCase()?x:_,rtl:/rtl/i.test(s),eventNS:".selectize"+ ++R.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:n.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===i.loadThrottle?l.onSearchChange:A(l.onSearchChange,i.loadThrottle)}),l.sifter=new e(this.options,{diacritics:i.diacritics}),l.settings.options){for(r=0,o=l.settings.options.length;o>r;r++)l.registerOption(l.settings.options[r]);delete l.settings.options}if(l.settings.optgroups){for(r=0,o=l.settings.optgroups.length;o>r;r++)l.registerOptionGroup(l.settings.optgroups[r]);delete l.settings.optgroups}l.settings.mode=l.settings.mode||(1===l.settings.maxItems?"single":"multi"),"boolean"!=typeof l.settings.hideSelected&&(l.settings.hideSelected="multi"===l.settings.mode),l.initializePlugins(l.settings.plugins),l.setupCallbacks(),l.setupTemplates(),l.setup()};return r.mixin(R),n.mixin(R),t.extend(R.prototype,{setup:function(){var e,n,i,r,s,a,l,c,u,h=this,p=h.settings,d=h.eventNS,f=t(window),g=t(document),m=h.$input;if(l=h.settings.mode,c=m.attr("class")||"",e=t("<div>").addClass(p.wrapperClass).addClass(c).addClass(l),n=t("<div>").addClass(p.inputClass).addClass("items").appendTo(e),i=t('<input type="text" autocomplete="off" />').appendTo(n).attr("tabindex",m.is(":disabled")?"-1":h.tabIndex),a=t(p.dropdownParent||e),r=t("<div>").addClass(p.dropdownClass).addClass(l).hide().appendTo(a),s=t("<div>").addClass(p.dropdownContentClass).appendTo(r),h.settings.copyClassesToDropdown&&r.addClass(c),e.css({width:m[0].style.width}),h.plugins.names.length&&(u="plugin-"+h.plugins.names.join(" plugin-"),e.addClass(u),r.addClass(u)),(null===p.maxItems||p.maxItems>1)&&h.tagType===x&&m.attr("multiple","multiple"),h.settings.placeholder&&i.attr("placeholder",p.placeholder),!h.settings.splitOn&&h.settings.delimiter){var w=h.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");h.settings.splitOn=new RegExp("\\s*"+w+"+\\s*")}m.attr("autocorrect")&&i.attr("autocorrect",m.attr("autocorrect")),m.attr("autocapitalize")&&i.attr("autocapitalize",m.attr("autocapitalize")),h.$wrapper=e,h.$control=n,h.$control_input=i,h.$dropdown=r,h.$dropdown_content=s,r.on("mouseenter","[data-selectable]",function(){return h.onOptionHover.apply(h,arguments)}),r.on("mousedown click","[data-selectable]",function(){return h.onOptionSelect.apply(h,arguments)}),E(n,"mousedown","*:not(input)",function(){return h.onItemSelect.apply(h,arguments)}),j(i),n.on({mousedown:function(){return h.onMouseDown.apply(h,arguments)},click:function(){return h.onClick.apply(h,arguments)}}),i.on({mousedown:function(t){t.stopPropagation()},keydown:function(){return h.onKeyDown.apply(h,arguments)},keyup:function(){return h.onKeyUp.apply(h,arguments)},keypress:function(){return h.onKeyPress.apply(h,arguments)},resize:function(){h.positionDropdown.apply(h,[])},blur:function(){return h.onBlur.apply(h,arguments)},focus:function(){return h.ignoreBlur=!1,h.onFocus.apply(h,arguments)},paste:function(){return h.onPaste.apply(h,arguments)}}),g.on("keydown"+d,function(t){h.isCmdDown=t[o?"metaKey":"ctrlKey"],h.isCtrlDown=t[o?"altKey":"ctrlKey"],h.isShiftDown=t.shiftKey}),g.on("keyup"+d,function(t){t.keyCode===b&&(h.isCtrlDown=!1),t.keyCode===y&&(h.isShiftDown=!1),t.keyCode===v&&(h.isCmdDown=!1)}),g.on("mousedown"+d,function(t){if(h.isFocused){if(t.target===h.$dropdown[0]||t.target.parentNode===h.$dropdown[0])return!1;h.$control.has(t.target).length||t.target===h.$control[0]||h.blur(t.target)}}),f.on(["scroll"+d,"resize"+d].join(" "),function(){h.isOpen&&h.positionDropdown.apply(h,arguments)}),f.on("mousemove"+d,function(){h.ignoreHover=!1}),this.revertSettings={$children:m.children().detach(),tabindex:m.attr("tabindex")},m.attr("tabindex",-1).hide().after(h.$wrapper),t.isArray(p.items)&&(h.setValue(p.items),delete p.items),k&&m.on("invalid"+d,function(t){t.preventDefault(),h.isInvalid=!0,h.refreshState()}),h.updateOriginalInput(),h.refreshItems(),h.refreshState(),h.updatePlaceholder(),h.isSetup=!0,m.is(":disabled")&&h.disable(),h.on("change",this.onChange),m.data("selectize",h),m.addClass("selectized"),h.trigger("initialize"),p.preload===!0&&h.onSearchChange("")},setupTemplates:function(){var e=this,n=e.settings.labelField,i=e.settings.optgroupLabelField,r={optgroup:function(t){return'<div class="optgroup">'+t.html+"</div>"},optgroup_header:function(t,e){return'<div class="optgroup-header">'+e(t[i])+"</div>"},option:function(t,e){return'<div class="option">'+e(t[n])+"</div>"},item:function(t,e){return'<div class="item">'+e(t[n])+"</div>"},option_create:function(t,e){return'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>"}};e.settings.render=t.extend({},r,e.settings.render)},setupCallbacks:function(){var t,e,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in n)n.hasOwnProperty(t)&&(e=this.settings[n[t]],e&&this.on(t,e))},onClick:function(t){var e=this;e.isFocused||(e.focus(),t.preventDefault())},onMouseDown:function(e){{var n=this,i=e.isDefaultPrevented();t(e.target)}if(n.isFocused){if(e.target!==n.$control_input[0])return"single"===n.settings.mode?n.isOpen?n.close():n.open():i||n.setActiveItem(null),!1}else i||window.setTimeout(function(){n.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(e){var n=this;n.isFull()||n.isInputHidden||n.isLocked?e.preventDefault():n.settings.splitOn&&setTimeout(function(){for(var e=t.trim(n.$control_input.val()||"").split(n.settings.splitOn),i=0,r=e.length;r>i;i++)n.createItem(e[i])},0)},onKeyPress:function(t){if(this.isLocked)return t&&t.preventDefault();var e=String.fromCharCode(t.keyCode||t.which);return this.settings.create&&"multi"===this.settings.mode&&e===this.settings.delimiter?(this.createItem(),t.preventDefault(),!1):void 0},onKeyDown:function(t){var e=(t.target===this.$control_input[0],this);if(e.isLocked)return void(t.keyCode!==w&&t.preventDefault());switch(t.keyCode){case s:if(e.isCmdDown)return void e.selectAll();break;case l:return void(e.isOpen&&(t.preventDefault(),t.stopPropagation(),e.close()));case f:if(!t.ctrlKey||t.altKey)break;case d:if(!e.isOpen&&e.hasOptions)e.open();else if(e.$activeOption){e.ignoreHover=!0;var n=e.getAdjacentOption(e.$activeOption,1);n.length&&e.setActiveOption(n,!0,!0)}return void t.preventDefault();case h:if(!t.ctrlKey||t.altKey)break;case u:if(e.$activeOption){e.ignoreHover=!0;var i=e.getAdjacentOption(e.$activeOption,-1);i.length&&e.setActiveOption(i,!0,!0)}return void t.preventDefault();case a:return void(e.isOpen&&e.$activeOption&&(e.onOptionSelect({currentTarget:e.$activeOption}),t.preventDefault()));case c:return void e.advanceSelection(-1,t);case p:return void e.advanceSelection(1,t);case w:return e.settings.selectOnTab&&e.isOpen&&e.$activeOption&&(e.onOptionSelect({currentTarget:e.$activeOption}),e.isFull()||t.preventDefault()),void(e.settings.create&&e.createItem()&&t.preventDefault());case g:case m:return void e.deleteSelection(t)}return!e.isFull()&&!e.isInputHidden||(o?t.metaKey:t.ctrlKey)?void 0:void t.preventDefault()},onKeyUp:function(t){var e=this;if(e.isLocked)return t&&t.preventDefault();var n=e.$control_input.val()||"";e.lastValue!==n&&(e.lastValue=n,e.onSearchChange(n),e.refreshOptions(),e.trigger("type",n))},onSearchChange:function(t){var e=this,n=e.settings.load;n&&(e.loadedSearches.hasOwnProperty(t)||(e.loadedSearches[t]=!0,e.load(function(i){n.apply(e,[t,i])})))},onFocus:function(t){var e=this,n=e.isFocused;return e.isDisabled?(e.blur(),t&&t.preventDefault(),!1):void(e.ignoreFocus||(e.isFocused=!0,"focus"===e.settings.preload&&e.onSearchChange(""),n||e.trigger("focus"),e.$activeItems.length||(e.showInput(),e.setActiveItem(null),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState()))},onBlur:function(t,e){var n=this;if(n.isFocused&&(n.isFocused=!1,!n.ignoreFocus)){if(!n.ignoreBlur&&document.activeElement===n.$dropdown_content[0])return n.ignoreBlur=!0,void n.onFocus(t);var i=function(){n.close(),n.setTextboxValue(""),n.setActiveItem(null),n.setActiveOption(null),n.setCaret(n.items.length),n.refreshState(),(e||document.body).focus(),n.ignoreFocus=!1,n.trigger("blur")};n.ignoreFocus=!0,n.settings.create&&n.settings.createOnBlur?n.createItem(null,!1,i):i()}},onOptionHover:function(t){this.ignoreHover||this.setActiveOption(t.currentTarget,!1)},onOptionSelect:function(e){var n,i,r=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),i=t(e.currentTarget),i.hasClass("create")?r.createItem(null,function(){r.settings.closeAfterSelect&&r.close()}):(n=i.attr("data-value"),"undefined"!=typeof n&&(r.lastQuery=null,r.setTextboxValue(""),r.addItem(n),r.settings.closeAfterSelect?r.close():!r.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&r.setActiveOption(r.getOption(n))))},onItemSelect:function(t){var e=this;e.isLocked||"multi"===e.settings.mode&&(t.preventDefault(),e.setActiveItem(t.currentTarget,t))},load:function(t){var e=this,n=e.$wrapper.addClass(e.settings.loadingClass);e.loading++,t.apply(e,[function(t){e.loading=Math.max(e.loading-1,0),t&&t.length&&(e.addOption(t),e.refreshOptions(e.isFocused&&!e.isInputHidden)),e.loading||n.removeClass(e.settings.loadingClass),e.trigger("load",t)}])},setTextboxValue:function(t){var e=this.$control_input,n=e.val()!==t;n&&(e.val(t).triggerHandler("update"),this.lastValue=t)},getValue:function(){return this.tagType===x&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(t,e){var n=e?[]:["change"];O(this,n,function(){this.clear(e),this.addItems(t,e)})},setActiveItem:function(e,n){var i,r,o,s,a,l,c,u,h=this;if("single"!==h.settings.mode){if(e=t(e),!e.length)return t(h.$activeItems).removeClass("active"),h.$activeItems=[],void(h.isFocused&&h.showInput());if(i=n&&n.type.toLowerCase(),"mousedown"===i&&h.isShiftDown&&h.$activeItems.length){for(u=h.$control.children(".active:last"),s=Array.prototype.indexOf.apply(h.$control[0].childNodes,[u[0]]),a=Array.prototype.indexOf.apply(h.$control[0].childNodes,[e[0]]),s>a&&(c=s,s=a,a=c),r=s;a>=r;r++)l=h.$control[0].childNodes[r],-1===h.$activeItems.indexOf(l)&&(t(l).addClass("active"),h.$activeItems.push(l));n.preventDefault()}else"mousedown"===i&&h.isCtrlDown||"keydown"===i&&this.isShiftDown?e.hasClass("active")?(o=h.$activeItems.indexOf(e[0]),h.$activeItems.splice(o,1),e.removeClass("active")):h.$activeItems.push(e.addClass("active")[0]):(t(h.$activeItems).removeClass("active"),h.$activeItems=[e.addClass("active")[0]]);h.hideInput(),this.isFocused||h.focus()}},setActiveOption:function(e,n,i){var r,o,s,a,l,c=this;c.$activeOption&&c.$activeOption.removeClass("active"),c.$activeOption=null,e=t(e),e.length&&(c.$activeOption=e.addClass("active"),(n||!T(n))&&(r=c.$dropdown_content.height(),o=c.$activeOption.outerHeight(!0),n=c.$dropdown_content.scrollTop()||0,s=c.$activeOption.offset().top-c.$dropdown_content.offset().top+n,a=s,l=s-r+o,s+o>r+n?c.$dropdown_content.stop().animate({scrollTop:l},i?c.settings.scrollDuration:0):n>s&&c.$dropdown_content.stop().animate({scrollTop:a},i?c.settings.scrollDuration:0)))},selectAll:function(){var t=this;"single"!==t.settings.mode&&(t.$activeItems=Array.prototype.slice.apply(t.$control.children(":not(input)").addClass("active")),t.$activeItems.length&&(t.hideInput(),t.close()),t.focus())},hideInput:function(){var t=this;t.setTextboxValue(""),t.$control_input.css({opacity:0,position:"absolute",left:t.rtl?1e4:-1e4}),t.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var t=this;t.isDisabled||(t.ignoreFocus=!0,t.$control_input[0].focus(),window.setTimeout(function(){t.ignoreFocus=!1,t.onFocus()},0))},blur:function(t){this.$control_input[0].blur(),this.onBlur(null,t)},getScoreFunction:function(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())},getSearchOptions:function(){var t=this.settings,e=t.sortField;return"string"==typeof e&&(e=[{field:e}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e}},search:function(e){var n,i,r,o=this,s=o.settings,a=this.getSearchOptions();if(s.score&&(r=o.settings.score.apply(this,[e]),"function"!=typeof r))throw new Error('Selectize "score" setting must be a function that returns a function');if(e!==o.lastQuery?(o.lastQuery=e,i=o.sifter.search(e,t.extend(a,{score:r})),o.currentResults=i):i=t.extend(!0,{},o.currentResults),s.hideSelected)for(n=i.items.length-1;n>=0;n--)-1!==o.items.indexOf(S(i.items[n].id))&&i.items.splice(n,1);return i},refreshOptions:function(e){var n,r,o,s,a,l,c,u,h,p,d,f,g,m,y,v;"undefined"==typeof e&&(e=!0);var b=this,w=t.trim(b.$control_input.val()),x=b.search(w),_=b.$dropdown_content,k=b.$activeOption&&S(b.$activeOption.attr("data-value"));for(s=x.items.length,"number"==typeof b.settings.maxOptions&&(s=Math.min(s,b.settings.maxOptions)),a={},l=[],n=0;s>n;n++)for(c=b.options[x.items[n].id],u=b.render("option",c),h=c[b.settings.optgroupField]||"",p=t.isArray(h)?h:[h],r=0,o=p&&p.length;o>r;r++)h=p[r],b.optgroups.hasOwnProperty(h)||(h=""),a.hasOwnProperty(h)||(a[h]=[],l.push(h)),a[h].push(u);for(this.settings.lockOptgroupOrder&&l.sort(function(t,e){var n=b.optgroups[t].$order||0,i=b.optgroups[e].$order||0;return n-i}),d=[],n=0,s=l.length;s>n;n++)h=l[n],b.optgroups.hasOwnProperty(h)&&a[h].length?(f=b.render("optgroup_header",b.optgroups[h])||"",f+=a[h].join(""),d.push(b.render("optgroup",t.extend({},b.optgroups[h],{html:f})))):d.push(a[h].join(""));if(_.html(d.join("")),b.settings.highlight&&x.query.length&&x.tokens.length)for(n=0,s=x.tokens.length;s>n;n++)i(_,x.tokens[n].regex);if(!b.settings.hideSelected)for(n=0,s=b.items.length;s>n;n++)b.getOption(b.items[n]).addClass("selected");g=b.canCreate(w),g&&(_.prepend(b.render("option_create",{input:w})),v=t(_[0].childNodes[0])),b.hasOptions=x.items.length>0||g,b.hasOptions?(x.items.length>0?(y=k&&b.getOption(k),y&&y.length?m=y:"single"===b.settings.mode&&b.items.length&&(m=b.getOption(b.items[0])),m&&m.length||(m=v&&!b.settings.addPrecedence?b.getAdjacentOption(v,1):_.find("[data-selectable]:first"))):m=v,b.setActiveOption(m),e&&!b.isOpen&&b.open()):(b.setActiveOption(null),e&&b.isOpen&&b.close())},addOption:function(e){var n,i,r,o=this;if(t.isArray(e))for(n=0,i=e.length;i>n;n++)o.addOption(e[n]);else(r=o.registerOption(e))&&(o.userOptions[r]=!0,o.lastQuery=null,o.trigger("option_add",r,e))},registerOption:function(t){var e=S(t[this.settings.valueField]);return!e||this.options.hasOwnProperty(e)?!1:(t.$order=t.$order||++this.order,this.options[e]=t,e)},registerOptionGroup:function(t){var e=S(t[this.settings.optgroupValueField]);return e?(t.$order=t.$order||++this.order,this.optgroups[e]=t,e):!1},addOptionGroup:function(t,e){e[this.settings.optgroupValueField]=t,(t=this.registerOptionGroup(e))&&this.trigger("optgroup_add",t,e)},removeOptionGroup:function(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.renderCache={},this.trigger("optgroup_remove",t))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(e,n){var i,r,o,s,a,l,c,u=this;if(e=S(e),o=S(n[u.settings.valueField]),null!==e&&u.options.hasOwnProperty(e)){if("string"!=typeof o)throw new Error("Value must be set in option data");c=u.options[e].$order,o!==e&&(delete u.options[e],s=u.items.indexOf(e),-1!==s&&u.items.splice(s,1,o)),n.$order=n.$order||c,u.options[o]=n,a=u.renderCache.item,l=u.renderCache.option,a&&(delete a[e],delete a[o]),l&&(delete l[e],delete l[o]),-1!==u.items.indexOf(o)&&(i=u.getItem(e),r=t(u.render("item",n)),i.hasClass("active")&&r.addClass("active"),i.replaceWith(r)),u.lastQuery=null,u.isOpen&&u.refreshOptions(!1)}},removeOption:function(t,e){var n=this;t=S(t);var i=n.renderCache.item,r=n.renderCache.option;i&&delete i[t],r&&delete r[t],delete n.userOptions[t],delete n.options[t],n.lastQuery=null,n.trigger("option_remove",t),n.removeItem(t,e)},clearOptions:function(){var t=this;t.loadedSearches={},t.userOptions={},t.renderCache={},t.options=t.sifter.items={},t.lastQuery=null,t.trigger("option_clear"),t.clear()},getOption:function(t){return this.getElementWithValue(t,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(e,n){var i=this.$dropdown.find("[data-selectable]"),r=i.index(e)+n;return r>=0&&r<i.length?i.eq(r):t()},getElementWithValue:function(e,n){if(e=S(e),"undefined"!=typeof e&&null!==e)for(var i=0,r=n.length;r>i;i++)if(n[i].getAttribute("data-value")===e)return t(n[i]);return t()},getItem:function(t){return this.getElementWithValue(t,this.$control.children())},addItems:function(e,n){for(var i=t.isArray(e)?e:[e],r=0,o=i.length;o>r;r++)this.isPending=o-1>r,this.addItem(i[r],n)},addItem:function(e,n){var i=n?[]:["change"];O(this,i,function(){var i,r,o,s,a,l=this,c=l.settings.mode;return e=S(e),-1!==l.items.indexOf(e)?void("single"===c&&l.close()):void(l.options.hasOwnProperty(e)&&("single"===c&&l.clear(n),"multi"===c&&l.isFull()||(i=t(l.render("item",l.options[e])),a=l.isFull(),l.items.splice(l.caretPos,0,e),l.insertAtCaret(i),(!l.isPending||!a&&l.isFull())&&l.refreshState(),l.isSetup&&(o=l.$dropdown_content.find("[data-selectable]"),l.isPending||(r=l.getOption(e),s=l.getAdjacentOption(r,1).attr("data-value"),l.refreshOptions(l.isFocused&&"single"!==c),s&&l.setActiveOption(l.getOption(s))),!o.length||l.isFull()?l.close():l.positionDropdown(),l.updatePlaceholder(),l.trigger("item_add",e,i),l.updateOriginalInput({silent:n})))))})},removeItem:function(t,e){var n,i,r,o=this;n="object"==typeof t?t:o.getItem(t),t=S(n.attr("data-value")),i=o.items.indexOf(t),-1!==i&&(n.remove(),n.hasClass("active")&&(r=o.$activeItems.indexOf(n[0]),o.$activeItems.splice(r,1)),o.items.splice(i,1),o.lastQuery=null,!o.settings.persist&&o.userOptions.hasOwnProperty(t)&&o.removeOption(t,e),i<o.caretPos&&o.setCaret(o.caretPos-1),o.refreshState(),o.updatePlaceholder(),o.updateOriginalInput({silent:e}),o.positionDropdown(),o.trigger("item_remove",t,n))},createItem:function(e,n){var i=this,r=i.caretPos;e=e||t.trim(i.$control_input.val()||"");var o=arguments[arguments.length-1];if("function"!=typeof o&&(o=function(){}),"boolean"!=typeof n&&(n=!0),!i.canCreate(e))return o(),!1;i.lock();var s="function"==typeof i.settings.create?this.settings.create:function(t){var e={};return e[i.settings.labelField]=t,e[i.settings.valueField]=t,e},a=M(function(t){if(i.unlock(),!t||"object"!=typeof t)return o();var e=S(t[i.settings.valueField]);return"string"!=typeof e?o():(i.setTextboxValue(""),i.addOption(t),i.setCaret(r),i.addItem(e),i.refreshOptions(n&&"single"!==i.settings.mode),void o(t))}),l=s.apply(this,[e,a]);return"undefined"!=typeof l&&a(l),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){var t,e=this;e.isRequired&&(e.items.length&&(e.isInvalid=!1),e.$control_input.prop("required",t)),e.refreshClasses()},refreshClasses:function(){var e=this,n=e.isFull(),i=e.isLocked;e.$wrapper.toggleClass("rtl",e.rtl),e.$control.toggleClass("focus",e.isFocused).toggleClass("disabled",e.isDisabled).toggleClass("required",e.isRequired).toggleClass("invalid",e.isInvalid).toggleClass("locked",i).toggleClass("full",n).toggleClass("not-full",!n).toggleClass("input-active",e.isFocused&&!e.isInputHidden).toggleClass("dropdown-active",e.isOpen).toggleClass("has-options",!t.isEmptyObject(e.options)).toggleClass("has-items",e.items.length>0),e.$control_input.data("grow",!n&&!i)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(t){var e,n,i,r,o=this;if(t=t||{},o.tagType===x){for(i=[],e=0,n=o.items.length;n>e;e++)r=o.options[o.items[e]][o.settings.labelField]||"",i.push('<option value="'+C(o.items[e])+'" selected="selected">'+C(r)+"</option>");i.length||this.$input.attr("multiple")||i.push('<option value="" selected="selected"></option>'),o.$input.html(i.join(""))}else o.$input.val(o.getValue()),o.$input.attr("value",o.$input.val());o.isSetup&&(t.silent||o.trigger("change",o.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var t=this.$control_input;this.items.length?t.removeAttr("placeholder"):t.attr("placeholder",this.settings.placeholder),t.triggerHandler("update",{force:!0})}},open:function(){var t=this;t.isLocked||t.isOpen||"multi"===t.settings.mode&&t.isFull()||(t.focus(),t.isOpen=!0,t.refreshState(),t.$dropdown.css({visibility:"hidden",display:"block"}),t.positionDropdown(),t.$dropdown.css({visibility:"visible"}),t.trigger("dropdown_open",t.$dropdown))},close:function(){var t=this,e=t.isOpen;"single"===t.settings.mode&&t.items.length&&t.hideInput(),t.isOpen=!1,t.$dropdown.hide(),t.setActiveOption(null),t.refreshState(),e&&t.trigger("dropdown_close",t.$dropdown)},positionDropdown:function(){var t=this.$control,e="body"===this.settings.dropdownParent?t.offset():t.position();e.top+=t.outerHeight(!0),this.$dropdown.css({width:t.outerWidth(),top:e.top,left:e.left})},clear:function(t){var e=this;e.items.length&&(e.$control.children(":not(input)").remove(),e.items=[],e.lastQuery=null,e.setCaret(0),e.setActiveItem(null),e.updatePlaceholder(),e.updateOriginalInput({silent:t}),e.refreshState(),e.showInput(),e.trigger("clear"))},insertAtCaret:function(e){var n=Math.min(this.caretPos,this.items.length);0===n?this.$control.prepend(e):t(this.$control[0].childNodes[n]).before(e),this.setCaret(n+1)},deleteSelection:function(e){var n,i,r,o,s,a,l,c,u,h=this;if(r=e&&e.keyCode===g?-1:1,o=L(h.$control_input[0]),h.$activeOption&&!h.settings.hideSelected&&(l=h.getAdjacentOption(h.$activeOption,-1).attr("data-value")),s=[],h.$activeItems.length){for(u=h.$control.children(".active:"+(r>0?"last":"first")),a=h.$control.children(":not(input)").index(u),r>0&&a++,n=0,i=h.$activeItems.length;i>n;n++)s.push(t(h.$activeItems[n]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(h.isFocused||"single"===h.settings.mode)&&h.items.length&&(0>r&&0===o.start&&0===o.length?s.push(h.items[h.caretPos-1]):r>0&&o.start===h.$control_input.val().length&&s.push(h.items[h.caretPos]));if(!s.length||"function"==typeof h.settings.onDelete&&h.settings.onDelete.apply(h,[s])===!1)return!1;for("undefined"!=typeof a&&h.setCaret(a);s.length;)h.removeItem(s.pop());return h.showInput(),h.positionDropdown(),h.refreshOptions(!0),l&&(c=h.getOption(l),c.length&&h.setActiveOption(c)),!0},advanceSelection:function(t,e){var n,i,r,o,s,a,l=this;0!==t&&(l.rtl&&(t*=-1),n=t>0?"last":"first",i=L(l.$control_input[0]),l.isFocused&&!l.isInputHidden?(o=l.$control_input.val().length,s=0>t?0===i.start&&0===i.length:i.start===o,s&&!o&&l.advanceCaret(t,e)):(a=l.$control.children(".active:"+n),a.length&&(r=l.$control.children(":not(input)").index(a),l.setActiveItem(null),l.setCaret(t>0?r+1:r))))},advanceCaret:function(t,e){var n,i,r=this;0!==t&&(n=t>0?"next":"prev",r.isShiftDown?(i=r.$control_input[n](),i.length&&(r.hideInput(),r.setActiveItem(i),e&&e.preventDefault())):r.setCaret(r.caretPos+t))},setCaret:function(e){var n=this;if(e="single"===n.settings.mode?n.items.length:Math.max(0,Math.min(n.items.length,e)),!n.isPending){var i,r,o,s;for(o=n.$control.children(":not(input)"),i=0,r=o.length;r>i;i++)s=t(o[i]).detach(),e>i?n.$control_input.before(s):n.$control.append(s)}n.caretPos=e},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var t=this;t.$input.prop("disabled",!0),t.$control_input.prop("disabled",!0).prop("tabindex",-1),t.isDisabled=!0,t.lock()},enable:function(){var t=this;t.$input.prop("disabled",!1),t.$control_input.prop("disabled",!1).prop("tabindex",t.tabIndex),t.isDisabled=!1,t.unlock()},destroy:function(){var e=this,n=e.eventNS,i=e.revertSettings;e.trigger("destroy"),e.off(),e.$wrapper.remove(),e.$dropdown.remove(),e.$input.html("").append(i.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:i.tabindex}).show(),e.$control_input.removeData("grow"),e.$input.removeData("selectize"),t(window).off(n),t(document).off(n),t(document.body).off(n),delete e.$input[0].selectize},render:function(t,e){var n,i,r="",o=!1,s=this,a=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===t||"item"===t)&&(n=S(e[s.settings.valueField]),o=!!n),o&&(T(s.renderCache[t])||(s.renderCache[t]={}),s.renderCache[t].hasOwnProperty(n))?s.renderCache[t][n]:(r=s.settings.render[t].apply(this,[e,C]),("option"===t||"option_create"===t)&&(r=r.replace(a,"<$1 data-selectable")),"optgroup"===t&&(i=e[s.settings.optgroupValueField]||"",r=r.replace(a,'<$1 data-group="'+P(C(i))+'"')),("option"===t||"item"===t)&&(r=r.replace(a,'<$1 data-value="'+P(C(n||""))+'"')),o&&(s.renderCache[t][n]=r),r)},clearCache:function(t){var e=this;"undefined"==typeof t?e.renderCache={}:delete e.renderCache[t]},canCreate:function(t){var e=this;if(!e.settings.create)return!1;var n=e.settings.createFilter;return!(!t.length||"function"==typeof n&&!n.apply(e,[t])||"string"==typeof n&&!new RegExp(n).test(t)||n instanceof RegExp&&!n.test(t))}}),R.count=0,R.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},t.fn.selectize=function(e){var n=t.fn.selectize.defaults,i=t.extend({},n,e),r=i.dataAttr,o=i.labelField,s=i.valueField,a=i.optgroupField,l=i.optgroupLabelField,c=i.optgroupValueField,u=function(e,n){var a,l,c,u,h=e.attr(r);if(h)for(n.options=JSON.parse(h),a=0,l=n.options.length;l>a;a++)n.items.push(n.options[a][s]);else{var p=t.trim(e.val()||"");if(!i.allowEmptyOption&&!p.length)return;
for(c=p.split(i.delimiter),a=0,l=c.length;l>a;a++)u={},u[o]=c[a],u[s]=c[a],n.options.push(u);n.items=c}},h=function(e,n){var u,h,p,d,f=n.options,g={},m=function(t){var e=r&&t.attr(r);return"string"==typeof e&&e.length?JSON.parse(e):null},y=function(e,r){e=t(e);var l=S(e.attr("value"));if(l||i.allowEmptyOption)if(g.hasOwnProperty(l)){if(r){var c=g[l][a];c?t.isArray(c)?c.push(r):g[l][a]=[c,r]:g[l][a]=r}}else{var u=m(e)||{};u[o]=u[o]||e.text(),u[s]=u[s]||l,u[a]=u[a]||r,g[l]=u,f.push(u),e.is(":selected")&&n.items.push(l)}},v=function(e){var i,r,o,s,a;for(e=t(e),o=e.attr("label"),o&&(s=m(e)||{},s[l]=o,s[c]=o,n.optgroups.push(s)),a=t("option",e),i=0,r=a.length;r>i;i++)y(a[i],o)};for(n.maxItems=e.attr("multiple")?null:1,d=e.children(),u=0,h=d.length;h>u;u++)p=d[u].tagName.toLowerCase(),"optgroup"===p?v(d[u]):"option"===p&&y(d[u])};return this.each(function(){if(!this.selectize){var r,o=t(this),s=this.tagName.toLowerCase(),a=o.attr("placeholder")||o.attr("data-placeholder");a||i.allowEmptyOption||(a=o.children('option[value=""]').text());var l={placeholder:a,options:[],optgroups:[],items:[]};"select"===s?h(o,l):u(o,l),r=new R(o,t.extend(!0,{},n,l,e))}})},t.fn.selectize.defaults=R.defaults,t.fn.selectize.support={validity:k},R.define("drag_drop",function(){if(!t.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var e=this;e.lock=function(){var t=e.lock;return function(){var n=e.$control.data("sortable");return n&&n.disable(),t.apply(e,arguments)}}(),e.unlock=function(){var t=e.unlock;return function(){var n=e.$control.data("sortable");return n&&n.enable(),t.apply(e,arguments)}}(),e.setup=function(){var n=e.setup;return function(){n.apply(this,arguments);var i=e.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:e.isLocked,start:function(t,e){e.placeholder.css("width",e.helper.css("width")),i.css({overflow:"visible"})},stop:function(){i.css({overflow:"hidden"});var n=e.$activeItems?e.$activeItems.slice():null,r=[];i.children("[data-value]").each(function(){r.push(t(this).attr("data-value"))}),e.setValue(r),e.setActiveItem(n)}})}}()}}),R.define("dropdown_header",function(e){var n=this;e=t.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(t){return'<div class="'+t.headerClass+'"><div class="'+t.titleRowClass+'"><span class="'+t.labelClass+'">'+t.title+'</span><a href="javascript:void(0)" class="'+t.closeClass+'">&times;</a></div></div>'}},e),n.setup=function(){var i=n.setup;return function(){i.apply(n,arguments),n.$dropdown_header=t(e.html(e)),n.$dropdown.prepend(n.$dropdown_header)}}()}),R.define("optgroup_columns",function(e){var n=this;e=t.extend({equalizeWidth:!0,equalizeHeight:!0},e),this.getAdjacentOption=function(e,n){var i=e.closest("[data-group]").find("[data-selectable]"),r=i.index(e)+n;return r>=0&&r<i.length?i.eq(r):t()},this.onKeyDown=function(){var t=n.onKeyDown;return function(e){var i,r,o,s;return!this.isOpen||e.keyCode!==c&&e.keyCode!==p?t.apply(this,arguments):(n.ignoreHover=!0,s=this.$activeOption.closest("[data-group]"),i=s.find("[data-selectable]").index(this.$activeOption),s=e.keyCode===c?s.prev("[data-group]"):s.next("[data-group]"),o=s.find("[data-selectable]"),r=o.eq(Math.min(o.length-1,i)),void(r.length&&this.setActiveOption(r)))}}();var i=function(){var t,e=i.width,n=document;return"undefined"==typeof e&&(t=n.createElement("div"),t.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',t=t.firstChild,n.body.appendChild(t),e=i.width=t.offsetWidth-t.clientWidth,n.body.removeChild(t)),e},r=function(){var r,o,s,a,l,c,u;if(u=t("[data-group]",n.$dropdown_content),o=u.length,o&&n.$dropdown_content.width()){if(e.equalizeHeight){for(s=0,r=0;o>r;r++)s=Math.max(s,u.eq(r).height());u.css({height:s})}e.equalizeWidth&&(c=n.$dropdown_content.innerWidth()-i(),a=Math.round(c/o),u.css({width:a}),o>1&&(l=c-a*(o-1),u.eq(o-1).css({width:l})))}};(e.equalizeHeight||e.equalizeWidth)&&(D.after(this,"positionDropdown",r),D.after(this,"refreshOptions",r))}),R.define("remove_button",function(e){if("single"!==this.settings.mode){e=t.extend({label:"&times;",title:"Remove",className:"remove",append:!0},e);var n=this,i='<a href="javascript:void(0)" class="'+e.className+'" tabindex="-1" title="'+C(e.title)+'">'+e.label+"</a>",r=function(t,e){var n=t.search(/(<\/[^>]+>\s*)$/);return t.substring(0,n)+e+t.substring(n)};this.setup=function(){var o=n.setup;return function(){if(e.append){var s=n.settings.render.item;n.settings.render.item=function(){return r(s.apply(this,arguments),i)}}o.apply(this,arguments),this.$control.on("click","."+e.className,function(e){if(e.preventDefault(),!n.isLocked){var i=t(e.currentTarget).parent();n.setActiveItem(i),n.deleteSelection()&&n.setCaret(n.items.length)}})}}()}}),R.define("restore_on_backspace",function(t){var e=this;t.text=t.text||function(t){return t[this.settings.labelField]},this.onKeyDown=function(){var n=e.onKeyDown;return function(e){var i,r;return e.keyCode===g&&""===this.$control_input.val()&&!this.$activeItems.length&&(i=this.caretPos-1,i>=0&&i<this.items.length)?(r=this.options[this.items[i]],this.deleteSelection(e)&&(this.setTextboxValue(t.text.apply(this,[r])),this.refreshOptions(!0)),void e.preventDefault()):n.apply(this,arguments)}}()}),R}),String.prototype.toTitleCase=function(){var t=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;return this.replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(e,n,i){return n>0&&n+e.length!==i.length&&e.search(t)>-1&&":"!==i.charAt(n-2)&&("-"!==i.charAt(n+e.length)||"-"===i.charAt(n-1))&&i.charAt(n-1).search(/[^\s-]/)<0?e.toLowerCase():e.substr(1).search(/[A-Z]|\../)>-1?e:e.charAt(0).toUpperCase()+e.substr(1)})},function(){window.S3Upload=function(){function t(t){var e;null==t&&(t={});for(e in t)this[e]=t[e];this.handleFileSelect(this.file)}return t.prototype.with_credentials=!1,t.prototype.onFinishS3Put=function(t){return console.log("base.onFinishS3Put()",t)},t.prototype.onProgress=function(t,e){return console.log("base.onProgress()",t,e)},t.prototype.onError=function(t){return console.log("base.onError()",t)},t.prototype.handleFileSelect=function(t){return this.onProgress(0,"Upload started."),this.uploadFile(t)},t.prototype.createCORSRequest=function(t,e){var n;return n=new XMLHttpRequest,null!=n.withCredentials?n.open(t,e,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest,n.open(t,e)):n=null,n},t.prototype.executeOnSignedUrl=function(t,e){var n,i,r;return n="uploads/"+t.size+"_"+(new Date).getTime()+"_"+t.name.replace(/\ /gi,"_"),i=this,r=new XMLHttpRequest,r.withCredentials=this.with_credentials,r.open("GET",this.s3_sign_put_url+"?s3_object_type="+this.getFileType(t)+"&s3_object_name="+n,!0),r.overrideMimeType("text/plain; charset=x-user-defined"),r.onreadystatechange=function(){var t,n;if(4===this.readyState&&200===this.status){try{n=JSON.parse(this.responseText)}catch(r){return t=r,i.onError('Signing server returned some ugly/empty JSON: "'+this.responseText+'"'),!1}return e(decodeURIComponent(n.signed_request),n.url)}return 4===this.readyState&&200!==this.status?i.onError("Could not contact request signing server. Status = "+this.status):void 0},r.send()},t.prototype.uploadToS3=function(t,e,n){var i,r,o;return r=this,o=this.createCORSRequest("PUT",e),o?(o.onload=function(){return 200===o.status?(r.onProgress(100,"Upload completed."),r.onFinishS3Put(n)):r.onError("Upload error: "+o.status)},o.onerror=function(){return r.onError("XHR error.")},o.upload.onprogress=function(t){var e;return t.lengthComputable?(e=Math.round(t.loaded/t.total*100),r.onProgress(e,100===e?"Finalizing.":"Uploading.")):void 0}):this.onError("CORS not supported"),i=this.getFileType(t),o.setRequestHeader("Content-Type",i),o.setRequestHeader("x-amz-acl","public-read"),o.send(t)},t.prototype.uploadFile=function(t){var e;return e=this,this.executeOnSignedUrl(t,function(n,i){return e.uploadToS3(t,n,i)})},t.prototype.getFileType=function(t){return t.type||"application/octet-stream"},t}()}.call(this),function(){function t(t,e){var n;t||(t={});for(n in e)t[n]=e[n];return t}function e(){var t,e,n=arguments,i={},r=function(t,e){var n,i;"object"!=typeof t&&(t={});for(i in e)e.hasOwnProperty(i)&&(n=e[i],t[i]=n&&"object"==typeof n&&"[object Array]"!==Object.prototype.toString.call(n)&&"renderTo"!==i&&"number"!=typeof n.nodeType?r(t[i]||{},n):e[i]);return t};for(n[0]===!0&&(i=n[1],n=Array.prototype.slice.call(n,2)),e=n.length,t=0;e>t;t++)i=r(i,n[t]);return i}function n(t,e){return parseInt(t,e||10)}function i(t){return"string"==typeof t}function r(t){return t&&"object"==typeof t}function o(t){return"[object Array]"===Object.prototype.toString.call(t)}function s(t){return"number"==typeof t}function a(t){return ce.log(t)/ce.LN10}function l(t){return ce.pow(10,t)}function c(t,e){for(var n=t.length;n--;)if(t[n]===e){t.splice(n,1);break}}function u(t){return t!==j&&null!==t}function h(t,e,n){var o,s;if(i(e))u(n)?t.setAttribute(e,n):t&&t.getAttribute&&(s=t.getAttribute(e));else if(u(e)&&r(e))for(o in e)t.setAttribute(o,e[o]);return s}function p(t){return o(t)?t:[t]}function d(){var t,e,n=arguments,i=n.length;for(t=0;i>t;t++)if(e=n[t],e!==j&&null!==e)return e}function f(e,n){_e&&!De&&n&&n.opacity!==j&&(n.filter="alpha(opacity="+100*n.opacity+")"),t(e.style,n)}function g(e,n,i,r,o){return e=ae.createElement(e),n&&t(e,n),o&&f(e,{padding:0,border:Re,margin:0}),i&&f(e,i),r&&r.appendChild(e),e}function m(e,n){var i=function(){return j};return i.prototype=new e,t(i.prototype,n),i}function y(t,e,i,r){var o=se.numberFormat,s=z.lang,a=+t||0,l=-1===e?(a.toString().split(".")[1]||"").length:isNaN(e=ge(e))?2:e,c=void 0===i?s.decimalPoint:i,s=void 0===r?s.thousandsSep:r,u=0>a?"-":"",h=String(n(a=ge(a).toFixed(l))),p=h.length>3?h.length%3:0;return o!==y?o(t,e,i,r):u+(p?h.substr(0,p)+s:"")+h.substr(p).replace(/(\d{3})(?=\d)/g,"$1"+s)+(l?c+ge(a-h).toFixed(l).slice(2):"")}function v(t,e){return Array((e||2)+1-String(t).length).join(0)+t}function b(t,e,n){var i=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(i),n.apply(this,t)}}function w(t,e){for(var n,i,r,o,s,a="{",l=!1,c=[];-1!==(a=t.indexOf(a));){if(n=t.slice(0,a),l){for(i=n.split(":"),r=i.shift().split("."),s=r.length,n=e,o=0;s>o;o++)n=n[r[o]];i.length&&(i=i.join(":"),r=/\.([0-9])/,o=z.lang,s=void 0,/f$/.test(i)?(s=(s=i.match(r))?s[1]:-1,null!==n&&(n=y(n,s,o.decimalPoint,i.indexOf(",")>-1?o.thousandsSep:""))):n=B(i,n))}c.push(n),t=t.slice(a+1),a=(l=!l)?"}":"{"}return c.push(t),c.join("")}function x(t){return ce.pow(10,he(ce.log(t)/ce.LN10))}function _(t,e,n,i){var r,n=d(n,1);for(r=t/n,e||(e=[1,2,2.5,5,10],i===!1&&(1===n?e=[1,2,5,10]:.1>=n&&(e=[1/n]))),i=0;i<e.length&&(t=e[i],!(r<=(e[i]+(e[i+1]||e[i]))/2));i++);return t*=n}function k(t,e){var n,i,r=t.length;for(i=0;r>i;i++)t[i].ss_i=i;for(t.sort(function(t,i){return n=e(t,i),0===n?t.ss_i-i.ss_i:n}),i=0;r>i;i++)delete t[i].ss_i}function T(t){for(var e=t.length,n=t[0];e--;)t[e]<n&&(n=t[e]);return n}function S(t){for(var e=t.length,n=t[0];e--;)t[e]>n&&(n=t[e]);return n}function C(t,e){for(var n in t)t[n]&&t[n]!==e&&t[n].destroy&&t[n].destroy(),delete t[n]}function P(t){H||(H=g(je)),t&&H.appendChild(t),H.innerHTML=""}function D(t){return parseFloat(t.toPrecision(14))}function M(t,e){$=d(t,e.animation)}function A(){var t=z.global.useUTC,e=t?"getUTC":"get",n=t?"setUTC":"set";G=z.global.Date||window.Date,q=6e4*(t&&z.global.timezoneOffset||0),X=t?G.UTC:function(t,e,n,i,r,o){return new G(t,e,d(n,1),d(i,0),d(r,0),d(o,0)).getTime()},U=e+"Minutes",J=e+"Hours",K=e+"Day",Z=e+"Date",Q=e+"Month",te=e+"FullYear",ee=n+"Minutes",ne=n+"Hours",ie=n+"Date",re=n+"Month",oe=n+"FullYear"}function O(){}function E(t,e,n,i){this.axis=t,this.pos=e,this.type=n||"",this.isNew=!0,!n&&!i&&this.addLabel()}function L(){this.init.apply(this,arguments)}function N(){this.init.apply(this,arguments)}function I(t,e,n,i,r){var o=t.chart.inverted;this.axis=t,this.isNegative=n,this.options=e,this.x=i,this.total=null,this.points={},this.stack=r,this.alignOptions={align:e.align||(o?n?"left":"right":"center"),verticalAlign:e.verticalAlign||(o?"middle":n?"bottom":"top"),y:d(e.y,o?4:n?14:-6),x:d(e.x,o?n?-6:6:0)},this.textAlign=e.textAlign||(o?n?"right":"left":"center")}var j,R,F,H,z,B,$,V,W,Y,G,X,q,U,J,K,Z,Q,te,ee,ne,ie,re,oe,se,ae=document,le=window,ce=Math,ue=ce.round,he=ce.floor,pe=ce.ceil,de=ce.max,fe=ce.min,ge=ce.abs,me=ce.cos,ye=ce.sin,ve=ce.PI,be=2*ve/360,we=navigator.userAgent,xe=le.opera,_e=/msie/i.test(we)&&!xe,ke=8===ae.documentMode,Te=/AppleWebKit/.test(we),Se=/Firefox/.test(we),Ce=/(Mobile|Android|Windows Phone)/.test(we),Pe="http://www.w3.org/2000/svg",De=!!ae.createElementNS&&!!ae.createElementNS(Pe,"svg").createSVGRect,Me=Se&&parseInt(we.split("Firefox/")[1],10)<4,Ae=!De&&!_e&&!!ae.createElement("canvas").getContext,Oe={},Ee=0,Le=function(){return j},Ne=[],Ie=0,je="div",Re="none",Fe=/^[0-9]+$/,He="stroke-width",ze={};le.Highcharts?Y(16,!0):se=le.Highcharts={},B=function(e,n,i){if(!u(n)||isNaN(n))return"Invalid date";var r,e=d(e,"%Y-%m-%d %H:%M:%S"),o=new G(n-q),s=o[J](),a=o[K](),l=o[Z](),c=o[Q](),h=o[te](),p=z.lang,f=p.weekdays,o=t({a:f[a].substr(0,3),A:f[a],d:v(l),e:l,b:p.shortMonths[c],B:p.months[c],m:v(c+1),y:h.toString().substr(2,2),Y:h,H:v(s),I:v(s%12||12),l:s%12||12,M:v(o[U]()),p:12>s?"AM":"PM",P:12>s?"am":"pm",S:v(o.getSeconds()),L:v(ue(n%1e3),3)},se.dateFormats);for(r in o)for(;-1!==e.indexOf("%"+r);)e=e.replace("%"+r,"function"==typeof o[r]?o[r](n):o[r]);return i?e.substr(0,1).toUpperCase()+e.substr(1):e},Y=function(t,e){var n="Highcharts error #"+t+": www.highcharts.com/errors/"+t;if(e)throw n;le.console&&console.log(n)},W={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:26784e5,year:31556952e3},V={init:function(t,e,n){var i,r,o,e=e||"",s=t.shift,a=e.indexOf("C")>-1,l=a?7:3,e=e.split(" "),n=[].concat(n),c=function(t){for(i=t.length;i--;)"M"===t[i]&&t.splice(i+1,0,t[i+1],t[i+2],t[i+1],t[i+2])};if(a&&(c(e),c(n)),t.isArea&&(r=e.splice(e.length-6,6),o=n.splice(n.length-6,6)),s<=n.length/l&&e.length===n.length)for(;s--;)n=[].concat(n).splice(0,l).concat(n);if(t.shift=0,e.length)for(t=n.length;e.length<t;)s=[].concat(e).splice(e.length-l,l),a&&(s[l-6]=s[l-2],s[l-5]=s[l-1]),e=e.concat(s);return r&&(e=e.concat(r),n=n.concat(o)),[e,n]},step:function(t,e,n,i){var r=[],o=t.length;if(1===n)r=i;else if(o===e.length&&1>n)for(;o--;)i=parseFloat(t[o]),r[o]=isNaN(i)?t[o]:n*parseFloat(e[o]-i)+i;else r=e;return r}},function(e){le.HighchartsAdapter=le.HighchartsAdapter||e&&{init:function(t){var n=e.fx;e.extend(e.easing,{easeOutQuad:function(t,e,n,i,r){return-i*(e/=r)*(e-2)+n}}),e.each(["cur","_default","width","height","opacity"],function(t,i){var r,o=n.step;"cur"===i?o=n.prototype:"_default"===i&&e.Tween&&(o=e.Tween.propHooks[i],i="set"),(r=o[i])&&(o[i]=function(e){var n,e=t?e:this;return"align"!==e.prop?(n=e.elem,n.attr?n.attr(e.prop,"cur"===i?j:e.now):r.apply(this,arguments)):void 0})}),b(e.cssHooks.opacity,"get",function(t,e,n){return e.attr?e.opacity||0:t.call(this,e,n)}),this.addAnimSetter("d",function(e){var n,i=e.elem;e.started||(n=t.init(i,i.d,i.toD),e.start=n[0],e.end=n[1],e.started=!0),i.attr("d",t.step(e.start,e.end,e.pos,i.toD))}),this.each=Array.prototype.forEach?function(t,e){return Array.prototype.forEach.call(t,e)}:function(t,e){var n,i=t.length;for(n=0;i>n;n++)if(e.call(t[n],t[n],n,t)===!1)return n},e.fn.highcharts=function(){var t,e,n="Chart",r=arguments;return this[0]&&(i(r[0])&&(n=r[0],r=Array.prototype.slice.call(r,1)),t=r[0],t!==j&&(t.chart=t.chart||{},t.chart.renderTo=this[0],new se[n](t,r[1]),e=this),t===j&&(e=Ne[h(this[0],"data-highcharts-chart")])),e}},addAnimSetter:function(t,n){e.Tween?e.Tween.propHooks[t]={set:n}:e.fx.step[t]=n},getScript:e.getScript,inArray:e.inArray,adapterRun:function(t,n){return e(t)[n]()},grep:e.grep,map:function(t,e){for(var n=[],i=0,r=t.length;r>i;i++)n[i]=e.call(t[i],t[i],i,t);return n},offset:function(t){return e(t).offset()},addEvent:function(t,n,i){e(t).bind(n,i)},removeEvent:function(t,n,i){var r=ae.removeEventListener?"removeEventListener":"detachEvent";ae[r]&&t&&!t[r]&&(t[r]=function(){}),e(t).unbind(n,i)},fireEvent:function(n,i,r,o){var s,a=e.Event(i),l="detached"+i;!_e&&r&&(delete r.layerX,delete r.layerY,delete r.returnValue),t(a,r),n[i]&&(n[l]=n[i],n[i]=null),e.each(["preventDefault","stopPropagation"],function(t,e){var n=a[e];a[e]=function(){try{n.call(a)}catch(t){"preventDefault"===e&&(s=!0)}}}),e(n).trigger(a),n[l]&&(n[i]=n[l],n[l]=null),o&&!a.isDefaultPrevented()&&!s&&o(a)},washMouseEvent:function(t){var e=t.originalEvent||t;return e.pageX===j&&(e.pageX=t.pageX,e.pageY=t.pageY),e},animate:function(t,n,i){var r=e(t);t.style||(t.style={}),n.d&&(t.toD=n.d,n.d=1),r.stop(),n.opacity!==j&&t.attr&&(n.opacity+="px"),t.hasAnim=1,r.animate(n,i)},stop:function(t){t.hasAnim&&e(t).stop()}}}(le.jQuery);var Be=le.HighchartsAdapter,$e=Be||{};Be&&Be.init.call(Be,V);var Ve=$e.adapterRun,We=$e.getScript,Ye=$e.inArray,Ge=$e.each,Xe=$e.grep,qe=$e.offset,Ue=$e.map,Je=$e.addEvent,Ke=$e.removeEvent,Ze=$e.fireEvent,Qe=$e.washMouseEvent,tn=$e.animate,en=$e.stop,$e={enabled:!0,x:0,y:15,style:{color:"#606060",cursor:"default",fontSize:"11px"}};z={colors:"#7cb5ec,#434348,#90ed7d,#f7a35c,#8085e9,#f15c80,#e4d354,#8085e8,#8d4653,#91e8e1".split(","),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint:".",numericSymbols:"k,M,G,T,P,E".split(","),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/4.0.4/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/4.0.4/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:e($e,{align:"center",enabled:!1,formatter:function(){return null===this.y?"":y(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:De,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">\xe2\u2014\x8f</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:Ce?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var nn=z.plotOptions,Be=nn.line;A();var rn=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,on=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,sn=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,an=function(t){var i,r,o=[];return function(t){t&&t.stops?r=Ue(t.stops,function(t){return an(t[1])}):(i=rn.exec(t))?o=[n(i[1]),n(i[2]),n(i[3]),parseFloat(i[4],10)]:(i=on.exec(t))?o=[n(i[1],16),n(i[2],16),n(i[3],16),1]:(i=sn.exec(t))&&(o=[n(i[1]),n(i[2]),n(i[3]),1])}(t),{get:function(n){var i;return r?(i=e(t),i.stops=[].concat(i.stops),Ge(r,function(t,e){i.stops[e]=[i.stops[e][0],t.get(n)]})):i=o&&!isNaN(o[0])?"rgb"===n?"rgb("+o[0]+","+o[1]+","+o[2]+")":"a"===n?o[3]:"rgba("+o.join(",")+")":t,i},brighten:function(t){if(r)Ge(r,function(e){e.brighten(t)});else if(s(t)&&0!==t){var e;for(e=0;3>e;e++)o[e]+=n(255*t),o[e]<0&&(o[e]=0),o[e]>255&&(o[e]=255)}return this},rgba:o,setOpacity:function(t){return o[3]=t,this}}};O.prototype={opacity:1,textProps:"fontSize,fontWeight,fontFamily,color,lineHeight,width,textDecoration,textShadow,HcTextStroke".split(","),init:function(t,e){this.element="span"===e?g(e):ae.createElementNS(Pe,e),this.renderer=t},animate:function(t,n,i){return n=d(n,$,!0),en(this),n?(n=e(n,{}),i&&(n.complete=i),tn(this,t,n)):(this.attr(t),i&&i()),this},colorGradient:function(t,n,i){var r,s,a,l,c,h,p,d,f,g,m=this.renderer,y=[];if(t.linearGradient?s="linearGradient":t.radialGradient&&(s="radialGradient"),s){a=t[s],l=m.gradients,h=t.stops,f=i.radialReference,o(a)&&(t[s]=a={x1:a[0],y1:a[1],x2:a[2],y2:a[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===s&&f&&!u(a.gradientUnits)&&(a=e(a,{cx:f[0]-f[2]/2+a.cx*f[2],cy:f[1]-f[2]/2+a.cy*f[2],r:a.r*f[2],gradientUnits:"userSpaceOnUse"}));for(g in a)"id"!==g&&y.push(g,a[g]);for(g in h)y.push(h[g]);y=y.join(","),l[y]?t=l[y].attr("id"):(a.id=t="highcharts-"+Ee++,l[y]=c=m.createElement(s).attr(a).add(m.defs),c.stops=[],Ge(h,function(t){0===t[1].indexOf("rgba")?(r=an(t[1]),p=r.get("rgb"),d=r.get("a")):(p=t[1],d=1),t=m.createElement("stop").attr({offset:t[0],"stop-color":p,"stop-opacity":d}).add(c),c.stops.push(t)})),i.setAttribute(n,"url("+m.url+"#"+t+")")}},attr:function(t,e){var n,i,r,o,s=this.element,a=this;if("string"==typeof t&&e!==j&&(n=t,t={},t[n]=e),"string"==typeof t)a=(this[t+"Getter"]||this._defaultGetter).call(this,t,s);else{for(n in t)i=t[n],o=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(n)&&(r||(this.symbolAttr(t),r=!0),o=!0),!this.rotation||"x"!==n&&"y"!==n||(this.doTransform=!0),o||(this[n+"Setter"]||this._defaultSetter).call(this,i,n,s),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(n)&&this.updateShadows(n,i);this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return a},updateShadows:function(t,e){for(var n=this.shadows,i=n.length;i--;)n[i].setAttribute(t,"height"===t?de(e-(n[i].cutHeight||0),0):"d"===t?this.d:e)},addClass:function(t){var e=this.element,n=h(e,"class")||"";return-1===n.indexOf(t)&&h(e,"class",n+" "+t),this},symbolAttr:function(t){var e=this;Ge("x,y,r,start,end,width,height,innerR,anchorX,anchorY".split(","),function(n){e[n]=d(t[n],e[n])}),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})},clip:function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":Re)},crisp:function(t){var e,n,i={},r=t.strokeWidth||this.strokeWidth||0;n=ue(r)%2/2,t.x=he(t.x||this.x||0)+n,t.y=he(t.y||this.y||0)+n,t.width=he((t.width||this.width||0)-2*n),t.height=he((t.height||this.height||0)-2*n),t.strokeWidth=r;for(e in t)this[e]!==t[e]&&(this[e]=i[e]=t[e]);return i},css:function(e){var i,r,o=this.styles,s={},a=this.element,l="";if(i=!o,e&&e.color&&(e.fill=e.color),o)for(r in e)e[r]!==o[r]&&(s[r]=e[r],i=!0);if(i){if(i=this.textWidth=e&&e.width&&"text"===a.nodeName.toLowerCase()&&n(e.width),o&&(e=t(o,s)),this.styles=e,i&&(Ae||!De&&this.renderer.forExport)&&delete e.width,_e&&!De)f(this.element,e);else{o=function(t,e){return"-"+e.toLowerCase()};for(r in e)l+=r.replace(/([A-Z])/g,o)+":"+e[r]+";";h(a,"style",l)}i&&this.added&&this.renderer.buildText(this)}return this},on:function(t,e){var n=this,i=n.element;return F&&"click"===t?(i.ontouchstart=function(t){n.touchEventFired=G.now(),t.preventDefault(),e.call(i,t)},i.onclick=function(t){(-1===we.indexOf("Android")||G.now()-(n.touchEventFired||0)>1100)&&e.call(i,t)}):i["on"+t]=e,this},setRadialReference:function(t){return this.element.radialReference=t,this},translate:function(t,e){return this.attr({translateX:t,translateY:e})},invert:function(){return this.inverted=!0,this.updateTransform(),this},updateTransform:function(){var t=this.translateX||0,e=this.translateY||0,n=this.scaleX,i=this.scaleY,r=this.inverted,o=this.rotation,s=this.element;r&&(t+=this.attr("width"),e+=this.attr("height")),t=["translate("+t+","+e+")"],r?t.push("rotate(90) scale(-1,1)"):o&&t.push("rotate("+o+" "+(s.getAttribute("x")||0)+" "+(s.getAttribute("y")||0)+")"),(u(n)||u(i))&&t.push("scale("+d(n,1)+" "+d(i,1)+")"),t.length&&s.setAttribute("transform",t.join(" "))},toFront:function(){var t=this.element;return t.parentNode.appendChild(t),this},align:function(t,e,n){var r,o,s,a,l={};return o=this.renderer,s=o.alignedObjects,t?(this.alignOptions=t,this.alignByTranslate=e,(!n||i(n))&&(this.alignTo=r=n||"renderer",c(s,this),s.push(this),n=null)):(t=this.alignOptions,e=this.alignByTranslate,r=this.alignTo),n=d(n,o[r],o),r=t.align,o=t.verticalAlign,s=(n.x||0)+(t.x||0),a=(n.y||0)+(t.y||0),("right"===r||"center"===r)&&(s+=(n.width-(t.width||0))/{right:1,center:2}[r]),l[e?"translateX":"x"]=ue(s),("bottom"===o||"middle"===o)&&(a+=(n.height-(t.height||0))/({bottom:1,middle:2}[o]||1)),l[e?"translateY":"y"]=ue(a),this[this.placed?"animate":"attr"](l),this.placed=!0,this.alignAttr=l,this},getBBox:function(){var e,n,i=this.bBox,r=this.renderer,o=this.rotation;e=this.element;var s=this.styles,a=o*be;n=this.textStr;var l;if((""===n||Fe.test(n))&&(l="num."+n.toString().length+(s?"|"+s.fontSize+"|"+s.fontFamily:"")),l&&(i=r.cache[l]),!i){if(e.namespaceURI===Pe||r.forExport){try{i=e.getBBox?t({},e.getBBox()):{width:e.offsetWidth,height:e.offsetHeight}}catch(c){}(!i||i.width<0)&&(i={width:0,height:0})}else i=this.htmlGetBBox();r.isSVG&&(e=i.width,n=i.height,_e&&s&&"11px"===s.fontSize&&"16.9"===n.toPrecision(3)&&(i.height=n=14),o&&(i.width=ge(n*ye(a))+ge(e*me(a)),i.height=ge(n*me(a))+ge(e*ye(a)))),this.bBox=i,l&&(r.cache[l]=i)}return i},show:function(t){return t&&this.element.namespaceURI===Pe?this.element.removeAttribute("visibility"):this.attr({visibility:t?"inherit":"visible"}),this},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(t){var e=this;e.animate({opacity:0},{duration:t||150,complete:function(){e.attr({y:-9999})}})},add:function(t){var e,i,r=this.renderer,o=t||r,s=o.element||r.box,a=this.element,l=this.zIndex;if(t&&(this.parentGroup=t),this.parentInverted=t&&t.inverted,void 0!==this.textStr&&r.buildText(this),l&&(o.handleZ=!0,l=n(l)),o.handleZ)for(t=s.childNodes,e=0;e<t.length;e++)if(r=t[e],o=h(r,"zIndex"),r!==a&&(n(o)>l||!u(l)&&u(o))){s.insertBefore(a,r),i=!0;break}return i||s.appendChild(a),this.added=!0,this.onAdd&&this.onAdd(),this},safeRemoveChild:function(t){var e=t.parentNode;e&&e.removeChild(t)},destroy:function(){var t,e,n=this,i=n.element||{},r=n.shadows,o=n.renderer.isSVG&&"SPAN"===i.nodeName&&n.parentGroup;if(i.onclick=i.onmouseout=i.onmouseover=i.onmousemove=i.point=null,en(n),n.clipPath&&(n.clipPath=n.clipPath.destroy()),n.stops){for(e=0;e<n.stops.length;e++)n.stops[e]=n.stops[e].destroy();n.stops=null}for(n.safeRemoveChild(i),r&&Ge(r,function(t){n.safeRemoveChild(t)});o&&o.div&&0===o.div.childNodes.length;)i=o.parentGroup,n.safeRemoveChild(o.div),delete o.div,o=i;n.alignTo&&c(n.renderer.alignedObjects,n);for(t in n)delete n[t];return null},shadow:function(t,e,n){var i,r,o,s,a,l,c=[],u=this.element;if(t){for(s=d(t.width,3),a=(t.opacity||.15)/s,l=this.parentInverted?"(-1,-1)":"("+d(t.offsetX,1)+", "+d(t.offsetY,1)+")",i=1;s>=i;i++)r=u.cloneNode(0),o=2*s+1-2*i,h(r,{isShadow:"true",stroke:t.color||"black","stroke-opacity":a*i,"stroke-width":o,transform:"translate"+l,fill:Re}),n&&(h(r,"height",de(h(r,"height")-o,0)),r.cutHeight=o),e?e.element.appendChild(r):u.parentNode.insertBefore(r,u),c.push(r);this.shadows=c}return this},xGetter:function(t){return"circle"===this.element.nodeName&&(t={x:"cx",y:"cy"}[t]||t),this._defaultGetter(t)},_defaultGetter:function(t){return t=d(this[t],this.element?this.element.getAttribute(t):null,0),/^[\-0-9\.]+$/.test(t)&&(t=parseFloat(t)),t},dSetter:function(t,e,n){t&&t.join&&(t=t.join(" ")),/(NaN| {2}|^$)/.test(t)&&(t="M 0 0"),n.setAttribute(e,t),this[e]=t},dashstyleSetter:function(t){var e;if(t=t&&t.toLowerCase()){for(t=t.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),e=t.length;e--;)t[e]=n(t[e])*this["stroke-width"];t=t.join(",").replace("NaN","none"),this.element.setAttribute("stroke-dasharray",t)}},alignSetter:function(t){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[t])},opacitySetter:function(t,e,n){this[e]=t,n.setAttribute(e,t)},titleSetter:function(t){var e=this.element.getElementsByTagName("title")[0];e||(e=ae.createElementNS(Pe,"title"),this.element.appendChild(e)),e.textContent=d(t,"").replace(/<[^>]*>/g,"")},textSetter:function(t){t!==this.textStr&&(delete this.bBox,this.textStr=t,this.added&&this.renderer.buildText(this))},fillSetter:function(t,e,n){"string"==typeof t?n.setAttribute(e,t):t&&this.colorGradient(t,e,n)},zIndexSetter:function(t,e,n){n.setAttribute(e,t),this[e]=t},_defaultSetter:function(t,e,n){n.setAttribute(e,t)}},O.prototype.yGetter=O.prototype.xGetter,O.prototype.translateXSetter=O.prototype.translateYSetter=O.prototype.rotationSetter=O.prototype.verticalAlignSetter=O.prototype.scaleXSetter=O.prototype.scaleYSetter=function(t,e){this[e]=t,this.doTransform=!0},O.prototype["stroke-widthSetter"]=O.prototype.strokeSetter=function(t,e,n){this[e]=t,this.stroke&&this["stroke-width"]?(this.strokeWidth=this["stroke-width"],O.prototype.fillSetter.call(this,this.stroke,"stroke",n),n.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===e&&0===t&&this.hasStroke&&(n.removeAttribute("stroke"),this.hasStroke=!1)};var ln=function(){this.init.apply(this,arguments)};ln.prototype={Element:O,init:function(t,e,n,i,r){var o,s=location,i=this.createElement("svg").attr({version:"1.1"}).css(this.getStyle(i));o=i.element,t.appendChild(o),-1===t.innerHTML.indexOf("xmlns")&&h(o,"xmlns",Pe),this.isSVG=!0,this.box=o,this.boxWrapper=i,this.alignedObjects=[],this.url=(Se||Te)&&ae.getElementsByTagName("base").length?s.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(ae.createTextNode("Created with Highcharts 4.0.4")),this.defs=this.createElement("defs").add(),this.forExport=r,this.gradients={},this.cache={},this.setSize(e,n,!1);var a;Se&&t.getBoundingClientRect&&(this.subPixelFix=e=function(){f(t,{left:0,top:0}),a=t.getBoundingClientRect(),f(t,{left:pe(a.left)-a.left+"px",top:pe(a.top)-a.top+"px"})},e(),Je(le,"resize",e))},getStyle:function(e){return this.style=t({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},e)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var t=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),C(this.gradients||{}),this.gradients=null,t&&(this.defs=t.destroy()),this.subPixelFix&&Ke(le,"resize",this.subPixelFix),this.alignedObjects=null},createElement:function(t){var e=new this.Element;return e.init(this,t),e},draw:function(){},buildText:function(t){for(var e,i,r=t.element,o=this,s=o.forExport,a=d(t.textStr,"").toString(),l=-1!==a.indexOf("<"),c=r.childNodes,u=h(r,"x"),p=t.styles,g=t.textWidth,m=p&&p.lineHeight,y=p&&p.HcTextStroke,v=c.length,b=function(t){return m?n(m):o.fontMetrics(/(px|em)$/.test(t&&t.style.fontSize)?t.style.fontSize:p&&p.fontSize||o.style.fontSize||12,t).h
};v--;)r.removeChild(c[v]);l||y||-1!==a.indexOf(" ")?(e=/<.*style="([^"]+)".*>/,i=/<.*href="(http[^"]+)".*>/,g&&!t.added&&this.box.appendChild(r),a=l?a.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[a],""===a[a.length-1]&&a.pop(),Ge(a,function(n,a){var l,c=0,n=n.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");l=n.split("|||"),Ge(l,function(n){if(""!==n||1===l.length){var d,m={},y=ae.createElementNS(Pe,"tspan");if(e.test(n)&&(d=n.match(e)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),h(y,"style",d)),i.test(n)&&!s&&(h(y,"onclick",'location.href="'+n.match(i)[1]+'"'),f(y,{cursor:"pointer"})),n=(n.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">")," "!==n){if(y.appendChild(ae.createTextNode(n)),c?m.dx=0:a&&null!==u&&(m.x=u),h(y,m),r.appendChild(y),!c&&a&&(!De&&s&&f(y,{display:"block"}),h(y,"dy",b(y))),g)for(var v,w,n=n.replace(/([^\^])-/g,"$1- ").split(" "),m=l.length>1||n.length>1&&"nowrap"!==p.whiteSpace,x=p.HcHeight,_=[],k=b(y),T=1;m&&(n.length||_.length);)delete t.bBox,v=t.getBBox(),w=v.width,!De&&o.forExport&&(w=o.measureSpanWidth(y.firstChild.data,t.styles)),v=w>g,v&&1!==n.length?(y.removeChild(y.firstChild),_.unshift(n.pop())):(n=_,_=[],n.length&&(T++,x&&T*k>x?(n=["..."],t.attr("title",t.textStr)):(y=ae.createElementNS(Pe,"tspan"),h(y,{dy:k,x:u}),d&&h(y,"style",d),r.appendChild(y))),w>g&&(g=w)),n.length&&y.appendChild(ae.createTextNode(n.join(" ").replace(/- /g,"-")));c++}}})})):r.appendChild(ae.createTextNode(a))},button:function(n,i,r,o,s,a,l,c,u){var h,p,d,f,g,m,y=this.label(n,i,r,u,null,null,null,null,"button"),v=0,n={x1:0,y1:0,x2:0,y2:1},s=e({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:n,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},s);return d=s.style,delete s.style,a=e(s,{stroke:"#68A",fill:{linearGradient:n,stops:[[0,"#FFF"],[1,"#ACF"]]}},a),f=a.style,delete a.style,l=e(s,{stroke:"#68A",fill:{linearGradient:n,stops:[[0,"#9BD"],[1,"#CDF"]]}},l),g=l.style,delete l.style,c=e(s,{style:{color:"#CCC"}},c),m=c.style,delete c.style,Je(y.element,_e?"mouseover":"mouseenter",function(){3!==v&&y.attr(a).css(f)}),Je(y.element,_e?"mouseout":"mouseleave",function(){3!==v&&(h=[s,a,l][v],p=[d,f,g][v],y.attr(h).css(p))}),y.setState=function(t){(y.state=v=t)?2===t?y.attr(l).css(g):3===t&&y.attr(c).css(m):y.attr(s).css(d)},y.on("click",function(){3!==v&&o.call(y)}).attr(s).css(t({cursor:"default"},d))},crispLine:function(t,e){return t[1]===t[4]&&(t[1]=t[4]=ue(t[1])-e%2/2),t[2]===t[5]&&(t[2]=t[5]=ue(t[2])+e%2/2),t},path:function(e){var n={fill:Re};return o(e)?n.d=e:r(e)&&t(n,e),this.createElement("path").attr(n)},circle:function(t,e,n){return t=r(t)?t:{x:t,y:e,r:n},e=this.createElement("circle"),e.xSetter=function(t){this.element.setAttribute("cx",t)},e.ySetter=function(t){this.element.setAttribute("cy",t)},e.attr(t)},arc:function(t,e,n,i,o,s){return r(t)&&(e=t.y,n=t.r,i=t.innerR,o=t.start,s=t.end,t=t.x),t=this.symbol("arc",t||0,e||0,n||0,n||0,{innerR:i||0,start:o||0,end:s||0}),t.r=n,t},rect:function(t,e,n,i,o,s){var o=r(t)?t.r:o,a=this.createElement("rect"),t=r(t)?t:t===j?{}:{x:t,y:e,width:de(n,0),height:de(i,0)};return s!==j&&(t.strokeWidth=s,t=a.crisp(t)),o&&(t.r=o),a.rSetter=function(t){h(this.element,{rx:t,ry:t})},a.attr(t)},setSize:function(t,e,n){var i=this.alignedObjects,r=i.length;for(this.width=t,this.height=e,this.boxWrapper[d(n,!0)?"animate":"attr"]({width:t,height:e});r--;)i[r].align()},g:function(t){var e=this.createElement("g");return u(t)?e.attr({"class":"highcharts-"+t}):e},image:function(e,n,i,r,o){var s={preserveAspectRatio:Re};return arguments.length>1&&t(s,{x:n,y:i,width:r,height:o}),s=this.createElement("image").attr(s),s.element.setAttributeNS?s.element.setAttributeNS("http://www.w3.org/1999/xlink","href",e):s.element.setAttribute("hc-svg-href",e),s},symbol:function(e,n,i,r,o,s){var a,l,c,u=this.symbols[e],u=u&&u(ue(n),ue(i),r,o,s),h=/^url\((.*?)\)$/;return u?(a=this.path(u),t(a,{symbolName:e,x:n,y:i,width:r,height:o}),s&&t(a,s)):h.test(e)&&(c=function(t,e){t.element&&(t.attr({width:e[0],height:e[1]}),t.alignByTranslate||t.translate(ue((r-e[0])/2),ue((o-e[1])/2)))},l=e.match(h)[1],e=Oe[l]||s&&s.width&&s.height&&[s.width,s.height],a=this.image(l).attr({x:n,y:i}),a.isImg=!0,e?c(a,e):(a.attr({width:0,height:0}),g("img",{onload:function(){c(a,Oe[l]=[this.width,this.height])},src:l}))),a},symbols:{circle:function(t,e,n,i){var r=.166*n;return["M",t+n/2,e,"C",t+n+r,e,t+n+r,e+i,t+n/2,e+i,"C",t-r,e+i,t-r,e,t+n/2,e,"Z"]},square:function(t,e,n,i){return["M",t,e,"L",t+n,e,t+n,e+i,t,e+i,"Z"]},triangle:function(t,e,n,i){return["M",t+n/2,e,"L",t+n,e+i,t,e+i,"Z"]},"triangle-down":function(t,e,n,i){return["M",t,e,"L",t+n,e,t+n/2,e+i,"Z"]},diamond:function(t,e,n,i){return["M",t+n/2,e,"L",t+n,e+i/2,t+n/2,e+i,t,e+i/2,"Z"]},arc:function(t,e,n,i,r){var o=r.start,n=r.r||n||i,s=r.end-.001,i=r.innerR,a=r.open,l=me(o),c=ye(o),u=me(s),s=ye(s),r=r.end-o<ve?0:1;return["M",t+n*l,e+n*c,"A",n,n,0,r,1,t+n*u,e+n*s,a?"M":"L",t+i*u,e+i*s,"A",i,i,0,r,0,t+i*l,e+i*c,a?"":"Z"]},callout:function(t,e,n,i,r){var o=fe(r&&r.r||0,n,i),s=o+6,a=r&&r.anchorX,l=r&&r.anchorY,r=ue(r.strokeWidth||0)%2/2;return t+=r,e+=r,r=["M",t+o,e,"L",t+n-o,e,"C",t+n,e,t+n,e,t+n,e+o,"L",t+n,e+i-o,"C",t+n,e+i,t+n,e+i,t+n-o,e+i,"L",t+o,e+i,"C",t,e+i,t,e+i,t,e+i-o,"L",t,e+o,"C",t,e,t,e,t+o,e],a&&a>n&&l>e+s&&e+i-s>l?r.splice(13,3,"L",t+n,l-6,t+n+6,l,t+n,l+6,t+n,e+i-o):a&&0>a&&l>e+s&&e+i-s>l?r.splice(33,3,"L",t,l+6,t-6,l,t,l-6,t,e+o):l&&l>i&&a>t+s&&t+n-s>a?r.splice(23,3,"L",a+6,e+i,a,e+i+6,a-6,e+i,t+o,e+i):l&&0>l&&a>t+s&&t+n-s>a&&r.splice(3,3,"L",a-6,e,a,e-6,a+6,e,n-o,e),r}},clipRect:function(t,e,n,i){var r="highcharts-"+Ee++,o=this.createElement("clipPath").attr({id:r}).add(this.defs),t=this.rect(t,e,n,i,0).add(o);return t.id=r,t.clipPath=o,t},text:function(t,e,n,i){var r=Ae||!De&&this.forExport,o={};return i&&!this.forExport?this.html(t,e,n):(o.x=Math.round(e||0),n&&(o.y=Math.round(n)),(t||0===t)&&(o.text=t),t=this.createElement("text").attr(o),r&&t.css({position:"absolute"}),i||(t.xSetter=function(t,e,n){var i,r,o=n.getElementsByTagName("tspan"),s=n.getAttribute(e);for(r=0;r<o.length;r++)i=o[r],i.getAttribute(e)===s&&i.setAttribute(e,t);n.setAttribute(e,t)}),t)},fontMetrics:function(t,e){t=t||this.style.fontSize,e&&le.getComputedStyle&&(e=e.element||e,t=le.getComputedStyle(e,"").fontSize);var t=/px/.test(t)?n(t):/em/.test(t)?12*parseFloat(t):12,i=24>t?t+4:ue(1.2*t),r=ue(.8*i);return{h:i,b:r,f:t}},label:function(n,i,r,o,s,a,l,c,h){function p(){var e,n;e=S.element.style,m=(void 0===y||void 0===v||T.styles.textAlign)&&S.textStr&&S.getBBox(),T.width=(y||m.width||0)+2*P+D,T.height=(v||m.height||0)+2*P,x=P+k.fontMetrics(e&&e.fontSize,S).b,_&&(g||(e=ue(-C*P),n=c?-x:0,T.box=g=o?k.symbol(o,e,n,T.width,T.height,A):k.rect(e,n,T.width,T.height,0,A[He]),g.attr("fill",Re).add(T)),g.isImg||g.attr(t({width:ue(T.width),height:ue(T.height)},A)),A=null)}function d(){var t,e=T.styles,e=e&&e.textAlign,n=D+P*(1-C);t=c?0:x,u(y)&&m&&("center"===e||"right"===e)&&(n+={center:.5,right:1}[e]*(y-m.width)),(n!==S.x||t!==S.y)&&(S.attr("x",n),t!==j&&S.attr("y",t)),S.x=n,S.y=t}function f(t,e){g?g.attr(t,e):A[t]=e}var g,m,y,v,b,w,x,_,k=this,T=k.g(h),S=k.text("",0,0,l).attr({zIndex:1}),C=0,P=3,D=0,M=0,A={};T.onAdd=function(){S.add(T),T.attr({text:n||0===n?n:"",x:i,y:r}),g&&u(s)&&T.attr({anchorX:s,anchorY:a})},T.widthSetter=function(t){y=t},T.heightSetter=function(t){v=t},T.paddingSetter=function(t){u(t)&&t!==P&&(P=t,d())},T.paddingLeftSetter=function(t){u(t)&&t!==D&&(D=t,d())},T.alignSetter=function(t){C={left:0,center:.5,right:1}[t]},T.textSetter=function(t){t!==j&&S.textSetter(t),p(),d()},T["stroke-widthSetter"]=function(t,e){t&&(_=!0),M=t%2/2,f(e,t)},T.strokeSetter=T.fillSetter=T.rSetter=function(t,e){"fill"===e&&t&&(_=!0),f(e,t)},T.anchorXSetter=function(t,e){s=t,f(e,t+M-b)},T.anchorYSetter=function(t,e){a=t,f(e,t-w)},T.xSetter=function(t){T.x=t,C&&(t-=C*((y||m.width)+P)),b=ue(t),T.attr("translateX",b)},T.ySetter=function(t){w=T.y=ue(t),T.attr("translateY",w)};var E=T.css;return t(T,{css:function(t){if(t){var n={},t=e(t);Ge(T.textProps,function(e){t[e]!==j&&(n[e]=t[e],delete t[e])}),S.css(n)}return E.call(T,t)},getBBox:function(){return{width:m.width+2*P,height:m.height+2*P,x:m.x-P,y:m.y-P}},shadow:function(t){return g&&g.shadow(t),T},destroy:function(){Ke(T.element,"mouseenter"),Ke(T.element,"mouseleave"),S&&(S=S.destroy()),g&&(g=g.destroy()),O.prototype.destroy.call(T),T=k=p=d=f=null}})}},R=ln,t(O.prototype,{htmlCss:function(e){var n=this.element;return(n=e&&"SPAN"===n.tagName&&e.width)&&(delete e.width,this.textWidth=n,this.updateTransform()),this.styles=t(this.styles,e),f(this.element,e),this},htmlGetBBox:function(){var t=this.element,e=this.bBox;return e||("text"===t.nodeName&&(t.style.position="absolute"),e=this.bBox={x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}),e},htmlUpdateTransform:function(){if(this.added){var t=this.renderer,e=this.element,i=this.translateX||0,r=this.translateY||0,o=this.x||0,s=this.y||0,a=this.textAlign||"left",l={left:0,center:.5,right:1}[a],c=this.shadows;if(f(e,{marginLeft:i,marginTop:r}),c&&Ge(c,function(t){f(t,{marginLeft:i+1,marginTop:r+1})}),this.inverted&&Ge(e.childNodes,function(n){t.invertChild(n,e)}),"SPAN"===e.tagName){var h,p=this.rotation,g=n(this.textWidth),m=[p,a,e.innerHTML,this.textWidth].join(",");m!==this.cTT&&(h=t.fontMetrics(e.style.fontSize).b,u(p)&&this.setSpanRotation(p,l,h),c=d(this.elemWidth,e.offsetWidth),c>g&&/[ \-]/.test(e.textContent||e.innerText)&&(f(e,{width:g+"px",display:"block",whiteSpace:"normal"}),c=g),this.getSpanCorrection(c,h,l,p,a)),f(e,{left:o+(this.xCorr||0)+"px",top:s+(this.yCorr||0)+"px"}),Te&&(h=e.offsetHeight),this.cTT=m}}else this.alignOnAdd=!0},setSpanRotation:function(t,e,n){var i={},r=_e?"-ms-transform":Te?"-webkit-transform":Se?"MozTransform":xe?"-o-transform":"";i[r]=i.transform="rotate("+t+"deg)",i[r+(Se?"Origin":"-origin")]=i.transformOrigin=100*e+"% "+n+"px",f(this.element,i)},getSpanCorrection:function(t,e,n){this.xCorr=-t*n,this.yCorr=-e}}),t(ln.prototype,{html:function(e,n,i){var r=this.createElement("span"),o=r.element,s=r.renderer;return r.textSetter=function(t){t!==o.innerHTML&&delete this.bBox,o.innerHTML=this.textStr=t},r.xSetter=r.ySetter=r.alignSetter=r.rotationSetter=function(t,e){"align"===e&&(e="textAlign"),r[e]=t,r.htmlUpdateTransform()},r.attr({text:e,x:ue(n),y:ue(i)}).css({position:"absolute",whiteSpace:"nowrap",fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),r.css=r.htmlCss,s.isSVG&&(r.add=function(e){var n,i=s.box.parentNode,a=[];if(this.parentGroup=e){if(n=e.div,!n){for(;e;)a.push(e),e=e.parentGroup;Ge(a.reverse(),function(e){var r;n=e.div=e.div||g(je,{className:h(e.element,"class")},{position:"absolute",left:(e.translateX||0)+"px",top:(e.translateY||0)+"px"},n||i),r=n.style,t(e,{translateXSetter:function(t,n){r.left=t+"px",e[n]=t,e.doTransform=!0},translateYSetter:function(t,n){r.top=t+"px",e[n]=t,e.doTransform=!0},visibilitySetter:function(t,e){r[e]=t}})})}}else n=i;return n.appendChild(o),r.added=!0,r.alignOnAdd&&r.htmlUpdateTransform(),r}),r}});var cn;if(!De&&!Ae){cn={init:function(t,e){var n=["<",e,' filled="f" stroked="f"'],i=["position: ","absolute",";"],r=e===je;("shape"===e||r)&&i.push("left:0;top:0;width:1px;height:1px;"),i.push("visibility: ",r?"hidden":"visible"),n.push(' style="',i.join(""),'"/>'),e&&(n=r||"span"===e||"img"===e?n.join(""):t.prepVML(n),this.element=g(n)),this.renderer=t},add:function(t){var e=this.renderer,n=this.element,i=e.box,i=t?t.element||t:i;return t&&t.inverted&&e.invertChild(n,i),i.appendChild(n),this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),this.onAdd&&this.onAdd(),this},updateTransform:O.prototype.htmlUpdateTransform,setSpanRotation:function(){var t=this.rotation,e=me(t*be),n=ye(t*be);f(this.element,{filter:t?["progid:DXImageTransform.Microsoft.Matrix(M11=",e,", M12=",-n,", M21=",n,", M22=",e,", sizingMethod='auto expand')"].join(""):Re})},getSpanCorrection:function(t,e,n,i,r){var o,s=i?me(i*be):1,a=i?ye(i*be):0,l=d(this.elemHeight,this.element.offsetHeight);this.xCorr=0>s&&-t,this.yCorr=0>a&&-l,o=0>s*a,this.xCorr+=a*e*(o?1-n:n),this.yCorr-=s*e*(i?o?n:1-n:1),r&&"left"!==r&&(this.xCorr-=t*n*(0>s?-1:1),i&&(this.yCorr-=l*n*(0>a?-1:1)),f(this.element,{textAlign:r}))},pathToVML:function(t){for(var e=t.length,n=[];e--;)s(t[e])?n[e]=ue(10*t[e])-5:"Z"===t[e]?n[e]="x":(n[e]=t[e],!t.isArc||"wa"!==t[e]&&"at"!==t[e]||(n[e+5]===n[e+7]&&(n[e+7]+=t[e+7]>t[e+5]?1:-1),n[e+6]===n[e+8]&&(n[e+8]+=t[e+8]>t[e+6]?1:-1)));return n.join(" ")||"x"},clip:function(t){var e,n=this;return t?(e=t.members,c(e,n),e.push(n),n.destroyClip=function(){c(e,n)},t=t.getCSS(n)):(n.destroyClip&&n.destroyClip(),t={clip:ke?"inherit":"rect(auto)"}),n.css(t)},css:O.prototype.htmlCss,safeRemoveChild:function(t){t.parentNode&&P(t)},destroy:function(){return this.destroyClip&&this.destroyClip(),O.prototype.destroy.apply(this)},on:function(t,e){return this.element["on"+t]=function(){var t=le.event;t.target=t.srcElement,e(t)},this},cutOffPath:function(t,e){var i,t=t.split(/[ ,]/);return i=t.length,(9===i||11===i)&&(t[i-4]=t[i-2]=n(t[i-2])-10*e),t.join(" ")},shadow:function(t,e,i){var r,o,s,a,l,c,u,h=[],p=this.element,f=this.renderer,m=p.style,y=p.path;if(y&&"string"!=typeof y.value&&(y="x"),l=y,t){for(c=d(t.width,3),u=(t.opacity||.15)/c,r=1;3>=r;r++)a=2*c+1-2*r,i&&(l=this.cutOffPath(y.value,a+.5)),s=['<shape isShadow="true" strokeweight="',a,'" filled="false" path="',l,'" coordsize="10 10" style="',p.style.cssText,'" />'],o=g(f.prepVML(s),null,{left:n(m.left)+d(t.offsetX,1),top:n(m.top)+d(t.offsetY,1)}),i&&(o.cutOff=a+1),s=['<stroke color="',t.color||"black",'" opacity="',u*r,'"/>'],g(f.prepVML(s),null,null,o),e?e.element.appendChild(o):p.parentNode.insertBefore(o,p),h.push(o);this.shadows=h}return this},updateShadows:Le,setAttr:function(t,e){ke?this.element[t]=e:this.element.setAttribute(t,e)},classSetter:function(t){this.element.className=t},dashstyleSetter:function(t,e,n){(n.getElementsByTagName("stroke")[0]||g(this.renderer.prepVML(["<stroke/>"]),null,null,n))[e]=t||"solid",this[e]=t},dSetter:function(t,e,n){var i=this.shadows,t=t||[];if(this.d=t.join&&t.join(" "),n.path=t=this.pathToVML(t),i)for(n=i.length;n--;)i[n].path=i[n].cutOff?this.cutOffPath(t,i[n].cutOff):t;this.setAttr(e,t)},fillSetter:function(t,e,n){var i=n.nodeName;"SPAN"===i?n.style.color=t:"IMG"!==i&&(n.filled=t!==Re,this.setAttr("fillcolor",this.renderer.color(t,n,e,this)))},opacitySetter:Le,rotationSetter:function(t,e,n){n=n.style,this[e]=n[e]=t,n.left=-ue(ye(t*be)+1)+"px",n.top=ue(me(t*be))+"px"},strokeSetter:function(t,e,n){this.setAttr("strokecolor",this.renderer.color(t,n,e))},"stroke-widthSetter":function(t,e,n){n.stroked=!!t,this[e]=t,s(t)&&(t+="px"),this.setAttr("strokeweight",t)},titleSetter:function(t,e){this.setAttr(e,t)},visibilitySetter:function(t,e,n){"inherit"===t&&(t="visible"),this.shadows&&Ge(this.shadows,function(n){n.style[e]=t}),"DIV"===n.nodeName&&(t="hidden"===t?"-999em":0,ke||(n.style[e]=t?"visible":"hidden"),e="top"),n.style[e]=t},xSetter:function(t,e,n){this[e]=t,"x"===e?e="left":"y"===e&&(e="top"),this.updateClipping?(this[e]=t,this.updateClipping()):n.style[e]=t},zIndexSetter:function(t,e,n){n.style[e]=t}},se.VMLElement=cn=m(O,cn),cn.prototype.ySetter=cn.prototype.widthSetter=cn.prototype.heightSetter=cn.prototype.xSetter;var un={Element:cn,isIE8:we.indexOf("MSIE 8.0")>-1,init:function(e,n,i,r){var o;if(this.alignedObjects=[],r=this.createElement(je).css(t(this.getStyle(r),{position:"relative"})),o=r.element,e.appendChild(r.element),this.isVML=!0,this.box=o,this.boxWrapper=r,this.cache={},this.setSize(n,i,!1),!ae.namespaces.hcv){ae.namespaces.add("hcv","urn:schemas-microsoft-com:vml");try{ae.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}catch(s){ae.styleSheets[0].cssText+="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(e,n,i,o){var s=this.createElement(),a=r(e);return t(s,{members:[],left:(a?e.x:e)+1,top:(a?e.y:n)+1,width:(a?e.width:i)-1,height:(a?e.height:o)-1,getCSS:function(e){var n=e.element,i=n.nodeName,e=e.inverted,r=this.top-("shape"===i?n.offsetTop:0),o=this.left,n=o+this.width,s=r+this.height,r={clip:"rect("+ue(e?o:r)+"px,"+ue(e?s:n)+"px,"+ue(e?n:s)+"px,"+ue(e?r:o)+"px)"};return!e&&ke&&"DIV"===i&&t(r,{width:n+"px",height:s+"px"}),r},updateClipping:function(){Ge(s.members,function(t){t.element&&t.css(s.getCSS(t))})}})},color:function(t,e,n,i){var r,o,s,a=this,l=/^rgba/,c=Re;if(t&&t.linearGradient?s="gradient":t&&t.radialGradient&&(s="pattern"),s){var u,h,p,d,f,m,y,v,b=t.linearGradient||t.radialGradient,w="",t=t.stops,x=[],_=function(){o=['<fill colors="'+x.join(",")+'" opacity="',f,'" o:opacity2="',d,'" type="',s,'" ',w,'focus="100%" method="any" />'],g(a.prepVML(o),null,null,e)};if(p=t[0],v=t[t.length-1],p[0]>0&&t.unshift([0,p[1]]),v[0]<1&&t.push([1,v[1]]),Ge(t,function(t,e){l.test(t[1])?(r=an(t[1]),u=r.get("rgb"),h=r.get("a")):(u=t[1],h=1),x.push(100*t[0]+"% "+u),e?(f=h,m=u):(d=h,y=u)}),"fill"===n)if("gradient"===s)n=b.x1||b[0]||0,t=b.y1||b[1]||0,p=b.x2||b[2]||0,b=b.y2||b[3]||0,w='angle="'+(90-180*ce.atan((b-t)/(p-n))/ve)+'"',_();else{var k,c=b.r,T=2*c,S=2*c,C=b.cx,P=b.cy,D=e.radialReference,c=function(){D&&(k=i.getBBox(),C+=(D[0]-k.x)/k.width-.5,P+=(D[1]-k.y)/k.height-.5,T*=D[2]/k.width,S*=D[2]/k.height),w='src="'+z.global.VMLRadialGradientURL+'" size="'+T+","+S+'" origin="0.5,0.5" position="'+C+","+P+'" color2="'+y+'" ',_()};i.added?c():i.onAdd=c,c=m}else c=u}else l.test(t)&&"IMG"!==e.tagName?(r=an(t),o=["<",n,' opacity="',r.get("a"),'"/>'],g(this.prepVML(o),null,null,e),c=r.get("rgb")):(c=e.getElementsByTagName(n),c.length&&(c[0].opacity=1,c[0].type="solid"),c=t);return c},prepVML:function(t){var e=this.isIE8,t=t.join("");return e?(t=t.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),t=-1===t.indexOf('style="')?t.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):t.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):t=t.replace("<","<hcv:"),t},text:ln.prototype.html,path:function(e){var n={coordsize:"10 10"};return o(e)?n.d=e:r(e)&&t(n,e),this.createElement("shape").attr(n)},circle:function(t,e,n){var i=this.symbol("circle");return r(t)&&(n=t.r,e=t.y,t=t.x),i.isCircle=!0,i.r=n,i.attr({x:t,y:e})},g:function(t){var e;return t&&(e={className:"highcharts-"+t,"class":"highcharts-"+t}),this.createElement(je).attr(e)},image:function(t,e,n,i,r){var o=this.createElement("img").attr({src:t});return arguments.length>1&&o.attr({x:e,y:n,width:i,height:r}),o},createElement:function(t){return"rect"===t?this.symbol(t):ln.prototype.createElement.call(this,t)},invertChild:function(t,e){var i=this,r=e.style,o="IMG"===t.tagName&&t.style;f(t,{flip:"x",left:n(r.width)-(o?n(o.top):1),top:n(r.height)-(o?n(o.left):1),rotation:-90}),Ge(t.childNodes,function(e){i.invertChild(e,t)})},symbols:{arc:function(t,e,n,i,r){var o=r.start,s=r.end,a=r.r||n||i,n=r.innerR,i=me(o),l=ye(o),c=me(s),u=ye(s);return s-o===0?["x"]:(o=["wa",t-a,e-a,t+a,e+a,t+a*i,e+a*l,t+a*c,e+a*u],r.open&&!n&&o.push("e","M",t,e),o.push("at",t-n,e-n,t+n,e+n,t+n*c,e+n*u,t+n*i,e+n*l,"x","e"),o.isArc=!0,o)},circle:function(t,e,n,i,r){return r&&(n=i=2*r.r),r&&r.isCircle&&(t-=n/2,e-=i/2),["wa",t,e,t+n,e+i,t+n,e+i/2,t+n,e+i/2,"e"]},rect:function(t,e,n,i,r){return ln.prototype.symbols[u(r)&&r.r?"callout":"square"].call(0,t,e,n,i,r)}}};se.VMLRenderer=cn=function(){this.init.apply(this,arguments)},cn.prototype=e(ln.prototype,un),R=cn}ln.prototype.measureSpanWidth=function(t,e){var n,i=ae.createElement("span");return n=ae.createTextNode(t),i.appendChild(n),f(i,e),this.box.appendChild(i),n=i.offsetWidth,P(i),n};var hn;Ae&&(se.CanVGRenderer=cn=function(){Pe="http://www.w3.org/1999/xhtml"},cn.prototype.symbols={},hn=function(){function t(){var t,n=e.length;for(t=0;n>t;t++)e[t]();e=[]}var e=[];return{push:function(n,i){0===e.length&&We(i,t),e.push(n)}}}(),R=cn),E.prototype={addLabel:function(){var e,n=this.axis,i=n.options,r=n.chart,o=n.horiz,a=n.categories,c=n.names,h=this.pos,p=i.labels,f=p.rotation,g=n.tickPositions,o=o&&a&&!p.step&&!p.staggerLines&&!p.rotation&&r.plotWidth/g.length||!o&&(r.margin[3]||.33*r.chartWidth),m=h===g[0],y=h===g[g.length-1],c=a?d(a[h],c[h],h):h,a=this.label,v=g.info;n.isDatetimeAxis&&v&&(e=i.dateTimeLabelFormats[v.higherRanks[h]||v.unitName]),this.isFirst=m,this.isLast=y,i=n.labelFormatter.call({axis:n,chart:r,isFirst:m,isLast:y,dateTimeLabelFormat:e,value:n.isLog?D(l(c)):c}),h=o&&{width:de(1,ue(o-2*(p.padding||10)))+"px"},u(a)?a&&a.attr({text:i}).css(h):(e={align:n.labelAlign},s(f)&&(e.rotation=f),o&&p.ellipsis&&(h.HcHeight=n.len/g.length),this.label=a=u(i)&&p.enabled?r.renderer.text(i,0,0,p.useHTML).attr(e).css(t(h,p.style)).add(n.labelGroup):null,n.tickBaseline=r.renderer.fontMetrics(p.style.fontSize,a).b,f&&2===n.side&&(n.tickBaseline*=me(f*be))),this.yOffset=a?d(p.y,n.tickBaseline+(2===n.side?8:-(a.getBBox().height/2))):0},getLabelSize:function(){var t=this.label,e=this.axis;return t?t.getBBox()[e.horiz?"height":"width"]:0},getLabelSides:function(){var t=this.label.getBBox(),e=this.axis,n=e.horiz,i=e.options.labels,t=n?t.width:t.height,e=n?i.x-t*{left:0,center:.5,right:1}[e.labelAlign]:0;return[e,n?t+e:t]},handleOverflow:function(t,e){var n,i,r,o=!0,s=this.axis,a=this.isFirst,l=this.isLast,c=s.horiz?e.x:e.y,u=s.reversed,h=s.tickPositions,p=this.getLabelSides(),d=p[0],p=p[1],f=this.label.line;if(n=f||0,i=s.labelEdge,r=s.justifyLabels&&(a||l),i[n]===j||c+d>i[n]?i[n]=c+p:r||(o=!1),r){n=(i=s.justifyToPlot)?s.pos:0,i=i?n+s.len:s.chart.chartWidth;do t+=a?1:-1,r=s.ticks[h[t]];while(h[t]&&(!r||!r.label||r.label.line!==f));s=r&&r.label.xy&&r.label.xy.x+r.getLabelSides()[a?0:1],a&&!u||l&&u?n>c+d&&(c=n-d,r&&c+p>s&&(o=!1)):c+p>i&&(c=i-p,r&&s>c+d&&(o=!1)),e.x=c}return o},getPosition:function(t,e,n,i){var r=this.axis,o=r.chart,s=i&&o.oldChartHeight||o.chartHeight;return{x:t?r.translate(e+n,null,null,i)+r.transB:r.left+r.offset+(r.opposite?(i&&o.oldChartWidth||o.chartWidth)-r.right-r.left:0),y:t?s-r.bottom+r.offset-(r.opposite?r.height:0):s-r.translate(e+n,null,null,i)-r.transB}},getLabelPosition:function(t,e,n,i,r,o,s,a){var l=this.axis,c=l.transA,u=l.reversed,h=l.staggerLines,t=t+r.x-(o&&i?o*c*(u?-1:1):0),e=e+this.yOffset-(o&&!i?o*c*(u?1:-1):0);return h&&(n.line=s/(a||1)%h,e+=n.line*(l.labelOffset/h)),{x:t,y:e}},getMarkPath:function(t,e,n,i,r,o){return o.crispLine(["M",t,e,"L",t+(r?0:-n),e+(r?n:0)],i)},render:function(t,e,n){var i=this.axis,r=i.options,o=i.chart.renderer,s=i.horiz,a=this.type,l=this.label,c=this.pos,u=r.labels,h=this.gridLine,p=a?a+"Grid":"grid",f=a?a+"Tick":"tick",g=r[p+"LineWidth"],m=r[p+"LineColor"],y=r[p+"LineDashStyle"],v=r[f+"Length"],p=r[f+"Width"]||0,b=r[f+"Color"],w=r[f+"Position"],f=this.mark,x=u.step,_=!0,k=i.tickmarkOffset,T=this.getPosition(s,c,k,e),S=T.x,T=T.y,C=s&&S===i.pos+i.len||!s&&T===i.pos?-1:1,n=d(n,1);this.isActive=!0,g&&(c=i.getPlotLinePath(c+k,g*C,e,!0),h===j&&(h={stroke:m,"stroke-width":g},y&&(h.dashstyle=y),a||(h.zIndex=1),e&&(h.opacity=0),this.gridLine=h=g?o.path(c).attr(h).add(i.gridGroup):null),!e&&h&&c&&h[this.isNew?"attr":"animate"]({d:c,opacity:n})),p&&v&&("inside"===w&&(v=-v),i.opposite&&(v=-v),a=this.getMarkPath(S,T,v,p*C,s,o),f?f.animate({d:a,opacity:n}):this.mark=o.path(a).attr({stroke:b,"stroke-width":p,opacity:n}).add(i.axisGroup)),l&&!isNaN(S)&&(l.xy=T=this.getLabelPosition(S,T,l,s,u,k,t,x),this.isFirst&&!this.isLast&&!d(r.showFirstLabel,1)||this.isLast&&!this.isFirst&&!d(r.showLastLabel,1)?_=!1:!i.isRadial&&!u.step&&!u.rotation&&!e&&0!==n&&(_=this.handleOverflow(t,T)),x&&t%x&&(_=!1),_&&!isNaN(T.y)?(T.opacity=n,l[this.isNew?"attr":"animate"](T),this.isNew=!1):l.attr("y",-9999))},destroy:function(){C(this,this.axis)}},se.PlotLineOrBand=function(t,e){this.axis=t,e&&(this.options=e,this.id=e.id)},se.PlotLineOrBand.prototype={render:function(){var t,n=this,i=n.axis,r=i.horiz,o=(i.pointRange||0)/2,s=n.options,l=s.label,c=n.label,h=s.width,p=s.to,d=s.from,f=u(d)&&u(p),g=s.value,m=s.dashStyle,y=n.svgElem,v=[],b=s.color,w=s.zIndex,x=s.events,_={},k=i.chart.renderer;if(i.isLog&&(d=a(d),p=a(p),g=a(g)),h)v=i.getPlotLinePath(g,h),_={stroke:b,"stroke-width":h},m&&(_.dashstyle=m);else{if(!f)return;d=de(d,i.min-o),p=fe(p,i.max+o),v=i.getPlotBandPath(d,p,s),b&&(_.fill=b),s.borderWidth&&(_.stroke=s.borderColor,_["stroke-width"]=s.borderWidth)}if(u(w)&&(_.zIndex=w),y)v?y.animate({d:v},null,y.onGetPath):(y.hide(),y.onGetPath=function(){y.show()},c&&(n.label=c=c.destroy()));else if(v&&v.length&&(n.svgElem=y=k.path(v).attr(_).add(),x))for(t in o=function(t){y.on(t,function(e){x[t].apply(n,[e])})},x)o(t);return l&&u(l.text)&&v&&v.length&&i.width>0&&i.height>0?(l=e({align:r&&f&&"center",x:r?!f&&4:10,verticalAlign:!r&&f&&"middle",y:r?f?16:10:f?6:-4,rotation:r&&!f&&90},l),c||(_={align:l.textAlign||l.align,rotation:l.rotation},u(w)&&(_.zIndex=w),n.label=c=k.text(l.text,0,0,l.useHTML).attr(_).css(l.style).add()),i=[v[1],v[4],f?v[6]:v[1]],f=[v[2],v[5],f?v[7]:v[2]],v=T(i),r=T(f),c.align(l,!1,{x:v,y:r,width:S(i)-v,height:S(f)-r}),c.show()):c&&c.hide(),n},destroy:function(){c(this.axis.plotLinesAndBands,this),delete this.axis,C(this)}},L.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:$e,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return y(this.total,-1)},style:$e.style}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-15},title:{rotation:0}},init:function(t,e){var n=e.isX;this.horiz=t.inverted?!n:n,this.coll=(this.isXAxis=n)?"xAxis":"yAxis",this.opposite=e.opposite,this.side=e.side||(this.horiz?this.opposite?0:2:this.opposite?1:3),this.setOptions(e);var i=this.options,r=i.type;this.labelFormatter=i.labels.formatter||this.defaultLabelFormatter,this.userOptions=e,this.minPixelPadding=0,this.chart=t,this.reversed=i.reversed,this.zoomEnabled=i.zoomEnabled!==!1,this.categories=i.categories||"category"===r,this.names=[],this.isLog="logarithmic"===r,this.isDatetimeAxis="datetime"===r,this.isLinked=u(i.linkedTo),this.tickmarkOffset=this.categories&&"between"===i.tickmarkPlacement&&1===d(i.tickInterval,1)?.5:0,this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=i.minRange||i.maxZoom,this.range=i.range,this.offset=i.offset||0,this.stacks={},this.oldStacks={},this.min=this.max=null,this.crosshair=d(i.crosshair,p(t.options.tooltip.crosshairs)[n?0:1],!1);var o,i=this.options.events;-1===Ye(this,t.axes)&&(n&&!this.isColorAxis?t.axes.splice(t.xAxis.length,0,this):t.axes.push(this),t[this.coll].push(this)),this.series=this.series||[],t.inverted&&n&&this.reversed===j&&(this.reversed=!0),this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine;for(o in i)Je(this,o,i[o]);this.isLog&&(this.val2lin=a,this.lin2val=l)},setOptions:function(t){this.options=e(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],e(z[this.coll],t))},defaultLabelFormatter:function(){var t,e=this.axis,n=this.value,i=e.categories,r=this.dateTimeLabelFormat,o=z.lang.numericSymbols,s=o&&o.length,a=e.options.labels.format,e=e.isLog?n:e.tickInterval;if(a)t=w(a,this);else if(i)t=n;else if(r)t=B(r,n);else if(s&&e>=1e3)for(;s--&&t===j;)i=Math.pow(1e3,s+1),e>=i&&null!==o[s]&&(t=y(n/i,-1)+o[s]);return t===j&&(t=ge(n)>=1e4?y(n,0):y(n,-1,j,"")),t},getSeriesExtremes:function(){var t=this,e=t.chart;t.hasVisibleSeries=!1,t.dataMin=t.dataMax=t.ignoreMinPadding=t.ignoreMaxPadding=null,t.buildStacks&&t.buildStacks(),Ge(t.series,function(n){if(n.visible||!e.options.chart.ignoreHiddenSeries){var i;i=n.options.threshold;var r;t.hasVisibleSeries=!0,t.isLog&&0>=i&&(i=null),t.isXAxis?(i=n.xData,i.length&&(t.dataMin=fe(d(t.dataMin,i[0]),T(i)),t.dataMax=de(d(t.dataMax,i[0]),S(i)))):(n.getExtremes(),r=n.dataMax,n=n.dataMin,u(n)&&u(r)&&(t.dataMin=fe(d(t.dataMin,n),n),t.dataMax=de(d(t.dataMax,r),r)),u(i)&&(t.dataMin>=i?(t.dataMin=i,t.ignoreMinPadding=!0):t.dataMax<i&&(t.dataMax=i,t.ignoreMaxPadding=!0)))}})},translate:function(t,e,n,i,r,o){var a=1,l=0,c=i?this.oldTransA:this.transA,i=i?this.oldMin:this.min,u=this.minPixelPadding,r=(this.options.ordinal||this.isLog&&r)&&this.lin2val;return c||(c=this.transA),n&&(a*=-1,l=this.len),this.reversed&&(a*=-1,l-=a*(this.sector||this.len)),e?(t=t*a+l,t-=u,t=t/c+i,r&&(t=this.lin2val(t))):(r&&(t=this.val2lin(t)),"between"===o&&(o=.5),t=a*(t-i)*c+l+a*u+(s(o)?c*o*this.pointRange:0)),t},toPixels:function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(t,e,n,i,r){var o,s,a,l=this.chart,c=this.left,u=this.top,h=n&&l.oldChartHeight||l.chartHeight,p=n&&l.oldChartWidth||l.chartWidth;return o=this.transB,r=d(r,this.translate(t,null,null,n)),t=n=ue(r+o),o=s=ue(h-r-o),isNaN(r)?a=!0:this.horiz?(o=u,s=h-this.bottom,(c>t||t>c+this.width)&&(a=!0)):(t=c,n=p-this.right,(u>o||o>u+this.height)&&(a=!0)),a&&!i?null:l.renderer.crispLine(["M",t,o,"L",n,s],e||1)},getLinearTickPositions:function(t,e,n){var i,r=D(he(e/t)*t),o=D(pe(n/t)*t),a=[];if(e===n&&s(e))return[e];for(e=r;o>=e&&(a.push(e),e=D(e+t),e!==i);)i=e;return a},getMinorTickPositions:function(){var t,e=this.options,n=this.tickPositions,i=this.minorTickInterval,r=[];if(this.isLog)for(t=n.length,e=1;t>e;e++)r=r.concat(this.getLogTickPositions(i,n[e-1],n[e],!0));else if(this.isDatetimeAxis&&"auto"===e.minorTickInterval)r=r.concat(this.getTimeTicks(this.normalizeTimeTickInterval(i),this.min,this.max,e.startOfWeek)),r[0]<this.min&&r.shift();else for(n=this.min+(n[0]-this.min)%i;n<=this.max;n+=i)r.push(n);return r},adjustForMinRange:function(){var t,e,n,i,r,o,s=this.options,a=this.min,l=this.max,c=this.dataMax-this.dataMin>=this.minRange;if(this.isXAxis&&this.minRange===j&&!this.isLog&&(u(s.min)||u(s.max)?this.minRange=null:(Ge(this.series,function(t){for(r=t.xData,n=o=t.xIncrement?1:r.length-1;n>0;n--)i=r[n]-r[n-1],(e===j||e>i)&&(e=i)}),this.minRange=fe(5*e,this.dataMax-this.dataMin))),l-a<this.minRange){var h=this.minRange;t=(h-l+a)/2,t=[a-t,d(s.min,a-t)],c&&(t[2]=this.dataMin),a=S(t),l=[a+h,d(s.max,a+h)],c&&(l[2]=this.dataMax),l=T(l),h>l-a&&(t[0]=l-h,t[1]=d(s.min,l-h),a=S(t))}this.min=a,this.max=l},setAxisTranslation:function(t){var e,n=this,r=n.max-n.min,o=n.axisPointRange||0,s=0,a=0,l=n.linkedParent,c=!!n.categories,h=n.transA;(n.isXAxis||c||o)&&(l?(s=l.minPointOffset,a=l.pointRangePadding):Ge(n.series,function(t){var l=c?1:n.isXAxis?t.pointRange:n.axisPointRange||0,h=t.options.pointPlacement,p=t.closestPointRange;l>r&&(l=0),o=de(o,l),s=de(s,i(h)?0:l/2),a=de(a,"on"===h?0:l),!t.noSharedTooltip&&u(p)&&(e=u(e)?fe(e,p):p)}),l=n.ordinalSlope&&e?n.ordinalSlope/e:1,n.minPointOffset=s*=l,n.pointRangePadding=a*=l,n.pointRange=fe(o,r),n.closestPointRange=e),t&&(n.oldTransA=h),n.translationSlope=n.transA=h=n.len/(r+a||1),n.transB=n.horiz?n.left:n.bottom,n.minPixelPadding=h*s},setTickPositions:function(t){var e,n=this,i=n.chart,r=n.options,o=r.startOnTick,l=r.endOnTick,c=n.isLog,h=n.isDatetimeAxis,p=n.isXAxis,f=n.isLinked,g=n.options.tickPositioner,m=r.maxPadding,y=r.minPadding,v=r.tickInterval,b=r.minTickInterval,w=r.tickPixelInterval,k=n.categories;f?(n.linkedParent=i[n.coll][r.linkedTo],i=n.linkedParent.getExtremes(),n.min=d(i.min,i.dataMin),n.max=d(i.max,i.dataMax),r.type!==n.linkedParent.options.type&&Y(11,1)):(n.min=d(n.userMin,r.min,n.dataMin),n.max=d(n.userMax,r.max,n.dataMax)),c&&(!t&&fe(n.min,d(n.dataMin,n.min))<=0&&Y(10,1),n.min=D(a(n.min)),n.max=D(a(n.max))),n.range&&u(n.max)&&(n.userMin=n.min=de(n.min,n.max-n.range),n.userMax=n.max,n.range=null),n.beforePadding&&n.beforePadding(),n.adjustForMinRange(),k||n.axisPointRange||n.usePercentage||f||!u(n.min)||!u(n.max)||!(i=n.max-n.min)||(u(r.min)||u(n.userMin)||!y||!(n.dataMin<0)&&n.ignoreMinPadding||(n.min-=i*y),u(r.max)||u(n.userMax)||!m||!(n.dataMax>0)&&n.ignoreMaxPadding||(n.max+=i*m)),s(r.floor)&&(n.min=de(n.min,r.floor)),s(r.ceiling)&&(n.max=fe(n.max,r.ceiling)),n.min===n.max||void 0===n.min||void 0===n.max?n.tickInterval=1:f&&!v&&w===n.linkedParent.options.tickPixelInterval?n.tickInterval=n.linkedParent.tickInterval:(n.tickInterval=d(v,k?1:(n.max-n.min)*w/de(n.len,w)),!u(v)&&n.len<w&&!this.isRadial&&!this.isLog&&!k&&o&&l&&(e=!0,n.tickInterval/=4)),p&&!t&&Ge(n.series,function(t){t.processData(n.min!==n.oldMin||n.max!==n.oldMax)
}),n.setAxisTranslation(!0),n.beforeSetTickPositions&&n.beforeSetTickPositions(),n.postProcessTickInterval&&(n.tickInterval=n.postProcessTickInterval(n.tickInterval)),n.pointRange&&(n.tickInterval=de(n.pointRange,n.tickInterval)),!v&&n.tickInterval<b&&(n.tickInterval=b),h||c||v||(n.tickInterval=_(n.tickInterval,null,x(n.tickInterval),d(r.allowDecimals,!(n.tickInterval>1&&n.tickInterval<5&&n.max>1e3&&n.max<9999)))),n.minorTickInterval="auto"===r.minorTickInterval&&n.tickInterval?n.tickInterval/5:r.minorTickInterval,n.tickPositions=t=r.tickPositions?[].concat(r.tickPositions):g&&g.apply(n,[n.min,n.max]),t||(!n.ordinalPositions&&(n.max-n.min)/n.tickInterval>de(2*n.len,200)&&Y(19,!0),t=h?n.getTimeTicks(n.normalizeTimeTickInterval(n.tickInterval,r.units),n.min,n.max,r.startOfWeek,n.ordinalPositions,n.closestPointRange,!0):c?n.getLogTickPositions(n.tickInterval,n.min,n.max):n.getLinearTickPositions(n.tickInterval,n.min,n.max),e&&t.splice(1,t.length-2),n.tickPositions=t),f||(r=t[0],c=t[t.length-1],h=n.minPointOffset||0,o?n.min=r:n.min-h>r&&t.shift(),l?n.max=c:n.max+h<c&&t.pop(),0===t.length&&u(r)&&t.push((c+r)/2),1===t.length&&(o=ge(n.max)>1e13?1:.001,n.min-=o,n.max+=o))},setMaxTicks:function(){var t=this.chart,e=t.maxTicks||{},n=this.tickPositions,i=this._maxTicksKey=[this.coll,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&n&&n.length>(e[i]||0)&&this.options.alignTicks!==!1&&(e[i]=n.length),t.maxTicks=e},adjustTickAmount:function(){var t=this._maxTicksKey,e=this.tickPositions,n=this.chart.maxTicks;if(n&&n[t]&&!this.isDatetimeAxis&&!this.categories&&!this.isLinked&&this.options.alignTicks!==!1&&this.min!==j){var i=this.tickAmount,r=e.length;if(this.tickAmount=t=n[t],t>r){for(;e.length<t;)e.push(D(e[e.length-1]+this.tickInterval));this.transA*=(r-1)/(t-1),this.max=e[e.length-1]}u(i)&&t!==i&&(this.isDirty=!0)}},setScale:function(){var t,e,n,i,r=this.stacks;if(this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),i=this.len!==this.oldAxisLength,Ge(this.series,function(t){(t.isDirtyData||t.isDirty||t.xAxis.isDirty)&&(n=!0)}),i||n||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax){if(!this.isXAxis)for(t in r)for(e in r[t])r[t][e].total=null,r[t][e].cum=0;this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickPositions(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=i||this.min!==this.oldMin||this.max!==this.oldMax)}else if(!this.isXAxis){this.oldStacks&&(r=this.stacks=this.oldStacks);for(t in r)for(e in r[t])r[t][e].cum=r[t][e].total}this.setMaxTicks()},setExtremes:function(e,n,i,r,o){var s=this,a=s.chart,i=d(i,!0),o=t(o,{min:e,max:n});Ze(s,"setExtremes",o,function(){s.userMin=e,s.userMax=n,s.eventArgs=o,s.isDirtyExtremes=!0,i&&a.redraw(r)})},zoom:function(t,e){var n=this.dataMin,i=this.dataMax,r=this.options;return this.allowZoomOutside||(u(n)&&t<=fe(n,d(r.min,n))&&(t=j),u(i)&&e>=de(i,d(r.max,i))&&(e=j)),this.displayBtn=t!==j||e!==j,this.setExtremes(t,e,!1,j,{trigger:"zoom"}),!0},setAxisSize:function(){var t=this.chart,e=this.options,n=e.offsetLeft||0,i=this.horiz,r=d(e.width,t.plotWidth-n+(e.offsetRight||0)),o=d(e.height,t.plotHeight),s=d(e.top,t.plotTop),e=d(e.left,t.plotLeft+n),n=/%$/;n.test(o)&&(o=parseInt(o,10)/100*t.plotHeight),n.test(s)&&(s=parseInt(s,10)/100*t.plotHeight+t.plotTop),this.left=e,this.top=s,this.width=r,this.height=o,this.bottom=t.chartHeight-o-s,this.right=t.chartWidth-r-e,this.len=de(i?r:o,0),this.pos=i?e:s},getExtremes:function(){var t=this.isLog;return{min:t?D(l(this.min)):this.min,max:t?D(l(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(t){var e=this.isLog,n=e?l(this.min):this.min,e=e?l(this.max):this.max;return n>t||null===t?t=n:t>e&&(t=e),this.translate(t,0,1,0,1)},autoLabelAlign:function(t){return t=(d(t,0)-90*this.side+720)%360,t>15&&165>t?"right":t>195&&345>t?"left":"center"},getOffset:function(){var t,e,n,i,r,o,s,a,l,c=this,h=c.chart,p=h.renderer,f=c.options,g=c.tickPositions,m=c.ticks,y=c.horiz,v=c.side,b=h.inverted?[1,0,3,2][v]:v,w=0,x=0,_=f.title,k=f.labels,T=0,S=h.axisOffset,h=h.clipOffset,C=[-1,1,1,-1][v],P=1,D=d(k.maxStaggerLines,5);if(c.hasData=t=c.hasVisibleSeries||u(c.min)&&u(c.max)&&!!g,c.showAxis=e=t||d(f.showEmpty,!0),c.staggerLines=c.horiz&&k.staggerLines,c.axisGroup||(c.gridGroup=p.g("grid").attr({zIndex:f.gridZIndex||1}).add(),c.axisGroup=p.g("axis").attr({zIndex:f.zIndex||2}).add(),c.labelGroup=p.g("axis-labels").attr({zIndex:k.zIndex||7}).addClass("highcharts-"+c.coll.toLowerCase()+"-labels").add()),t||c.isLinked){if(c.labelAlign=d(k.align||c.autoLabelAlign(k.rotation)),Ge(g,function(t){m[t]?m[t].addLabel():m[t]=new E(c,t)}),c.horiz&&!c.staggerLines&&D&&!k.rotation){for(t=c.reversed?[].concat(g).reverse():g;D>P;){for(r=[],o=!1,i=0;i<t.length;i++)s=t[i],a=(a=m[s].label&&m[s].label.getBBox())?a.width:0,l=i%P,a&&(s=c.translate(s),r[l]!==j&&s<r[l]&&(o=!0),r[l]=s+a);if(!o)break;P++}P>1&&(c.staggerLines=P)}Ge(g,function(t){(0===v||2===v||{1:"left",3:"right"}[v]===c.labelAlign)&&(T=de(m[t].getLabelSize(),T))}),c.staggerLines&&(T*=c.staggerLines,c.labelOffset=T)}else for(i in m)m[i].destroy(),delete m[i];_&&_.text&&_.enabled!==!1&&(c.axisTitle||(c.axisTitle=p.text(_.text,0,0,_.useHTML).attr({zIndex:7,rotation:_.rotation||0,align:_.textAlign||{low:"left",middle:"center",high:"right"}[_.align]}).addClass("highcharts-"+this.coll.toLowerCase()+"-title").css(_.style).add(c.axisGroup),c.axisTitle.isNew=!0),e&&(w=c.axisTitle.getBBox()[y?"height":"width"],n=_.offset,x=u(n)?0:d(_.margin,y?5:10)),c.axisTitle[e?"show":"hide"]()),c.offset=C*d(f.offset,S[v]),p=2===v?c.tickBaseline:0,y=T+x+(T&&C*(y?d(k.y,c.tickBaseline+8):k.x)-p),c.axisTitleMargin=d(n,y),S[v]=de(S[v],c.axisTitleMargin+w+C*c.offset,y),h[b]=de(h[b],2*he(f.lineWidth/2))},getLinePath:function(t){var e=this.chart,n=this.opposite,i=this.offset,r=this.horiz,o=this.left+(n?this.width:0)+i,i=e.chartHeight-this.bottom-(n?this.height:0)+i;return n&&(t*=-1),e.renderer.crispLine(["M",r?this.left:o,r?i:this.top,"L",r?e.chartWidth-this.right:o,r?i:e.chartHeight-this.bottom],t)},getTitlePosition:function(){var t=this.horiz,e=this.left,i=this.top,r=this.len,o=this.options.title,s=t?e:i,a=this.opposite,l=this.offset,c=n(o.style.fontSize||12),r={low:s+(t?0:r),middle:s+r/2,high:s+(t?r:0)}[o.align],e=(t?i+this.height:e)+(t?1:-1)*(a?-1:1)*this.axisTitleMargin+(2===this.side?c:0);return{x:t?r:e+(a?this.width:0)+l+(o.x||0),y:t?e-(a?this.height:0)+l:r+(o.y||0)}},render:function(){var t,e,n,i=this,r=i.horiz,o=i.reversed,s=i.chart,a=s.renderer,c=i.options,h=i.isLog,p=i.isLinked,d=i.tickPositions,f=i.axisTitle,g=i.ticks,m=i.minorTicks,y=i.alternateBands,v=c.stackLabels,b=c.alternateGridColor,w=i.tickmarkOffset,x=c.lineWidth,_=s.hasRendered&&u(i.oldMin)&&!isNaN(i.oldMin),k=i.hasData,T=i.showAxis,S=c.labels.overflow,C=i.justifyLabels=r&&S!==!1;i.labelEdge.length=0,i.justifyToPlot="justify"===S,Ge([g,m,y],function(t){for(var e in t)t[e].isActive=!1}),(k||p)&&(i.minorTickInterval&&!i.categories&&Ge(i.getMinorTickPositions(),function(t){m[t]||(m[t]=new E(i,t,"minor")),_&&m[t].isNew&&m[t].render(null,!0),m[t].render(null,!1,1)}),d.length&&(t=d.slice(),(r&&o||!r&&!o)&&t.reverse(),C&&(t=t.slice(1).concat([t[0]])),Ge(t,function(e,n){C&&(n=n===t.length-1?0:n+1),(!p||e>=i.min&&e<=i.max)&&(g[e]||(g[e]=new E(i,e)),_&&g[e].isNew&&g[e].render(n,!0,.1),g[e].render(n))}),w&&0===i.min&&(g[-1]||(g[-1]=new E(i,-1,null,!0)),g[-1].render(-1))),b&&Ge(d,function(t,r){r%2===0&&t<i.max&&(y[t]||(y[t]=new se.PlotLineOrBand(i)),e=t+w,n=d[r+1]!==j?d[r+1]+w:i.max,y[t].options={from:h?l(e):e,to:h?l(n):n,color:b},y[t].render(),y[t].isActive=!0)}),i._addedPlotLB||(Ge((c.plotLines||[]).concat(c.plotBands||[]),function(t){i.addPlotBandOrLine(t)}),i._addedPlotLB=!0)),Ge([g,m,y],function(t){var e,n,i=[],r=$?$.duration||500:0,o=function(){for(n=i.length;n--;)t[i[n]]&&!t[i[n]].isActive&&(t[i[n]].destroy(),delete t[i[n]])};for(e in t)t[e].isActive||(t[e].render(e,!1,0),t[e].isActive=!1,i.push(e));t!==y&&s.hasRendered&&r?r&&setTimeout(o,r):o()}),x&&(r=i.getLinePath(x),i.axisLine?i.axisLine.animate({d:r}):i.axisLine=a.path(r).attr({stroke:c.lineColor,"stroke-width":x,zIndex:7}).add(i.axisGroup),i.axisLine[T?"show":"hide"]()),f&&T&&(f[f.isNew?"attr":"animate"](i.getTitlePosition()),f.isNew=!1),v&&v.enabled&&i.renderStackTotals(),i.isDirty=!1},redraw:function(){this.render(),Ge(this.plotLinesAndBands,function(t){t.render()}),Ge(this.series,function(t){t.isDirty=!0})},destroy:function(t){var e,n=this,i=n.stacks,r=n.plotLinesAndBands;t||Ke(n);for(e in i)C(i[e]),i[e]=null;for(Ge([n.ticks,n.minorTicks,n.alternateBands],function(t){C(t)}),t=r.length;t--;)r[t].destroy();Ge("stackTotalGroup,axisLine,axisTitle,axisGroup,cross,gridGroup,labelGroup".split(","),function(t){n[t]&&(n[t]=n[t].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(t,e){if(this.crosshair)if((u(e)||!d(this.crosshair.snap,!0))===!1)this.hideCrosshair();else{var n,i=this.crosshair,r=i.animation;d(i.snap,!0)?u(e)&&(n=this.chart.inverted!=this.horiz?e.plotX:this.len-e.plotY):n=this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos,n=this.isRadial?this.getPlotLinePath(this.isXAxis?e.x:d(e.stackY,e.y)):this.getPlotLinePath(null,null,null,null,n),null===n?this.hideCrosshair():this.cross?this.cross.attr({visibility:"visible"})[r?"animate":"attr"]({d:n},r):(r={"stroke-width":i.width||1,stroke:i.color||"#C0C0C0",zIndex:i.zIndex||2},i.dashStyle&&(r.dashstyle=i.dashStyle),this.cross=this.chart.renderer.path(n).attr(r).add())}},hideCrosshair:function(){this.cross&&this.cross.hide()}},t(L.prototype,{getPlotBandPath:function(t,e){var n=this.getPlotLinePath(e),i=this.getPlotLinePath(t);return i&&n?i.push(n[4],n[5],n[1],n[2]):i=null,i},addPlotBand:function(t){return this.addPlotBandOrLine(t,"plotBands")},addPlotLine:function(t){return this.addPlotBandOrLine(t,"plotLines")},addPlotBandOrLine:function(t,e){var n=new se.PlotLineOrBand(this,t).render(),i=this.userOptions;return n&&(e&&(i[e]=i[e]||[],i[e].push(t)),this.plotLinesAndBands.push(n)),n},removePlotBandOrLine:function(t){for(var e=this.plotLinesAndBands,n=this.options,i=this.userOptions,r=e.length;r--;)e[r].id===t&&e[r].destroy();Ge([n.plotLines||[],i.plotLines||[],n.plotBands||[],i.plotBands||[]],function(e){for(r=e.length;r--;)e[r].id===t&&c(e,e[r])})}}),L.prototype.getTimeTicks=function(e,n,i,r){var o,s=[],a={},l=z.global.useUTC,c=new G(n-q),h=e.unitRange,p=e.count;if(u(n)){h>=W.second&&(c.setMilliseconds(0),c.setSeconds(h>=W.minute?0:p*he(c.getSeconds()/p))),h>=W.minute&&c[ee](h>=W.hour?0:p*he(c[U]()/p)),h>=W.hour&&c[ne](h>=W.day?0:p*he(c[J]()/p)),h>=W.day&&c[ie](h>=W.month?1:p*he(c[Z]()/p)),h>=W.month&&(c[re](h>=W.year?0:p*he(c[Q]()/p)),o=c[te]()),h>=W.year&&(o-=o%p,c[oe](o)),h===W.week&&c[ie](c[Z]()-c[K]()+d(r,1)),n=1,q&&(c=new G(c.getTime()+q)),o=c[te]();for(var r=c.getTime(),f=c[Q](),g=c[Z](),m=(W.day+(l?q:6e4*c.getTimezoneOffset()))%W.day;i>r;)s.push(r),h===W.year?r=X(o+n*p,0):h===W.month?r=X(o,f+n*p):l||h!==W.day&&h!==W.week?r+=h*p:r=X(o,f,g+n*p*(h===W.day?1:7)),n++;s.push(r),Ge(Xe(s,function(t){return h<=W.hour&&t%W.day===m}),function(t){a[t]="day"})}return s.info=t(e,{higherRanks:a,totalRange:h*p}),s},L.prototype.normalizeTimeTickInterval=function(t,e){var n,i=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],r=i[i.length-1],o=W[r[0]],s=r[1];for(n=0;n<i.length&&(r=i[n],o=W[r[0]],s=r[1],!(i[n+1]&&t<=(o*s[s.length-1]+W[i[n+1][0]])/2));n++);return o===W.year&&5*o>t&&(s=[1,2,5]),i=_(t/o,s,"year"===r[0]?de(x(t/o),1):1),{unitRange:o,count:i,unitName:r[0]}},L.prototype.getLogTickPositions=function(t,e,n,i){var r=this.options,o=this.len,s=[];if(i||(this._minorAutoInterval=null),t>=.5)t=ue(t),s=this.getLinearTickPositions(t,e,n);else if(t>=.08)for(var c,u,h,p,f,o=he(e),r=t>.3?[1,2,4]:t>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];n+1>o&&!f;o++)for(u=r.length,c=0;u>c&&!f;c++)h=a(l(o)*r[c]),h>e&&(!i||n>=p)&&p!==j&&s.push(p),p>n&&(f=!0),p=h;else e=l(e),n=l(n),t=r[i?"minorTickInterval":"tickInterval"],t=d("auto"===t?null:t,this._minorAutoInterval,(n-e)*(r.tickPixelInterval/(i?5:1))/((i?o/this.tickPositions.length:o)||1)),t=_(t,null,x(t)),s=Ue(this.getLinearTickPositions(t,e,n),a),i||(this._minorAutoInterval=t/5);return i||(this.tickInterval=t),s};var pn=se.Tooltip=function(){this.init.apply(this,arguments)};pn.prototype={init:function(t,e){var i=e.borderWidth,r=e.style,o=n(r.padding);this.chart=t,this.options=e,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=t.renderer.label("",0,0,e.shape||"callout",null,null,e.useHTML,null,"tooltip").attr({padding:o,fill:e.backgroundColor,"stroke-width":i,r:e.borderRadius,zIndex:8}).css(r).css({padding:0}).add().attr({y:-9999}),Ae||this.label.shadow(e.shadow),this.shared=e.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(e,n,i,r){var o=this,s=o.now,a=o.options.animation!==!1&&!o.isHidden&&(ge(e-s.x)>1||ge(n-s.y)>1),l=o.followPointer||o.len>1;t(s,{x:a?(2*s.x+e)/3:e,y:a?(s.y+n)/2:n,anchorX:l?j:a?(2*s.anchorX+i)/3:i,anchorY:l?j:a?(s.anchorY+r)/2:r}),o.label.attr(s),a&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){o&&o.move(e,n,i,r)},32))},hide:function(t){var e,n=this;clearTimeout(this.hideTimer),this.isHidden||(e=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){n.label.fadeOut(),n.isHidden=!0},d(t,this.options.hideDelay,500)),e&&Ge(e,function(t){t.setState()}),this.chart.hoverPoints=null)},getAnchor:function(t,e){var n,i,r=this.chart,o=r.inverted,s=r.plotTop,a=0,l=0,t=p(t);return n=t[0].tooltipPos,this.followPointer&&e&&(e.chartX===j&&(e=r.pointer.normalize(e)),n=[e.chartX-r.plotLeft,e.chartY-s]),n||(Ge(t,function(t){i=t.series.yAxis,a+=t.plotX,l+=(t.plotLow?(t.plotLow+t.plotHigh)/2:t.plotY)+(!o&&i?i.top-s:0)}),a/=t.length,l/=t.length,n=[o?r.plotWidth-l:a,this.shared&&!o&&t.length>1&&e?e.chartY-s:o?r.plotHeight-a:l]),Ue(n,ue)},getPosition:function(t,e,n){var i,r=this.chart,o=this.distance,s={},a=["y",r.chartHeight,e,n.plotY+r.plotTop],l=["x",r.chartWidth,t,n.plotX+r.plotLeft],c=n.ttBelow||r.inverted&&!n.negative||!r.inverted&&n.negative,u=function(t,e,n,i){var r=i-o>n,e=e>i+o+n,n=i-o-n;if(i+=o,c&&e)s[t]=i;else if(!c&&r)s[t]=n;else if(r)s[t]=n;else{if(!e)return!1;s[t]=i}},h=function(t,e,n,i){return o>i||i>e-o?!1:void(s[t]=n/2>i?1:i>e-n/2?e-n-2:i-n/2)},p=function(t){var e=a;a=l,l=e,i=t},d=function(){u.apply(0,a)!==!1?h.apply(0,l)===!1&&!i&&(p(!0),d()):i?s.x=s.y=0:(p(!0),d())};return(r.inverted||this.len>1)&&p(),d(),s},defaultFormatter:function(t){var e,n=this.points||p(this),i=n[0].series;return e=[t.tooltipHeaderFormatter(n[0])],Ge(n,function(t){i=t.series,e.push(i.tooltipFormatter&&i.tooltipFormatter(t)||t.point.tooltipFormatter(i.tooltipOptions.pointFormat))}),e.push(t.options.footerFormat||""),e.join("")},refresh:function(t,e){var n,i,r,o=this.chart,s=this.label,a=this.options,l={},c=[];r=a.formatter||this.defaultFormatter;var u,l=o.hoverPoints,h=this.shared;clearTimeout(this.hideTimer),this.followPointer=p(t)[0].series.tooltipOptions.followPointer,i=this.getAnchor(t,e),n=i[0],i=i[1],!h||t.series&&t.series.noSharedTooltip?l=t.getLabelConfig():(o.hoverPoints=t,l&&Ge(l,function(t){t.setState()}),Ge(t,function(t){t.setState("hover"),c.push(t.getLabelConfig())}),l={x:t[0].category,y:t[0].y},l.points=c,this.len=c.length,t=t[0]),r=r.call(l,this),l=t.series,this.distance=d(l.tooltipOptions.distance,16),r===!1?this.hide():(this.isHidden&&(en(s),s.attr("opacity",1).show()),s.attr({text:r}),u=a.borderColor||t.color||l.color||"#606060",s.attr({stroke:u}),this.updatePosition({plotX:n,plotY:i,negative:t.negative,ttBelow:t.ttBelow}),this.isHidden=!1),Ze(o,"tooltipRefresh",{text:r,x:n+o.plotLeft,y:i+o.plotTop,borderColor:u})},updatePosition:function(t){var e=this.chart,n=this.label,n=(this.options.positioner||this.getPosition).call(this,n.width,n.height,t);this.move(ue(n.x),ue(n.y),t.plotX+e.plotLeft,t.plotY+e.plotTop)},tooltipHeaderFormatter:function(t){var e,n=t.series,i=n.tooltipOptions,r=i.dateTimeLabelFormats,o=i.xDateFormat,a=n.xAxis,l=a&&"datetime"===a.options.type&&s(t.key),i=i.headerFormat,a=a&&a.closestPointRange;if(l&&!o){if(a){for(e in W)if(W[e]>=a||W[e]<=W.day&&t.key%W[e]>0){o=r[e];break}}else o=r.day;o=o||r.year}return l&&o&&(i=i.replace("{point.key}","{point.key:"+o+"}")),w(i,{point:t,series:n})}};var dn;F=ae.documentElement.ontouchstart!==j;var fn=se.Pointer=function(t,e){this.init(t,e)};if(fn.prototype={init:function(t,e){var n,i=e.chart,r=i.events,o=Ae?"":i.zoomType,i=t.inverted;this.options=e,this.chart=t,this.zoomX=n=/x/.test(o),this.zoomY=o=/y/.test(o),this.zoomHor=n&&!i||o&&i,this.zoomVert=o&&!i||n&&i,this.hasZoom=n||o,this.runChartClick=r&&!!r.click,this.pinchDown=[],this.lastValidTouch={},se.Tooltip&&e.tooltip.enabled&&(t.tooltip=new pn(t,e.tooltip),this.followTouchMove=e.tooltip.followTouchMove),this.setDOMEvents()},normalize:function(e,n){var i,r,e=e||window.event,e=Qe(e);return e.target||(e.target=e.srcElement),r=e.touches?e.touches.length?e.touches.item(0):e.changedTouches[0]:e,n||(this.chartPosition=n=qe(this.chart.container)),r.pageX===j?(i=de(e.x,e.clientX-n.left),r=e.y):(i=r.pageX-n.left,r=r.pageY-n.top),t(e,{chartX:ue(i),chartY:ue(r)})},getCoordinates:function(t){var e={xAxis:[],yAxis:[]};return Ge(this.chart.axes,function(n){e[n.isXAxis?"xAxis":"yAxis"].push({axis:n,value:n.toValue(t[n.horiz?"chartX":"chartY"])})}),e},getIndex:function(t){var e=this.chart;return e.inverted?e.plotHeight+e.plotTop-t.chartY:t.chartX-e.plotLeft},runPointActions:function(t){var e,n,i,r,o=this.chart,s=o.series,a=o.tooltip,l=o.hoverPoint,c=o.hoverSeries,u=o.chartWidth,h=this.getIndex(t);if(a&&this.options.tooltip.shared&&(!c||!c.noSharedTooltip)){for(n=[],i=s.length,r=0;i>r;r++)s[r].visible&&s[r].options.enableMouseTracking!==!1&&!s[r].noSharedTooltip&&s[r].singularTooltips!==!0&&s[r].tooltipPoints.length&&(e=s[r].tooltipPoints[h])&&e.series&&(e._dist=ge(h-e.clientX),u=fe(u,e._dist),n.push(e));for(i=n.length;i--;)n[i]._dist>u&&n.splice(i,1);n.length&&n[0].clientX!==this.hoverX&&(a.refresh(n,t),this.hoverX=n[0].clientX)}s=c&&c.tooltipOptions.followPointer,c&&c.tracker&&!s?(e=c.tooltipPoints[h])&&e!==l&&e.onMouseOver(t):a&&s&&!a.isHidden&&(c=a.getAnchor([{}],t),a.updatePosition({plotX:c[0],plotY:c[1]})),a&&!this._onDocumentMouseMove&&(this._onDocumentMouseMove=function(t){Ne[dn]&&Ne[dn].pointer.onDocumentMouseMove(t)},Je(ae,"mousemove",this._onDocumentMouseMove)),Ge(o.axes,function(n){n.drawCrosshair(t,d(e,l))})},reset:function(t,e){var n=this.chart,i=n.hoverSeries,r=n.hoverPoint,o=n.tooltip,s=o&&o.shared?n.hoverPoints:r;(t=t&&o&&s)&&p(s)[0].plotX===j&&(t=!1),t?(o.refresh(s),r&&r.setState(r.state,!0)):(r&&r.onMouseOut(),i&&i.onMouseOut(),o&&o.hide(e),this._onDocumentMouseMove&&(Ke(ae,"mousemove",this._onDocumentMouseMove),this._onDocumentMouseMove=null),Ge(n.axes,function(t){t.hideCrosshair()}),this.hoverX=null)},scaleGroups:function(t,e){var n,i=this.chart;Ge(i.series,function(r){n=t||r.getPlotBox(),r.xAxis&&r.xAxis.zoomEnabled&&(r.group.attr(n),r.markerGroup&&(r.markerGroup.attr(n),r.markerGroup.clip(e?i.clipRect:null)),r.dataLabelsGroup&&r.dataLabelsGroup.attr(n))}),i.clipRect.attr(e||i.clipBox)},dragStart:function(t){var e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,e.mouseDownY=this.mouseDownY=t.chartY},drag:function(t){var e,n=this.chart,i=n.options.chart,r=t.chartX,o=t.chartY,s=this.zoomHor,a=this.zoomVert,l=n.plotLeft,c=n.plotTop,u=n.plotWidth,h=n.plotHeight,p=this.mouseDownX,d=this.mouseDownY,f=i.panKey&&t[i.panKey+"Key"];l>r?r=l:r>l+u&&(r=l+u),c>o?o=c:o>c+h&&(o=c+h),this.hasDragged=Math.sqrt(Math.pow(p-r,2)+Math.pow(d-o,2)),this.hasDragged>10&&(e=n.isInsidePlot(p-l,d-c),n.hasCartesianSeries&&(this.zoomX||this.zoomY)&&e&&!f&&!this.selectionMarker&&(this.selectionMarker=n.renderer.rect(l,c,s?1:u,a?1:h,0).attr({fill:i.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()),this.selectionMarker&&s&&(r-=p,this.selectionMarker.attr({width:ge(r),x:(r>0?0:r)+p})),this.selectionMarker&&a&&(r=o-d,this.selectionMarker.attr({height:ge(r),y:(r>0?0:r)+d})),e&&!this.selectionMarker&&i.panning&&n.pan(t,i.panning))},drop:function(e){var n=this.chart,i=this.hasPinched;if(this.selectionMarker){var r,o={xAxis:[],yAxis:[],originalEvent:e.originalEvent||e},s=this.selectionMarker,a=s.attr?s.attr("x"):s.x,l=s.attr?s.attr("y"):s.y,c=s.attr?s.attr("width"):s.width,u=s.attr?s.attr("height"):s.height;(this.hasDragged||i)&&(Ge(n.axes,function(t){if(t.zoomEnabled){var n=t.horiz,i="touchend"===e.type?t.minPixelPadding:0,s=t.toValue((n?a:l)+i),n=t.toValue((n?a+c:l+u)-i);!isNaN(s)&&!isNaN(n)&&(o[t.coll].push({axis:t,min:fe(s,n),max:de(s,n)}),r=!0)}}),r&&Ze(n,"selection",o,function(e){n.zoom(t(e,i?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),i&&this.scaleGroups()}n&&(f(n.container,{cursor:n._cursor}),n.cancelClick=this.hasDragged>10,n.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(t){t=this.normalize(t),t.preventDefault&&t.preventDefault(),this.dragStart(t)},onDocumentMouseUp:function(t){Ne[dn]&&Ne[dn].pointer.drop(t)},onDocumentMouseMove:function(t){var e=this.chart,n=this.chartPosition,i=e.hoverSeries,t=this.normalize(t,n);n&&i&&!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&this.reset()},onContainerMouseLeave:function(){var t=Ne[dn];t&&(t.pointer.reset(),t.pointer.chartPosition=null)},onContainerMouseMove:function(t){var e=this.chart;dn=e.index,t=this.normalize(t),t.returnValue=!1,"mousedown"===e.mouseIsDown&&this.drag(t),(this.inClass(t.target,"highcharts-tracker")||e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop))&&!e.openMenu&&this.runPointActions(t)},inClass:function(t,e){for(var n;t;){if(n=h(t,"class")){if(-1!==n.indexOf(e))return!0;if(-1!==n.indexOf("highcharts-container"))return!1}t=t.parentNode}},onTrackerMouseOut:function(t){var e=this.chart.hoverSeries,n=(t=t.relatedTarget||t.toElement)&&t.point&&t.point.series;!e||e.options.stickyTracking||this.inClass(t,"highcharts-tooltip")||n===e||e.onMouseOut()},onContainerClick:function(e){var n=this.chart,i=n.hoverPoint,r=n.plotLeft,o=n.plotTop,e=this.normalize(e);e.cancelBubble=!0,n.cancelClick||(i&&this.inClass(e.target,"highcharts-tracker")?(Ze(i.series,"click",t(e,{point:i})),n.hoverPoint&&i.firePointEvent("click",e)):(t(e,this.getCoordinates(e)),n.isInsidePlot(e.chartX-r,e.chartY-o)&&Ze(n,"click",e)))},setDOMEvents:function(){var t=this,e=t.chart.container;e.onmousedown=function(e){t.onContainerMouseDown(e)},e.onmousemove=function(e){t.onContainerMouseMove(e)},e.onclick=function(e){t.onContainerClick(e)},Je(e,"mouseleave",t.onContainerMouseLeave),1===Ie&&Je(ae,"mouseup",t.onDocumentMouseUp),F&&(e.ontouchstart=function(e){t.onContainerTouchStart(e)},e.ontouchmove=function(e){t.onContainerTouchMove(e)},1===Ie&&Je(ae,"touchend",t.onDocumentTouchEnd))},destroy:function(){var t;Ke(this.chart.container,"mouseleave",this.onContainerMouseLeave),Ie||(Ke(ae,"mouseup",this.onDocumentMouseUp),Ke(ae,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout);for(t in this)this[t]=null}},t(se.Pointer.prototype,{pinchTranslate:function(t,e,n,i,r,o){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,t,e,n,i,r,o),(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,t,e,n,i,r,o)},pinchTranslateDirection:function(t,e,n,i,r,o,s,a){var l,c,u,h=this.chart,p=t?"x":"y",d=t?"X":"Y",f="chart"+d,g=t?"width":"height",m=h["plot"+(t?"Left":"Top")],y=a||1,v=h.inverted,b=h.bounds[t?"h":"v"],w=1===e.length,x=e[0][f],_=n[0][f],k=!w&&e[1][f],T=!w&&n[1][f],n=function(){!w&&ge(x-k)>20&&(y=a||ge(_-T)/ge(x-k)),c=(m-_)/y+x,l=h["plot"+(t?"Width":"Height")]/y};n(),e=c,e<b.min?(e=b.min,u=!0):e+l>b.max&&(e=b.max-l,u=!0),u?(_-=.8*(_-s[p][0]),w||(T-=.8*(T-s[p][1])),n()):s[p]=[_,T],v||(o[p]=c-m,o[g]=l),o=v?1/y:y,r[g]=l,r[p]=e,i[v?t?"scaleY":"scaleX":"scale"+d]=y,i["translate"+d]=o*m+(_-o*x)},pinch:function(e){var n=this,i=n.chart,r=n.pinchDown,o=n.followTouchMove,s=e.touches,a=s.length,l=n.lastValidTouch,c=n.hasZoom,u=n.selectionMarker,h={},p=1===a&&(n.inClass(e.target,"highcharts-tracker")&&i.runTrackerClick||n.runChartClick),f={};(c||o)&&!p&&e.preventDefault(),Ue(s,function(t){return n.normalize(t)}),"touchstart"===e.type?(Ge(s,function(t,e){r[e]={chartX:t.chartX,chartY:t.chartY}}),l.x=[r[0].chartX,r[1]&&r[1].chartX],l.y=[r[0].chartY,r[1]&&r[1].chartY],Ge(i.axes,function(t){if(t.zoomEnabled){var e=i.bounds[t.horiz?"h":"v"],n=t.minPixelPadding,r=t.toPixels(d(t.options.min,t.dataMin)),o=t.toPixels(d(t.options.max,t.dataMax)),s=fe(r,o),r=de(r,o);e.min=fe(t.pos,s-n),e.max=de(t.pos+t.len,r+n)}}),n.res=!0):r.length&&(u||(n.selectionMarker=u=t({destroy:Le},i.plotBox)),n.pinchTranslate(r,s,h,u,f,l),n.hasPinched=c,n.scaleGroups(h,f),!c&&o&&1===a?this.runPointActions(n.normalize(e)):n.res&&(n.res=!1,this.reset(!1,0)))},onContainerTouchStart:function(t){var e=this.chart;dn=e.index,1===t.touches.length?(t=this.normalize(t),e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)?(this.runPointActions(t),this.pinch(t)):this.reset()):2===t.touches.length&&this.pinch(t)},onContainerTouchMove:function(t){(1===t.touches.length||2===t.touches.length)&&this.pinch(t)},onDocumentTouchEnd:function(t){Ne[dn]&&Ne[dn].pointer.drop(t)}}),le.PointerEvent||le.MSPointerEvent){var gn={},mn=!!le.PointerEvent,yn=function(){var t,e=[];e.item=function(t){return this[t]};for(t in gn)gn.hasOwnProperty(t)&&e.push({pageX:gn[t].pageX,pageY:gn[t].pageY,target:gn[t].target});return e},vn=function(t,e,n,i){t=t.originalEvent||t,"touch"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_TOUCH||!Ne[dn]||(i(t),i=Ne[dn].pointer,i[e]({type:n,target:t.currentTarget,preventDefault:Le,touches:yn()}))};t(fn.prototype,{onContainerPointerDown:function(t){vn(t,"onContainerTouchStart","touchstart",function(t){gn[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}})},onContainerPointerMove:function(t){vn(t,"onContainerTouchMove","touchmove",function(t){gn[t.pointerId]={pageX:t.pageX,pageY:t.pageY},gn[t.pointerId].target||(gn[t.pointerId].target=t.currentTarget)})},onDocumentPointerUp:function(t){vn(t,"onContainerTouchEnd","touchend",function(t){delete gn[t.pointerId]})},batchMSEvents:function(t){t(this.chart.container,mn?"pointerdown":"MSPointerDown",this.onContainerPointerDown),t(this.chart.container,mn?"pointermove":"MSPointerMove",this.onContainerPointerMove),t(ae,mn?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),b(fn.prototype,"init",function(t,e,n){t.call(this,e,n),(this.hasZoom||this.followTouchMove)&&f(e.container,{"-ms-touch-action":Re,"touch-action":Re})}),b(fn.prototype,"setDOMEvents",function(t){t.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(Je)}),b(fn.prototype,"destroy",function(t){this.batchMSEvents(Ke),t.call(this)})}var bn=se.Legend=function(t,e){this.init(t,e)};bn.prototype={init:function(t,n){var i=this,r=n.itemStyle,o=d(n.padding,8),s=n.itemMarginTop||0;this.options=n,n.enabled&&(i.itemStyle=r,i.itemHiddenStyle=e(r,n.itemHiddenStyle),i.itemMarginTop=s,i.padding=o,i.initialItemX=o,i.initialItemY=o-5,i.maxItemWidth=0,i.chart=t,i.itemHeight=0,i.lastLineHeight=0,i.symbolWidth=d(n.symbolWidth,16),i.pages=[],i.render(),Je(i.chart,"endResize",function(){i.positionCheckboxes()}))},colorizeItem:function(t,e){var n,i=this.options,r=t.legendItem,o=t.legendLine,s=t.legendSymbol,a=this.itemHiddenStyle.color,i=e?i.itemStyle.color:a,l=e?t.legendColor||t.color||"#CCC":a,a=t.options&&t.options.marker,c={fill:l};if(r&&r.css({fill:i,color:i}),o&&o.attr({stroke:l}),s){if(a&&s.isMarker)for(n in c.stroke=l,a=t.convertAttribs(a))r=a[n],r!==j&&(c[n]=r);s.attr(c)}},positionItem:function(t){var e=this.options,n=e.symbolPadding,e=!e.rtl,i=t._legendItemPos,r=i[0],i=i[1],o=t.checkbox;t.legendGroup&&t.legendGroup.translate(e?r:this.legendWidth-r-2*n-4,i),o&&(o.x=r,o.y=i)},destroyItem:function(t){var e=t.checkbox;Ge(["legendItem","legendLine","legendSymbol","legendGroup"],function(e){t[e]&&(t[e]=t[e].destroy())}),e&&P(t.checkbox)},destroy:function(){var t=this.group,e=this.box;e&&(this.box=e.destroy()),t&&(this.group=t.destroy())},positionCheckboxes:function(t){var e,n=this.group.alignAttr,i=this.clipHeight||this.legendHeight;n&&(e=n.translateY,Ge(this.allItems,function(r){var o,s=r.checkbox;s&&(o=e+s.y+(t||0)+3,f(s,{left:n.translateX+r.checkboxOffset+s.x-20+"px",top:o+"px",display:o>e-6&&e+i-6>o?"":Re}))}))},renderTitle:function(){var t=this.padding,e=this.options.title,n=0;e.text&&(this.title||(this.title=this.chart.renderer.label(e.text,t-3,t-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(e.style).add(this.group)),t=this.title.getBBox(),n=t.height,this.offsetWidth=t.width,this.contentGroup.attr({translateY:n})),this.titleHeight=n},renderItem:function(t){var n=this.chart,i=n.renderer,r=this.options,o="horizontal"===r.layout,s=this.symbolWidth,a=r.symbolPadding,l=this.itemStyle,c=this.itemHiddenStyle,u=this.padding,h=o?d(r.itemDistance,20):0,p=!r.rtl,f=r.width,g=r.itemMarginBottom||0,m=this.itemMarginTop,y=this.initialItemX,v=t.legendItem,b=t.series&&t.series.drawLegendSymbol?t.series:t,x=b.options,x=this.createCheckboxForItem&&x&&x.showCheckbox,_=r.useHTML;v||(t.legendGroup=i.g("legend-item").attr({zIndex:1}).add(this.scrollGroup),t.legendItem=v=i.text(r.labelFormat?w(r.labelFormat,t):r.labelFormatter.call(t),p?s+a:-a,this.baseline||0,_).css(e(t.visible?l:c)).attr({align:p?"left":"right",zIndex:2}).add(t.legendGroup),this.baseline||(this.baseline=i.fontMetrics(l.fontSize,v).f+3+m,v.attr("y",this.baseline)),b.drawLegendSymbol(this,t),this.setItemEvents&&this.setItemEvents(t,v,_,l,c),this.colorizeItem(t,t.visible),x&&this.createCheckboxForItem(t)),i=v.getBBox(),s=t.checkboxOffset=r.itemWidth||t.legendItemWidth||s+a+i.width+h+(x?20:0),this.itemHeight=a=ue(t.legendItemHeight||i.height),o&&this.itemX-y+s>(f||n.chartWidth-2*u-y-r.x)&&(this.itemX=y,this.itemY+=m+this.lastLineHeight+g,this.lastLineHeight=0),this.maxItemWidth=de(this.maxItemWidth,s),this.lastItemY=m+this.itemY+g,this.lastLineHeight=de(a,this.lastLineHeight),t._legendItemPos=[this.itemX,this.itemY],o?this.itemX+=s:(this.itemY+=m+a+g,this.lastLineHeight=a),this.offsetWidth=f||de((o?this.itemX-y-h:s)+u,this.offsetWidth)},getAllItems:function(){var t=[];return Ge(this.chart.series,function(e){var n=e.options;d(n.showInLegend,u(n.linkedTo)?!1:j,!0)&&(t=t.concat(e.legendItems||("point"===n.legendType?e.data:e)))}),t},render:function(){var e,n,i,r,o=this,s=o.chart,a=s.renderer,l=o.group,c=o.box,u=o.options,h=o.padding,p=u.borderWidth,d=u.backgroundColor;o.itemX=o.initialItemX,o.itemY=o.initialItemY,o.offsetWidth=0,o.lastItemY=0,l||(o.group=l=a.g("legend").attr({zIndex:7}).add(),o.contentGroup=a.g().attr({zIndex:1}).add(l),o.scrollGroup=a.g().add(o.contentGroup)),o.renderTitle(),e=o.getAllItems(),k(e,function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)}),u.reversed&&e.reverse(),o.allItems=e,o.display=n=!!e.length,Ge(e,function(t){o.renderItem(t)}),i=u.width||o.offsetWidth,r=o.lastItemY+o.lastLineHeight+o.titleHeight,r=o.handleOverflow(r),(p||d)&&(i+=h,r+=h,c?i>0&&r>0&&(c[c.isNew?"attr":"animate"](c.crisp({width:i,height:r})),c.isNew=!1):(o.box=c=a.rect(0,0,i,r,u.borderRadius,p||0).attr({stroke:u.borderColor,"stroke-width":p||0,fill:d||Re}).add(l).shadow(u.shadow),c.isNew=!0),c[n?"show":"hide"]()),o.legendWidth=i,o.legendHeight=r,Ge(e,function(t){o.positionItem(t)}),n&&l.align(t({width:i,height:r},u),!0,"spacingBox"),s.isResizing||this.positionCheckboxes()},handleOverflow:function(t){var e,n,i=this,r=this.chart,o=r.renderer,s=this.options,a=s.y,a=r.spacingBox.height+("top"===s.verticalAlign?-a:a)-this.padding,l=s.maxHeight,c=this.clipRect,u=s.navigation,h=d(u.animation,!0),p=u.arrowSize||12,f=this.nav,g=this.pages,m=this.allItems;return"horizontal"===s.layout&&(a/=2),l&&(a=fe(a,l)),g.length=0,t>a&&!s.useHTML?(this.clipHeight=e=de(a-20-this.titleHeight-this.padding,0),this.currentPage=d(this.currentPage,1),this.fullHeight=t,Ge(m,function(t,i){var r=t._legendItemPos[1],o=ue(t.legendItem.getBBox().height),s=g.length;(!s||r-g[s-1]>e&&(n||r)!==g[s-1])&&(g.push(n||r),s++),i===m.length-1&&r+o-g[s-1]>e&&g.push(r),r!==n&&(n=r)}),c||(c=i.clipRect=o.clipRect(0,this.padding,9999,0),i.contentGroup.clip(c)),c.attr({height:e}),f||(this.nav=f=o.g().attr({zIndex:1}).add(this.group),this.up=o.symbol("triangle",0,0,p,p).on("click",function(){i.scroll(-1,h)}).add(f),this.pager=o.text("",15,10).css(u.style).add(f),this.down=o.symbol("triangle-down",0,0,p,p).on("click",function(){i.scroll(1,h)
}).add(f)),i.scroll(0),t=a):f&&(c.attr({height:r.chartHeight}),f.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},scroll:function(t,e){var n=this.pages,i=n.length,r=this.currentPage+t,o=this.clipHeight,s=this.options.navigation,a=s.activeColor,s=s.inactiveColor,l=this.pager,c=this.padding;r>i&&(r=i),r>0&&(e!==j&&M(e,this.chart),this.nav.attr({translateX:c,translateY:o+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:1===r?s:a}).css({cursor:1===r?"default":"pointer"}),l.attr({text:r+"/"+i}),this.down.attr({x:18+this.pager.getBBox().width,fill:r===i?s:a}).css({cursor:r===i?"default":"pointer"}),n=-n[r-1]+this.initialItemY,this.scrollGroup.animate({translateY:n}),this.currentPage=r,this.positionCheckboxes(n))}},$e=se.LegendSymbolMixin={drawRectangle:function(t,e){var n=t.options.symbolHeight||12;e.legendSymbol=this.chart.renderer.rect(0,t.baseline-5-n/2,t.symbolWidth,n,t.options.symbolRadius||0).attr({zIndex:3}).add(e.legendGroup)},drawLineMarker:function(t){var e,n=this.options,i=n.marker;e=t.symbolWidth;var r,o=this.chart.renderer,s=this.legendGroup,t=t.baseline-ue(.3*o.fontMetrics(t.options.itemStyle.fontSize,this.legendItem).b);n.lineWidth&&(r={"stroke-width":n.lineWidth},n.dashStyle&&(r.dashstyle=n.dashStyle),this.legendLine=o.path(["M",0,t,"L",e,t]).attr(r).add(s)),i&&i.enabled!==!1&&(n=i.radius,this.legendSymbol=e=o.symbol(this.symbol,e/2-n,t-n,2*n,2*n).add(s),e.isMarker=!0)}},(/Trident\/7\.0/.test(we)||Se)&&b(bn.prototype,"positionItem",function(t,e){var n=this,i=function(){e._legendItemPos&&t.call(n,e)};i(),setTimeout(i)}),N.prototype={init:function(t,n){var i,r=t.series;t.series=null,i=e(z,t),i.series=t.series=r,this.userOptions=t,r=i.chart,this.margin=this.splashArray("margin",r),this.spacing=this.splashArray("spacing",r);var o=r.events;this.bounds={h:{},v:{}},this.callback=n,this.isResizing=0,this.options=i,this.axes=[],this.series=[],this.hasCartesianSeries=r.showAxes;var s,a=this;if(a.index=Ne.length,Ne.push(a),Ie++,r.reflow!==!1&&Je(a,"load",function(){a.initReflow()}),o)for(s in o)Je(a,s,o[s]);a.xAxis=[],a.yAxis=[],a.animation=Ae?!1:d(r.animation,!0),a.pointCount=a.colorCounter=a.symbolCounter=0,a.firstRender()},initSeries:function(t){var e=this.options.chart;return(e=ze[t.type||e.type||e.defaultSeriesType])||Y(17,!0),e=new e,e.init(this,t),e},isInsidePlot:function(t,e,n){var i=n?e:t,t=n?t:e;return i>=0&&i<=this.plotWidth&&t>=0&&t<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&Ge(this.axes,function(t){t.adjustTickAmount()}),this.maxTicks=null},redraw:function(e){var n,i,r=this.axes,o=this.series,s=this.pointer,a=this.legend,l=this.isDirtyLegend,c=this.hasCartesianSeries,u=this.isDirtyBox,h=o.length,p=h,d=this.renderer,f=d.isHidden(),g=[];for(M(e,this),f&&this.cloneRenderTo(),this.layOutTitles();p--;)if(e=o[p],e.options.stacking&&(n=!0,e.isDirty)){i=!0;break}if(i)for(p=h;p--;)e=o[p],e.options.stacking&&(e.isDirty=!0);Ge(o,function(t){t.isDirty&&"point"===t.options.legendType&&(l=!0)}),l&&a.options.enabled&&(a.render(),this.isDirtyLegend=!1),n&&this.getStacks(),c&&(this.isResizing||(this.maxTicks=null,Ge(r,function(t){t.setScale()})),this.adjustTickAmounts()),this.getMargins(),c&&(Ge(r,function(t){t.isDirty&&(u=!0)}),Ge(r,function(e){e.isDirtyExtremes&&(e.isDirtyExtremes=!1,g.push(function(){Ze(e,"afterSetExtremes",t(e.eventArgs,e.getExtremes())),delete e.eventArgs})),(u||n)&&e.redraw()})),u&&this.drawChartBox(),Ge(o,function(t){t.isDirty&&t.visible&&(!t.isCartesian||t.xAxis)&&t.redraw()}),s&&s.reset(!0),d.draw(),Ze(this,"redraw"),f&&this.cloneRenderTo(!0),Ge(g,function(t){t.call()})},get:function(t){var e,n,i=this.axes,r=this.series;for(e=0;e<i.length;e++)if(i[e].options.id===t)return i[e];for(e=0;e<r.length;e++)if(r[e].options.id===t)return r[e];for(e=0;e<r.length;e++)for(n=r[e].points||[],i=0;i<n.length;i++)if(n[i].id===t)return n[i];return null},getAxes:function(){var t=this,e=this.options,n=e.xAxis=p(e.xAxis||{}),e=e.yAxis=p(e.yAxis||{});Ge(n,function(t,e){t.index=e,t.isX=!0}),Ge(e,function(t,e){t.index=e}),n=n.concat(e),Ge(n,function(e){new L(t,e)}),t.adjustTickAmounts()},getSelectedPoints:function(){var t=[];return Ge(this.series,function(e){t=t.concat(Xe(e.points||[],function(t){return t.selected}))}),t},getSelectedSeries:function(){return Xe(this.series,function(t){return t.selected})},getStacks:function(){var t=this;Ge(t.yAxis,function(t){t.stacks&&t.hasVisibleSeries&&(t.oldStacks=t.stacks)}),Ge(t.series,function(e){!e.options.stacking||e.visible!==!0&&t.options.chart.ignoreHiddenSeries!==!1||(e.stackKey=e.type+d(e.options.stack,""))})},setTitle:function(t,n,i){var r,o,s=this,a=s.options;o=a.title=e(a.title,t),r=a.subtitle=e(a.subtitle,n),a=r,Ge([["title",t,o],["subtitle",n,a]],function(t){var e=t[0],n=s[e],i=t[1],t=t[2];n&&i&&(s[e]=n=n.destroy()),t&&t.text&&!n&&(s[e]=s.renderer.text(t.text,0,0,t.useHTML).attr({align:t.align,"class":"highcharts-"+e,zIndex:t.zIndex||4}).css(t.style).add())}),s.layOutTitles(i)},layOutTitles:function(e){var n=0,i=this.title,r=this.subtitle,o=this.options,s=o.title,o=o.subtitle,a=this.renderer,l=this.spacingBox.width-44;!i||(i.css({width:(s.width||l)+"px"}).align(t({y:a.fontMetrics(s.style.fontSize,i).b-3},s),!1,"spacingBox"),s.floating||s.verticalAlign)||(n=i.getBBox().height),r&&(r.css({width:(o.width||l)+"px"}).align(t({y:n+(s.margin-13)+a.fontMetrics(s.style.fontSize,r).b},o),!1,"spacingBox"),!o.floating&&!o.verticalAlign&&(n=pe(n+r.getBBox().height))),i=this.titleOffset!==n,this.titleOffset=n,!this.isDirtyBox&&i&&(this.isDirtyBox=i,this.hasRendered&&d(e,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var t=this.options.chart,e=t.width,t=t.height,n=this.renderToClone||this.renderTo;u(e)||(this.containerWidth=Ve(n,"width")),u(t)||(this.containerHeight=Ve(n,"height")),this.chartWidth=de(0,e||this.containerWidth||600),this.chartHeight=de(0,d(t,this.containerHeight>19?this.containerHeight:400))},cloneRenderTo:function(t){var e=this.renderToClone,n=this.container;t?e&&(this.renderTo.appendChild(n),P(e),delete this.renderToClone):(n&&n.parentNode===this.renderTo&&this.renderTo.removeChild(n),this.renderToClone=e=this.renderTo.cloneNode(0),f(e,{position:"absolute",top:"-9999px",display:"block"}),e.style.setProperty&&e.style.setProperty("display","block","important"),ae.body.appendChild(e),n&&e.appendChild(n))},getContainer:function(){var e,r,o,s,a=this.options.chart;this.renderTo=e=a.renderTo,s="highcharts-"+Ee++,i(e)&&(this.renderTo=e=ae.getElementById(e)),e||Y(13,!0),r=n(h(e,"data-highcharts-chart")),!isNaN(r)&&Ne[r]&&Ne[r].hasRendered&&Ne[r].destroy(),h(e,"data-highcharts-chart",this.index),e.innerHTML="",!a.skipClone&&!e.offsetWidth&&this.cloneRenderTo(),this.getChartSize(),r=this.chartWidth,o=this.chartHeight,this.container=e=g(je,{className:"highcharts-container"+(a.className?" "+a.className:""),id:s},t({position:"relative",overflow:"hidden",width:r+"px",height:o+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},a.style),this.renderToClone||e),this._cursor=e.style.cursor,this.renderer=a.forExport?new ln(e,r,o,a.style,!0):new R(e,r,o,a.style),Ae&&this.renderer.create(this,e,r,o)},getMargins:function(){var t,e=this.spacing,n=this.legend,i=this.margin,r=this.options.legend,o=d(r.margin,20),s=r.x,a=r.y,l=r.align,c=r.verticalAlign,h=this.titleOffset;this.resetMargins(),t=this.axisOffset,h&&!u(i[0])&&(this.plotTop=de(this.plotTop,h+this.options.title.margin+e[0])),n.display&&!r.floating&&("right"===l?u(i[1])||(this.marginRight=de(this.marginRight,n.legendWidth-s+o+e[1])):"left"===l?u(i[3])||(this.plotLeft=de(this.plotLeft,n.legendWidth+s+o+e[3])):"top"===c?u(i[0])||(this.plotTop=de(this.plotTop,n.legendHeight+a+o+e[0])):"bottom"!==c||u(i[2])||(this.marginBottom=de(this.marginBottom,n.legendHeight-a+o+e[2]))),this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin),this.extraTopMargin&&(this.plotTop+=this.extraTopMargin),this.hasCartesianSeries&&Ge(this.axes,function(t){t.getOffset()}),u(i[3])||(this.plotLeft+=t[3]),u(i[0])||(this.plotTop+=t[0]),u(i[2])||(this.marginBottom+=t[2]),u(i[1])||(this.marginRight+=t[1]),this.setChartSize()},reflow:function(t){var e=this,n=e.options.chart,i=e.renderTo,r=n.width||Ve(i,"width"),o=n.height||Ve(i,"height"),n=t?t.target:le,i=function(){e.container&&(e.setSize(r,o,!1),e.hasUserSize=null)};e.hasUserSize||!r||!o||n!==le&&n!==ae||((r!==e.containerWidth||o!==e.containerHeight)&&(clearTimeout(e.reflowTimeout),t?e.reflowTimeout=setTimeout(i,100):i()),e.containerWidth=r,e.containerHeight=o)},initReflow:function(){var t=this,e=function(e){t.reflow(e)};Je(le,"resize",e),Je(t,"destroy",function(){Ke(le,"resize",e)})},setSize:function(t,e,n){var i,r,o,s=this;s.isResizing+=1,o=function(){s&&Ze(s,"endResize",null,function(){s.isResizing-=1})},M(n,s),s.oldChartHeight=s.chartHeight,s.oldChartWidth=s.chartWidth,u(t)&&(s.chartWidth=i=de(0,ue(t)),s.hasUserSize=!!i),u(e)&&(s.chartHeight=r=de(0,ue(e))),($?tn:f)(s.container,{width:i+"px",height:r+"px"},$),s.setChartSize(!0),s.renderer.setSize(i,r,n),s.maxTicks=null,Ge(s.axes,function(t){t.isDirty=!0,t.setScale()}),Ge(s.series,function(t){t.isDirty=!0}),s.isDirtyLegend=!0,s.isDirtyBox=!0,s.layOutTitles(),s.getMargins(),s.redraw(n),s.oldChartHeight=null,Ze(s,"resize"),$===!1?o():setTimeout(o,$&&$.duration||500)},setChartSize:function(t){var e,n,i,r,o=this.inverted,s=this.renderer,a=this.chartWidth,l=this.chartHeight,c=this.options.chart,u=this.spacing,h=this.clipOffset;this.plotLeft=e=ue(this.plotLeft),this.plotTop=n=ue(this.plotTop),this.plotWidth=i=de(0,ue(a-e-this.marginRight)),this.plotHeight=r=de(0,ue(l-n-this.marginBottom)),this.plotSizeX=o?r:i,this.plotSizeY=o?i:r,this.plotBorderWidth=c.plotBorderWidth||0,this.spacingBox=s.spacingBox={x:u[3],y:u[0],width:a-u[3]-u[1],height:l-u[0]-u[2]},this.plotBox=s.plotBox={x:e,y:n,width:i,height:r},a=2*he(this.plotBorderWidth/2),o=pe(de(a,h[3])/2),s=pe(de(a,h[0])/2),this.clipBox={x:o,y:s,width:he(this.plotSizeX-de(a,h[1])/2-o),height:de(0,he(this.plotSizeY-de(a,h[2])/2-s))},t||Ge(this.axes,function(t){t.setAxisSize(),t.setAxisTranslation()})},resetMargins:function(){var t=this.spacing,e=this.margin;this.plotTop=d(e[0],t[0]),this.marginRight=d(e[1],t[1]),this.marginBottom=d(e[2],t[2]),this.plotLeft=d(e[3],t[3]),this.axisOffset=[0,0,0,0],this.clipOffset=[0,0,0,0]},drawChartBox:function(){var t,e=this.options.chart,n=this.renderer,i=this.chartWidth,r=this.chartHeight,o=this.chartBackground,s=this.plotBackground,a=this.plotBorder,l=this.plotBGImage,c=e.borderWidth||0,u=e.backgroundColor,h=e.plotBackgroundColor,p=e.plotBackgroundImage,d=e.plotBorderWidth||0,f=this.plotLeft,g=this.plotTop,m=this.plotWidth,y=this.plotHeight,v=this.plotBox,b=this.clipRect,w=this.clipBox;t=c+(e.shadow?8:0),(c||u)&&(o?o.animate(o.crisp({width:i-t,height:r-t})):(o={fill:u||Re},c&&(o.stroke=e.borderColor,o["stroke-width"]=c),this.chartBackground=n.rect(t/2,t/2,i-t,r-t,e.borderRadius,c).attr(o).addClass("highcharts-background").add().shadow(e.shadow))),h&&(s?s.animate(v):this.plotBackground=n.rect(f,g,m,y,0).attr({fill:h}).add().shadow(e.plotShadow)),p&&(l?l.animate(v):this.plotBGImage=n.image(p,f,g,m,y).add()),b?b.animate({width:w.width,height:w.height}):this.clipRect=n.clipRect(w),d&&(a?a.animate(a.crisp({x:f,y:g,width:m,height:y,strokeWidth:-d})):this.plotBorder=n.rect(f,g,m,y,0,-d).attr({stroke:e.plotBorderColor,"stroke-width":d,fill:Re,zIndex:1}).add()),this.isDirtyBox=!1},propFromSeries:function(){var t,e,n,i=this,r=i.options.chart,o=i.options.series;Ge(["inverted","angular","polar"],function(s){for(t=ze[r.type||r.defaultSeriesType],n=i[s]||r[s]||t&&t.prototype[s],e=o&&o.length;!n&&e--;)(t=ze[o[e].type])&&t.prototype[s]&&(n=!0);i[s]=n})},linkSeries:function(){var t=this,e=t.series;Ge(e,function(t){t.linkedSeries.length=0}),Ge(e,function(e){var n=e.options.linkedTo;i(n)&&(n=":previous"===n?t.series[e.index-1]:t.get(n))&&(n.linkedSeries.push(e),e.linkedParent=n)})},renderSeries:function(){Ge(this.series,function(t){t.translate(),t.setTooltipPoints&&t.setTooltipPoints(),t.render()})},renderLabels:function(){var e=this,i=e.options.labels;i.items&&Ge(i.items,function(r){var o=t(i.style,r.style),s=n(o.left)+e.plotLeft,a=n(o.top)+e.plotTop+12;delete o.left,delete o.top,e.renderer.text(r.html,s,a).attr({zIndex:2}).css(o).add()})},render:function(){var t=this.axes,e=this.renderer,n=this.options;this.setTitle(),this.legend=new bn(this,n.legend),this.getStacks(),Ge(t,function(t){t.setScale()}),this.getMargins(),this.maxTicks=null,Ge(t,function(t){t.setTickPositions(!0),t.setMaxTicks()}),this.adjustTickAmounts(),this.getMargins(),this.drawChartBox(),this.hasCartesianSeries&&Ge(t,function(t){t.render()}),this.seriesGroup||(this.seriesGroup=e.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.showCredits(n.credits),this.hasRendered=!0},showCredits:function(t){t.enabled&&!this.credits&&(this.credits=this.renderer.text(t.text,0,0).on("click",function(){t.href&&(location.href=t.href)}).attr({align:t.position.align,zIndex:8}).css(t.style).add().align(t.position))},destroy:function(){var t,e=this,n=e.axes,i=e.series,r=e.container,o=r&&r.parentNode;for(Ze(e,"destroy"),Ne[e.index]=j,Ie--,e.renderTo.removeAttribute("data-highcharts-chart"),Ke(e),t=n.length;t--;)n[t]=n[t].destroy();for(t=i.length;t--;)i[t]=i[t].destroy();Ge("title,subtitle,chartBackground,plotBackground,plotBGImage,plotBorder,seriesGroup,clipRect,credits,pointer,scroller,rangeSelector,legend,resetZoomButton,tooltip,renderer".split(","),function(t){var n=e[t];n&&n.destroy&&(e[t]=n.destroy())}),r&&(r.innerHTML="",Ke(r),o&&P(r));for(t in e)delete e[t]},isReadyToRender:function(){var t=this;return!De&&le==le.top&&"complete"!==ae.readyState||Ae&&!le.canvg?(Ae?hn.push(function(){t.firstRender()},t.options.global.canvasToolsURL):ae.attachEvent("onreadystatechange",function(){ae.detachEvent("onreadystatechange",t.firstRender),"complete"===ae.readyState&&t.firstRender()}),!1):!0},firstRender:function(){var t=this,e=t.options,n=t.callback;t.isReadyToRender()&&(t.getContainer(),Ze(t,"init"),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.getAxes(),Ge(e.series||[],function(e){t.initSeries(e)}),t.linkSeries(),Ze(t,"beforeRender"),se.Pointer&&(t.pointer=new fn(t,e)),t.render(),t.renderer.draw(),n&&n.apply(t,[t]),Ge(t.callbacks,function(e){e.apply(t,[t])}),t.cloneRenderTo(!0),Ze(t,"load"))},splashArray:function(t,e){var n=e[t],n=r(n)?n:[n,n,n,n];return[d(e[t+"Top"],n[0]),d(e[t+"Right"],n[1]),d(e[t+"Bottom"],n[2]),d(e[t+"Left"],n[3])]}},N.prototype.callbacks=[],cn=se.CenteredSeriesMixin={getCenter:function(){var t,e,i=this.options,r=this.chart,o=2*(i.slicedOffset||0),s=r.plotWidth-2*o,a=r.plotHeight-2*o,r=i.center,i=[d(r[0],"50%"),d(r[1],"50%"),i.size||"100%",i.innerSize||0],l=fe(s,a);return Ue(i,function(i,r){return e=/%$/.test(i),t=2>r||2===r&&e,(e?[s,a,l,l][r]*n(i)/100:i)+(t?o:0)})}};var wn=function(){};wn.prototype={init:function(t,e,n){return this.series=t,this.applyOptions(e,n),this.pointAttr={},t.options.colorByPoint&&(e=t.options.colors||t.chart.options.colors,this.color=this.color||e[t.colorCounter++],t.colorCounter===e.length)&&(t.colorCounter=0),t.chart.pointCount++,this},applyOptions:function(e,n){var i=this.series,r=i.options.pointValKey||i.pointValKey,e=wn.prototype.optionsToObject.call(this,e);return t(this,e),this.options=this.options?t(this.options,e):e,r&&(this.y=this[r]),this.x===j&&i&&(this.x=n===j?i.autoIncrement():n),this},optionsToObject:function(t){var e={},n=this.series,i=n.pointArrayMap||["y"],r=i.length,s=0,a=0;if("number"==typeof t||null===t)e[i[0]]=t;else if(o(t))for(t.length>r&&(n=typeof t[0],"string"===n?e.name=t[0]:"number"===n&&(e.x=t[0]),s++);r>a;)e[i[a++]]=t[s++];else"object"==typeof t&&(e=t,t.dataLabels&&(n._hasPointLabels=!0),t.marker&&(n._hasPointMarkers=!0));return e},destroy:function(){var t,e=this.series.chart,n=e.hoverPoints;e.pointCount--,n&&(this.setState(),c(n,this),!n.length)&&(e.hoverPoints=null),this===e.hoverPoint&&this.onMouseOut(),(this.graphic||this.dataLabel)&&(Ke(this),this.destroyElements()),this.legendItem&&e.legend.destroyItem(this);for(t in this)this[t]=null},destroyElements:function(){for(var t,e="graphic,dataLabel,dataLabelUpper,group,connector,shadowGroup".split(","),n=6;n--;)t=e[n],this[t]&&(this[t]=this[t].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(t){var e=this.series,n=e.tooltipOptions,i=d(n.valueDecimals,""),r=n.valuePrefix||"",o=n.valueSuffix||"";return Ge(e.pointArrayMap||["y"],function(e){e="{point."+e,(r||o)&&(t=t.replace(e+"}",r+e+"}"+o)),t=t.replace(e+"}",e+":,."+i+"f}")}),w(t,{point:this,series:this.series})},firePointEvent:function(t,e,n){var i=this,r=this.series.options;(r.point.events[t]||i.options&&i.options.events&&i.options.events[t])&&this.importEvents(),"click"===t&&r.allowPointSelect&&(n=function(t){i.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),Ze(this,t,e,n)}};var xn=function(){};xn.prototype={isCartesian:!0,type:"line",pointClass:wn,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(e,n){var i,r,o=this,s=e.series,a=function(t,e){return d(t.options.index,t._i)-d(e.options.index,e._i)};o.chart=e,o.options=n=o.setOptions(n),o.linkedSeries=[],o.bindAxes(),t(o,{name:n.name,state:"",pointAttr:{},visible:n.visible!==!1,selected:n.selected===!0}),Ae&&(n.animation=!1),r=n.events;for(i in r)Je(o,i,r[i]);(r&&r.click||n.point&&n.point.events&&n.point.events.click||n.allowPointSelect)&&(e.runTrackerClick=!0),o.getColor(),o.getSymbol(),Ge(o.parallelArrays,function(t){o[t+"Data"]=[]}),o.setData(n.data,!1),o.isCartesian&&(e.hasCartesianSeries=!0),s.push(o),o._i=s.length-1,k(s,a),this.yAxis&&k(this.yAxis.series,a),Ge(s,function(t,e){t.index=e,t.name=t.name||"Series "+(e+1)})},bindAxes:function(){var t,e=this,n=e.options,i=e.chart;Ge(e.axisTypes||[],function(r){Ge(i[r],function(i){t=i.options,(n[r]===t.index||n[r]!==j&&n[r]===t.id||n[r]===j&&0===t.index)&&(i.series.push(e),e[r]=i,i.isDirty=!0)}),!e[r]&&e.optionalAxis!==r&&Y(18,!0)})},updateParallelArrays:function(t,e){var n=t.series,i=arguments;Ge(n.parallelArrays,"number"==typeof e?function(i){var r="y"===i&&n.toYData?n.toYData(t):t[i];n[i+"Data"][e]=r}:function(t){Array.prototype[e].apply(n[t+"Data"],Array.prototype.slice.call(i,2))})},autoIncrement:function(){var t=this.options,e=this.xIncrement,e=d(e,t.pointStart,0);return this.pointInterval=d(this.pointInterval,t.pointInterval,1),this.xIncrement=e+this.pointInterval,e},getSegments:function(){var t,e=-1,n=[],i=this.points,r=i.length;if(r)if(this.options.connectNulls){for(t=r;t--;)null===i[t].y&&i.splice(t,1);i.length&&(n=[i])}else Ge(i,function(t,o){null===t.y?(o>e+1&&n.push(i.slice(e+1,o)),e=o):o===r-1&&n.push(i.slice(e+1,o+1))});this.segments=n},setOptions:function(t){var n=this.chart,i=n.options.plotOptions,n=n.userOptions||{},r=n.plotOptions||{},o=i[this.type];return this.userOptions=t,i=e(o,i.series,t),this.tooltipOptions=e(z.tooltip,z.plotOptions[this.type].tooltip,n.tooltip,r.series&&r.series.tooltip,r[this.type]&&r[this.type].tooltip,t.tooltip),null===o.marker&&delete i.marker,i},getCyclic:function(t,e,n){var i=this.userOptions,r="_"+t+"Index",o=t+"Counter";e||(u(i[r])?e=i[r]:(i[r]=e=this.chart[o]%n.length,this.chart[o]+=1),e=n[e]),this[t]=e},getColor:function(){this.options.colorByPoint||this.getCyclic("color",this.options.color||nn[this.type].color,this.chart.options.colors)},getSymbol:function(){var t=this.options.marker;this.getCyclic("symbol",t.symbol,this.chart.options.symbols),/^url/.test(this.symbol)&&(t.radius=0)},drawLegendSymbol:$e.drawLineMarker,setData:function(t,e,n,r){var a,l=this,c=l.points,u=c&&c.length||0,h=l.options,p=l.chart,f=null,g=l.xAxis,m=g&&!!g.categories,y=l.tooltipPoints,v=h.turboThreshold,b=this.xData,w=this.yData,x=(a=l.pointArrayMap)&&a.length,t=t||[];if(a=t.length,e=d(e,!0),r===!1||!a||u!==a||l.cropped||l.hasGroupedData){if(l.xIncrement=null,l.pointRange=m?1:h.pointRange,l.colorCounter=0,Ge(this.parallelArrays,function(t){l[t+"Data"].length=0}),v&&a>v){for(n=0;null===f&&a>n;)f=t[n],n++;if(s(f)){for(m=d(h.pointStart,0),h=d(h.pointInterval,1),n=0;a>n;n++)b[n]=m,w[n]=t[n],m+=h;l.xIncrement=m}else if(o(f))if(x)for(n=0;a>n;n++)h=t[n],b[n]=h[0],w[n]=h.slice(1,x+1);else for(n=0;a>n;n++)h=t[n],b[n]=h[0],w[n]=h[1];else Y(12)}else for(n=0;a>n;n++)t[n]!==j&&(h={series:l},l.pointClass.prototype.applyOptions.apply(h,[t[n]]),l.updateParallelArrays(h,n),m&&h.name)&&(g.names[h.x]=h.name);for(i(w[0])&&Y(14,!0),l.data=[],l.options.data=t,n=u;n--;)c[n]&&c[n].destroy&&c[n].destroy();y&&(y.length=0),g&&(g.minRange=g.userMinRange),l.isDirty=l.isDirtyData=p.isDirtyBox=!0,n=!1}else Ge(t,function(t,e){c[e].update(t,!1,null,!1)});e&&p.redraw(n)},processData:function(t){var e,n=this.xData,i=this.yData,r=n.length;e=0;var o,s,a,l=this.xAxis,c=this.options;a=c.cropThreshold;var u,h,p=0,d=this.isCartesian;if(d&&!this.isDirty&&!l.isDirty&&!this.yAxis.isDirty&&!t)return!1;for(l&&(u=l.getExtremes(),h=u.min,u=u.max),d&&this.sorted&&(!a||r>a||this.forceCrop)&&(n[r-1]<h||n[0]>u?(n=[],i=[]):(n[0]<h||n[r-1]>u)&&(e=this.cropData(this.xData,this.yData,h,u),n=e.xData,i=e.yData,e=e.start,o=!0,p=n.length)),a=n.length-1;a>=0;a--)r=n[a]-n[a-1],!o&&n[a]>h&&n[a]<u&&p++,r>0&&(s===j||s>r)?s=r:0>r&&this.requireSorting&&Y(15);this.cropped=o,this.cropStart=e,this.processedXData=n,this.processedYData=i,this.activePointCount=p,null===c.pointRange&&(this.pointRange=s||1),this.closestPointRange=s},cropData:function(t,e,n,i){var r,o=t.length,s=0,a=o,l=d(this.cropShoulder,1);for(r=0;o>r;r++)if(t[r]>=n){s=de(0,r-l);break}for(;o>r;r++)if(t[r]>i){a=r+l;break}return{xData:t.slice(s,a),yData:e.slice(s,a),start:s,end:a}},generatePoints:function(){var t,e,n,i,r=this.options.data,o=this.data,s=this.processedXData,a=this.processedYData,l=this.pointClass,c=s.length,u=this.cropStart||0,h=this.hasGroupedData,d=[];for(o||h||(o=[],o.length=r.length,o=this.data=o),i=0;c>i;i++)e=u+i,h?d[i]=(new l).init(this,[s[i]].concat(p(a[i]))):(o[e]?n=o[e]:r[e]!==j&&(o[e]=n=(new l).init(this,r[e],s[i])),d[i]=n),d[i].index=e;if(o&&(c!==(t=o.length)||h))for(i=0;t>i;i++)i===u&&!h&&(i+=c),o[i]&&(o[i].destroyElements(),o[i].plotX=j);this.data=o,this.points=d},getExtremes:function(t){var e,n=this.yAxis,i=this.processedXData,r=[],o=0;e=this.xAxis.getExtremes();var s,a,l,c,u=e.min,h=e.max,t=t||this.stackedYData||this.processedYData;for(e=t.length,c=0;e>c;c++)if(a=i[c],l=t[c],s=null!==l&&l!==j&&(!n.isLog||l.length||l>0),a=this.getExtremesFromAll||this.cropped||(i[c+1]||a)>=u&&(i[c-1]||a)<=h,s&&a)if(s=l.length)for(;s--;)null!==l[s]&&(r[o++]=l[s]);else r[o++]=l;this.dataMin=d(void 0,T(r)),this.dataMax=d(void 0,S(r))},translate:function(){this.processedXData||this.processData(),this.generatePoints();for(var t=this.options,e=t.stacking,n=this.xAxis,i=n.categories,r=this.yAxis,o=this.points,a=o.length,l=!!this.modifyValue,c=t.pointPlacement,h="between"===c||s(c),p=t.threshold,t=0;a>t;t++){var f=o[t],g=f.x,m=f.y,y=f.low,v=e&&r.stacks[(this.negStacks&&p>m?"-":"")+this.stackKey];r.isLog&&0>=m&&(f.y=m=null,Y(10)),f.plotX=n.translate(g,0,0,0,1,c,"flags"===this.type),e&&this.visible&&v&&v[g]&&(v=v[g],m=v.points[this.index+","+t],y=m[0],m=m[1],0===y&&(y=d(p,r.min)),r.isLog&&0>=y&&(y=null),f.total=f.stackTotal=v.total,f.percentage=v.total&&f.y/v.total*100,f.stackY=m,v.setOffset(this.pointXOffset||0,this.barW||0)),f.yBottom=u(y)?r.translate(y,0,1,0,1):null,l&&(m=this.modifyValue(m,f)),f.plotY="number"==typeof m&&1/0!==m?r.translate(m,0,1,0,1):j,f.clientX=h?n.translate(g,0,0,0,1):f.plotX,f.negative=f.y<(p||0),f.category=i&&i[f.x]!==j?i[f.x]:f.x}this.getSegments()},animate:function(e){var n,i=this.chart,o=i.renderer;n=this.options.animation;var s,a=this.clipBox||i.clipBox,l=i.inverted;n&&!r(n)&&(n=nn[this.type].animation),s=["_sharedClip",n.duration,n.easing,a.height].join(","),e?(e=i[s],n=i[s+"m"],e||(i[s]=e=o.clipRect(t(a,{width:0})),i[s+"m"]=n=o.clipRect(-99,l?-i.plotLeft:-i.plotTop,99,l?i.chartWidth:i.chartHeight)),this.group.clip(e),this.markerGroup.clip(n),this.sharedClipKey=s):((e=i[s])&&e.animate({width:i.plotSizeX},n),i[s+"m"]&&i[s+"m"].animate({width:i.plotSizeX+99},n),this.animate=null)},afterAnimate:function(){var t=this.chart,e=this.sharedClipKey,n=this.group,i=this.clipBox;n&&this.options.clip!==!1&&(e&&i||n.clip(i?t.renderer.clipRect(i):t.clipRect),this.markerGroup.clip()),Ze(this,"afterAnimate"),setTimeout(function(){e&&t[e]&&(i||(t[e]=t[e].destroy()),t[e+"m"]&&(t[e+"m"]=t[e+"m"].destroy()))},100)},drawPoints:function(){var e,n,i,r,o,s,a,l,c,u,h,p,f=this.points,g=this.chart,m=this.options.marker,y=this.pointAttr[""],v=this.markerGroup,b=d(m.enabled,!this.requireSorting||this.activePointCount<.5*this.xAxis.len/m.radius);if(m.enabled!==!1||this._hasPointMarkers)for(r=f.length;r--;)o=f[r],n=he(o.plotX),i=o.plotY,c=o.graphic,u=o.marker||{},h=!!o.marker,e=b&&u.enabled===j||u.enabled,p=g.isInsidePlot(ue(n),i,g.inverted),e&&i!==j&&!isNaN(i)&&null!==o.y?(e=o.pointAttr[o.selected?"select":""]||y,s=e.r,a=d(u.symbol,this.symbol),l=0===a.indexOf("url"),c?c[p?"show":"hide"](!0).animate(t({x:n-s,y:i-s},c.symbolName?{width:2*s,height:2*s}:{})):p&&(s>0||l)&&(o.graphic=g.renderer.symbol(a,n-s,i-s,2*s,2*s,h?u:m).attr(e).add(v))):c&&(o.graphic=c.destroy())},convertAttribs:function(t,e,n,i){var r,o,s=this.pointAttrToOptions,a={},t=t||{},e=e||{},n=n||{},i=i||{};for(r in s)o=s[r],a[r]=d(t[o],e[r],n[r],i[r]);return a},getAttribs:function(){var e,n=this,i=n.options,r=nn[n.type].marker?i.marker:i,o=r.states,s=o.hover,a=n.color;e={stroke:a,fill:a};var l,c,h=n.points||[],p=[],d=n.pointAttrToOptions;c=n.hasPointSpecificOptions;var f=i.negativeColor,g=r.lineColor,m=r.fillColor;l=i.turboThreshold;var y;if(i.marker?(s.radius=s.radius||r.radius+s.radiusPlus,s.lineWidth=s.lineWidth||r.lineWidth+s.lineWidthPlus):s.color=s.color||an(s.color||a).brighten(s.brightness).get(),p[""]=n.convertAttribs(r,e),Ge(["hover","select"],function(t){p[t]=n.convertAttribs(o[t],p[""])}),n.pointAttr=p,a=h.length,!l||l>a||c)for(;a--;){if(l=h[a],(r=l.options&&l.options.marker||l.options)&&r.enabled===!1&&(r.radius=0),l.negative&&f&&(l.color=l.fillColor=f),c=i.colorByPoint||l.color,l.options)for(y in d)u(r[d[y]])&&(c=!0);c?(r=r||{},c=[],o=r.states||{},e=o.hover=o.hover||{},i.marker||(e.color=e.color||!l.options.color&&s.color||an(l.color).brighten(e.brightness||s.brightness).get()),e={color:l.color},m||(e.fillColor=l.color),g||(e.lineColor=l.color),c[""]=n.convertAttribs(t(e,r),p[""]),c.hover=n.convertAttribs(o.hover,p.hover,c[""]),c.select=n.convertAttribs(o.select,p.select,c[""])):c=p,l.pointAttr=c}},destroy:function(){var t,e,n,i,r,o=this,s=o.chart,a=/AppleWebKit\/533/.test(we),l=o.data||[];for(Ze(o,"destroy"),Ke(o),Ge(o.axisTypes||[],function(t){(r=o[t])&&(c(r.series,o),r.isDirty=r.forceRedraw=!0)}),o.legendItem&&o.chart.legend.destroyItem(o),e=l.length;e--;)(n=l[e])&&n.destroy&&n.destroy();o.points=null,clearTimeout(o.animationTimeout),Ge("area,graph,dataLabelsGroup,group,markerGroup,tracker,graphNeg,areaNeg,posClip,negClip".split(","),function(e){o[e]&&(t=a&&"group"===e?"hide":"destroy",o[e][t]())}),s.hoverSeries===o&&(s.hoverSeries=null),c(s.series,o);for(i in o)delete o[i]},getSegmentPath:function(t){var e=this,n=[],i=e.options.step;return Ge(t,function(r,o){var s,a=r.plotX,l=r.plotY;e.getPointSpline?n.push.apply(n,e.getPointSpline(t,r,o)):(n.push(o?"L":"M"),i&&o&&(s=t[o-1],"right"===i?n.push(s.plotX,l):"center"===i?n.push((s.plotX+a)/2,s.plotY,(s.plotX+a)/2,l):n.push(a,s.plotY)),n.push(r.plotX,r.plotY))}),n},getGraphPath:function(){var t,e=this,n=[],i=[];return Ge(e.segments,function(r){t=e.getSegmentPath(r),r.length>1?n=n.concat(t):i.push(r[0])}),e.singlePoints=i,e.graphPath=n},drawGraph:function(){var t=this,e=this.options,n=[["graph",e.lineColor||this.color]],i=e.lineWidth,r=e.dashStyle,o="square"!==e.linecap,s=this.getGraphPath(),a=e.negativeColor;a&&n.push(["graphNeg",a]),Ge(n,function(n,a){var l=n[0],c=t[l];c?(en(c),c.animate({d:s})):i&&s.length&&(c={stroke:n[1],"stroke-width":i,fill:Re,zIndex:1},r?c.dashstyle=r:o&&(c["stroke-linecap"]=c["stroke-linejoin"]="round"),t[l]=t.chart.renderer.path(s).attr(c).add(t.group).shadow(!a&&e.shadow))})},clipNeg:function(){var t,e=this.options,n=this.chart,i=n.renderer,r=e.negativeColor||e.negativeFillColor,o=this.graph,s=this.area,a=this.posClip,l=this.negClip;t=n.chartWidth;var c=n.chartHeight,u=de(t,c),h=this.yAxis;r&&(o||s)&&(r=ue(h.toPixels(e.threshold||0,!0)),0>r&&(u-=r),e={x:0,y:0,width:u,height:r},u={x:0,y:r,width:u,height:u},n.inverted&&(e.height=u.y=n.plotWidth-r,i.isVML&&(e={x:n.plotWidth-r-n.plotLeft,y:0,width:t,height:c},u={x:r+n.plotLeft-t,y:0,width:n.plotLeft+r,height:t})),h.reversed?(n=u,t=e):(n=e,t=u),a?(a.animate(n),l.animate(t)):(this.posClip=a=i.clipRect(n),this.negClip=l=i.clipRect(t),o&&this.graphNeg&&(o.clip(a),this.graphNeg.clip(l)),s&&(s.clip(a),this.areaNeg.clip(l))))},invertGroups:function(){function t(){var t={width:e.yAxis.len,height:e.xAxis.len};Ge(["group","markerGroup"],function(n){e[n]&&e[n].attr(t).invert()})}var e=this,n=e.chart;e.xAxis&&(Je(n,"resize",t),Je(e,"destroy",function(){Ke(n,"resize",t)}),t(),e.invertGroups=t)},plotGroup:function(t,e,n,i,r){var o=this[t],s=!o;return s&&(this[t]=o=this.chart.renderer.g(e).attr({visibility:n,zIndex:i||.1}).add(r)),o[s?"attr":"animate"](this.getPlotBox()),o},getPlotBox:function(){var t=this.chart,e=this.xAxis,n=this.yAxis;return t.inverted&&(e=n,n=this.xAxis),{translateX:e?e.left:t.plotLeft,translateY:n?n.top:t.plotTop,scaleX:1,scaleY:1}},render:function(){var t,e=this,n=e.chart,i=e.options,r=(t=i.animation)&&!!e.animate&&n.renderer.isSVG&&d(t.duration,500)||0,o=e.visible?"visible":"hidden",s=i.zIndex,a=e.hasRendered,l=n.seriesGroup;t=e.plotGroup("group","series",o,s,l),e.markerGroup=e.plotGroup("markerGroup","markers",o,s,l),r&&e.animate(!0),e.getAttribs(),t.inverted=e.isCartesian?n.inverted:!1,e.drawGraph&&(e.drawGraph(),e.clipNeg()),Ge(e.points,function(t){t.redraw&&t.redraw()}),e.drawDataLabels&&e.drawDataLabels(),e.visible&&e.drawPoints(),e.drawTracker&&e.options.enableMouseTracking!==!1&&e.drawTracker(),n.inverted&&e.invertGroups(),i.clip!==!1&&!e.sharedClipKey&&!a&&t.clip(n.clipRect),r&&e.animate(),a||(r?e.animationTimeout=setTimeout(function(){e.afterAnimate()},r):e.afterAnimate()),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var t=this.chart,e=this.isDirtyData,n=this.group,i=this.xAxis,r=this.yAxis;n&&(t.inverted&&n.attr({width:t.plotWidth,height:t.plotHeight}),n.animate({translateX:d(i&&i.left,t.plotLeft),translateY:d(r&&r.top,t.plotTop)})),this.translate(),this.setTooltipPoints&&this.setTooltipPoints(!0),this.render(),e&&Ze(this,"updatedData")}},I.prototype={destroy:function(){C(this,this.axis)},render:function(t){var e=this.options,n=e.format,n=n?w(n,this):e.formatter.call(this);this.label?this.label.attr({text:n,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(n,null,null,e.useHTML).css(e.style).attr({align:this.textAlign,rotation:e.rotation,visibility:"hidden"}).add(t)},setOffset:function(t,e){var n=this.axis,i=n.chart,r=i.inverted,o=this.isNegative,s=n.translate(n.usePercentage?100:this.total,0,0,0,1),n=n.translate(0),n=ge(s-n),a=i.xAxis[0].translate(this.x)+t,l=i.plotHeight,o={x:r?o?s:s-n:a,y:r?l-a-e:o?l-s-n:l-s,width:r?n:e,height:r?e:n};(r=this.label)&&(r.align(this.alignOptions,null,o),o=r.alignAttr,r[this.options.crop===!1||i.isInsidePlot(o.x,o.y)?"show":"hide"](!0))}},L.prototype.buildStacks=function(){var t=this.series,e=d(this.options.reversedStacks,!0),n=t.length;if(!this.isXAxis){for(this.usePercentage=!1;n--;)t[e?n:t.length-n-1].setStackedPoints();if(this.usePercentage)for(n=0;n<t.length;n++)t[n].setPercentStacks()}},L.prototype.renderStackTotals=function(){var t,e,n=this.chart,i=n.renderer,r=this.stacks,o=this.stackTotalGroup;o||(this.stackTotalGroup=o=i.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()),o.translate(n.plotLeft,n.plotTop);for(t in r)for(e in n=r[t])n[e].render(o)},xn.prototype.setStackedPoints=function(){if(this.options.stacking&&(this.visible===!0||this.chart.options.chart.ignoreHiddenSeries===!1)){var t,e,n,i,r,o,s=this.processedXData,a=this.processedYData,l=[],c=a.length,u=this.options,h=u.threshold,p=u.stack,u=u.stacking,d=this.stackKey,f="-"+d,g=this.negStacks,m=this.yAxis,y=m.stacks,v=m.oldStacks;for(i=0;c>i;i++)r=s[i],o=a[i],n=this.index+","+i,e=(t=g&&h>o)?f:d,y[e]||(y[e]={}),y[e][r]||(v[e]&&v[e][r]?(y[e][r]=v[e][r],y[e][r].total=null):y[e][r]=new I(m,m.options.stackLabels,t,r,p)),e=y[e][r],e.points[n]=[e.cum||0],"percent"===u?(t=t?d:f,g&&y[t]&&y[t][r]?(t=y[t][r],e.total=t.total=de(t.total,e.total)+ge(o)||0):e.total=D(e.total+(ge(o)||0))):e.total=D(e.total+(o||0)),e.cum=(e.cum||0)+(o||0),e.points[n].push(e.cum),l[i]=e.cum;
"percent"===u&&(m.usePercentage=!0),this.stackedYData=l,m.oldStacks={}}},xn.prototype.setPercentStacks=function(){var t=this,e=t.stackKey,n=t.yAxis.stacks,i=t.processedXData;Ge([e,"-"+e],function(e){for(var r,o,s,a=i.length;a--;)o=i[a],r=(s=n[e]&&n[e][o])&&s.points[t.index+","+a],(o=r)&&(s=s.total?100/s.total:0,o[0]=D(o[0]*s),o[1]=D(o[1]*s),t.stackedYData[a]=o[1])})},t(N.prototype,{addSeries:function(t,e,n){var i,r=this;return t&&(e=d(e,!0),Ze(r,"addSeries",{options:t},function(){i=r.initSeries(t),r.isDirtyLegend=!0,r.linkSeries(),e&&r.redraw(n)})),i},addAxis:function(t,n,i,r){var o=n?"xAxis":"yAxis",s=this.options;new L(this,e(t,{index:this[o].length,isX:n})),s[o]=p(s[o]||{}),s[o].push(t),d(i,!0)&&this.redraw(r)},showLoading:function(e){var n=this,i=n.options,r=n.loadingDiv,o=i.loading,s=function(){r&&f(r,{left:n.plotLeft+"px",top:n.plotTop+"px",width:n.plotWidth+"px",height:n.plotHeight+"px"})};r||(n.loadingDiv=r=g(je,{className:"highcharts-loading"},t(o.style,{zIndex:10,display:Re}),n.container),n.loadingSpan=g("span",null,o.labelStyle,r),Je(n,"redraw",s)),n.loadingSpan.innerHTML=e||i.lang.loading,n.loadingShown||(f(r,{opacity:0,display:""}),tn(r,{opacity:o.style.opacity},{duration:o.showDuration||0}),n.loadingShown=!0),s()},hideLoading:function(){var t=this.options,e=this.loadingDiv;e&&tn(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){f(e,{display:Re})}}),this.loadingShown=!1}}),t(wn.prototype,{update:function(t,e,n,i){function s(){l.applyOptions(t),r(t)&&!o(t)&&(l.redraw=function(){u&&(t&&t.marker&&t.marker.symbol?l.graphic=u.destroy():u.attr(l.pointAttr[l.state||""])),t&&t.dataLabels&&l.dataLabel&&(l.dataLabel=l.dataLabel.destroy()),l.redraw=null}),a=l.index,c.updateParallelArrays(l,a),p.data[a]=l.options,c.isDirty=c.isDirtyData=!0,!c.fixedBox&&c.hasCartesianSeries&&(h.isDirtyBox=!0),"point"===p.legendType&&h.legend.destroyItem(l),e&&h.redraw(n)}var a,l=this,c=l.series,u=l.graphic,h=c.chart,p=c.options,e=d(e,!0);i===!1?s():l.firePointEvent("update",{options:t},s)},remove:function(t,e){var n,i=this,r=i.series,o=r.points,s=r.chart,a=r.data;M(e,s),t=d(t,!0),i.firePointEvent("remove",null,function(){n=Ye(i,a),a.length===o.length&&o.splice(n,1),a.splice(n,1),r.options.data.splice(n,1),r.updateParallelArrays(i,"splice",n,1),i.destroy(),r.isDirty=!0,r.isDirtyData=!0,t&&s.redraw()})}}),t(xn.prototype,{addPoint:function(t,e,n,i){var r,o=this.options,s=this.data,a=this.graph,l=this.area,c=this.chart,u=this.xAxis&&this.xAxis.names,h=a&&a.shift||0,p=o.data,f=this.xData;if(M(i,c),n&&Ge([a,l,this.graphNeg,this.areaNeg],function(t){t&&(t.shift=h+1)}),l&&(l.isArea=!0),e=d(e,!0),i={series:this},this.pointClass.prototype.applyOptions.apply(i,[t]),a=i.x,l=f.length,this.requireSorting&&a<f[l-1])for(r=!0;l&&f[l-1]>a;)l--;this.updateParallelArrays(i,"splice",l,0,0),this.updateParallelArrays(i,l),u&&i.name&&(u[a]=i.name),p.splice(l,0,t),r&&(this.data.splice(l,0,null),this.processData()),"point"===o.legendType&&this.generatePoints(),n&&(s[0]&&s[0].remove?s[0].remove(!1):(s.shift(),this.updateParallelArrays(i,"shift"),p.shift())),this.isDirtyData=this.isDirty=!0,e&&(this.getAttribs(),c.redraw())},remove:function(t,e){var n=this,i=n.chart,t=d(t,!0);n.isRemoving||(n.isRemoving=!0,Ze(n,"remove",null,function(){n.destroy(),i.isDirtyLegend=i.isDirtyBox=!0,i.linkSeries(),t&&i.redraw(e)})),n.isRemoving=!1},update:function(n,i){var r,o=this,s=this.chart,a=this.userOptions,l=this.type,c=ze[l].prototype,u=["group","markerGroup","dataLabelsGroup"];Ge(u,function(t){u[t]=o[t],delete o[t]}),n=e(a,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},n),this.remove(!1);for(r in c)c.hasOwnProperty(r)&&(this[r]=j);t(this,ze[n.type||l].prototype),Ge(u,function(t){o[t]=u[t]}),this.init(s,n),s.linkSeries(),d(i,!0)&&s.redraw(!1)}}),t(L.prototype,{update:function(n,i){var r=this.chart,n=r.options[this.coll][this.options.index]=e(this.userOptions,n);this.destroy(!0),this._addedPlotLB=j,this.init(r,t(n,{events:j})),r.isDirtyBox=!0,d(i,!0)&&r.redraw()},remove:function(t){for(var e=this.chart,n=this.coll,i=this.series,r=i.length;r--;)i[r]&&i[r].remove(!1);c(e.axes,this),c(e[n],this),e.options[n].splice(this.options.index,1),Ge(e[n],function(t,e){t.options.index=e}),this.destroy(),e.isDirtyBox=!0,d(t,!0)&&e.redraw()},setTitle:function(t,e){this.update({title:t},e)},setCategories:function(t,e){this.update({categories:t},e)}}),un=m(xn),ze.line=un,nn.area=e(Be,{threshold:0});var _n=m(xn,{type:"area",getSegments:function(){var t,e,n,i,r=this,o=[],s=[],a=[],l=this.xAxis,c=this.yAxis,u=c.stacks[this.stackKey],h={},p=this.points,d=this.options.connectNulls;if(this.options.stacking&&!this.cropped){for(n=0;n<p.length;n++)h[p[n].x]=p[n];for(i in u)null!==u[i].total&&a.push(+i);a.sort(function(t,e){return t-e}),Ge(a,function(i){var o,a=0;if(!d||h[i]&&null!==h[i].y)if(h[i])s.push(h[i]);else{for(n=r.index;n<=c.series.length;n++)if(o=u[i].points[n+","+i]){a=o[1];break}t=l.translate(i),e=c.toPixels(a,!0),s.push({y:null,plotX:t,clientX:t,plotY:e,yBottom:e,onMouseOver:Le})}}),s.length&&o.push(s)}else xn.prototype.getSegments.call(this),o=this.segments;this.segments=o},getSegmentPath:function(t){var e,n=xn.prototype.getSegmentPath.call(this,t),i=[].concat(n),r=this.options;e=n.length;var o,s=this.yAxis.getThreshold(r.threshold);if(3===e&&i.push("L",n[1],n[2]),r.stacking&&!this.closedStacks)for(e=t.length-1;e>=0;e--)o=d(t[e].yBottom,s),e<t.length-1&&r.step&&i.push(t[e+1].plotX,o),i.push(t[e].plotX,o);else this.closeSegment(i,t,s);return this.areaPath=this.areaPath.concat(i),n},closeSegment:function(t,e,n){t.push("L",e[e.length-1].plotX,n,"L",e[0].plotX,n)},drawGraph:function(){this.areaPath=[],xn.prototype.drawGraph.apply(this);var t=this,e=this.areaPath,n=this.options,i=n.negativeColor,r=n.negativeFillColor,o=[["area",this.color,n.fillColor]];(i||r)&&o.push(["areaNeg",i,r]),Ge(o,function(i){var r=i[0],o=t[r];o?o.animate({d:e}):t[r]=t.chart.renderer.path(e).attr({fill:d(i[2],an(i[1]).setOpacity(d(n.fillOpacity,.75)).get()),zIndex:0}).add(t.group)})},drawLegendSymbol:$e.drawRectangle});ze.area=_n,nn.spline=e(Be),un=m(xn,{type:"spline",getPointSpline:function(t,e,n){var i,r,o,s,a=e.plotX,l=e.plotY,c=t[n-1],u=t[n+1];if(c&&u){t=c.plotY,o=u.plotX;var h,u=u.plotY;i=(1.5*a+c.plotX)/2.5,r=(1.5*l+t)/2.5,o=(1.5*a+o)/2.5,s=(1.5*l+u)/2.5,h=(s-r)*(o-a)/(o-i)+l-s,r+=h,s+=h,r>t&&r>l?(r=de(t,l),s=2*l-r):t>r&&l>r&&(r=fe(t,l),s=2*l-r),s>u&&s>l?(s=de(u,l),r=2*l-s):u>s&&l>s&&(s=fe(u,l),r=2*l-s),e.rightContX=o,e.rightContY=s}return n?(e=["C",c.rightContX||c.plotX,c.rightContY||c.plotY,i||a,r||l,a,l],c.rightContX=c.rightContY=null):e=["M",a,l],e}}),ze.spline=un,nn.areaspline=e(nn.area),_n=_n.prototype,un=m(un,{type:"areaspline",closedStacks:!0,getSegmentPath:_n.getSegmentPath,closeSegment:_n.closeSegment,drawGraph:_n.drawGraph,drawLegendSymbol:$e.drawRectangle}),ze.areaspline=un,nn.column=e(Be,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,tooltip:{distance:6},threshold:0}),un=m(xn,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){xn.prototype.init.apply(this,arguments);var t=this,e=t.chart;e.hasRendered&&Ge(e.series,function(e){e.type===t.type&&(e.isDirty=!0)})},getColumnMetrics:function(){var t,e,n=this,i=n.options,r=n.xAxis,o=n.yAxis,s=r.reversed,a={},l=0;i.grouping===!1?l=1:Ge(n.chart.series,function(i){var r=i.options,s=i.yAxis;i.type===n.type&&i.visible&&o.len===s.len&&o.pos===s.pos&&(r.stacking?(t=i.stackKey,a[t]===j&&(a[t]=l++),e=a[t]):r.grouping!==!1&&(e=l++),i.columnIndex=e)});var r=fe(ge(r.transA)*(r.ordinalSlope||i.pointRange||r.closestPointRange||r.tickInterval||1),r.len),c=r*i.groupPadding,h=(r-2*c)/l,p=i.pointWidth,i=u(p)?(h-p)/2:h*i.pointPadding,p=d(p,h-2*i);return n.columnMetrics={width:p,offset:i+(c+((s?l-(n.columnIndex||0):n.columnIndex)||0)*h-r/2)*(s?-1:1)}},translate:function(){var t=this,e=t.chart,n=t.options,i=t.borderWidth=d(n.borderWidth,t.activePointCount>.5*t.xAxis.len?0:1),r=t.yAxis,o=t.translatedThreshold=r.getThreshold(n.threshold),s=d(n.minPointLength,5),a=t.getColumnMetrics(),l=a.width,c=t.barW=de(l,1+2*i),u=t.pointXOffset=a.offset,h=-(i%2?.5:0),p=i%2?.5:1;e.renderer.isVML&&e.inverted&&(p+=1),n.pointPadding&&(c=pe(c)),xn.prototype.translate.apply(t),Ge(t.points,function(n){var i,a=d(n.yBottom,o),f=fe(de(-999-a,n.plotY),r.len+999+a),g=n.plotX+u,m=c,y=fe(f,a);i=de(f,a)-y,ge(i)<s&&s&&(i=s,y=ue(ge(y-o)>s?a-s:o-(r.translate(n.y,0,1,0,1)<=o?s:0))),n.barX=g,n.pointWidth=l,n.tooltipPos=e.inverted?[r.len-f,t.xAxis.len-g-m/2]:[g+m/2,f+r.pos-e.plotTop],m=ue(g+m)+h,g=ue(g)+h,m-=g,a=ge(y)<.5,i=ue(y+i)+p,y=ue(y)+p,i-=y,a&&(y-=1,i+=1),n.shapeType="rect",n.shapeArgs={x:g,y:y,width:m,height:i}})},getSymbol:Le,drawLegendSymbol:$e.drawRectangle,drawGraph:Le,drawPoints:function(){var t,n,i=this,r=this.chart,o=i.options,s=r.renderer,a=o.animationLimit||250;Ge(i.points,function(l){var c=l.plotY,h=l.graphic;c===j||isNaN(c)||null===l.y?h&&(l.graphic=h.destroy()):(t=l.shapeArgs,c=u(i.borderWidth)?{"stroke-width":i.borderWidth}:{},n=l.pointAttr[l.selected?"select":""]||i.pointAttr[""],h?(en(h),h.attr(c)[r.pointCount<a?"animate":"attr"](e(t))):l.graphic=s[l.shapeType](t).attr(n).attr(c).add(i.group).shadow(o.shadow,null,o.stacking&&!o.borderRadius))})},animate:function(t){var e=this.yAxis,n=this.options,i=this.chart.inverted,r={};De&&(t?(r.scaleY=.001,t=fe(e.pos+e.len,de(e.pos,e.toPixels(n.threshold))),i?r.translateX=t-e.len:r.translateY=t,this.group.attr(r)):(r.scaleY=1,r[i?"translateX":"translateY"]=e.pos,this.group.animate(r,this.options.animation),this.animate=null))},remove:function(){var t=this,e=t.chart;e.hasRendered&&Ge(e.series,function(e){e.type===t.type&&(e.isDirty=!0)}),xn.prototype.remove.apply(t,arguments)}}),ze.column=un,nn.bar=e(nn.column),_n=m(un,{type:"bar",inverted:!0}),ze.bar=_n,nn.scatter=e(Be,{lineWidth:0,tooltip:{headerFormat:'<span style="color:{series.color}">\xe2\u2014\x8f</span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"},stickyTracking:!1}),_n=m(xn,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,singularTooltips:!0,drawGraph:function(){this.options.lineWidth&&xn.prototype.drawGraph.call(this)}}),ze.scatter=_n,nn.pie=e(Be,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}}),Be={type:"pie",isCartesian:!1,pointClass:m(wn,{init:function(){wn.prototype.init.apply(this,arguments);var e,n=this;return n.y<0&&(n.y=null),t(n,{visible:n.visible!==!1,name:d(n.name,"Slice")}),e=function(t){n.slice("select"===t.type)},Je(n,"select",e),Je(n,"unselect",e),n},setVisible:function(t){var e=this,n=e.series,i=n.chart;e.visible=e.options.visible=t=t===j?!e.visible:t,n.options.data[Ye(e,n.data)]=e.options,Ge(["graphic","dataLabel","connector","shadowGroup"],function(n){e[n]&&e[n][t?"show":"hide"](!0)}),e.legendItem&&i.legend.colorizeItem(e,t),!n.isDirty&&n.options.ignoreHiddenPoint&&(n.isDirty=!0,i.redraw())},slice:function(t,e,n){var i=this.series;M(n,i.chart),d(e,!0),this.sliced=this.options.sliced=t=u(t)?t:!this.sliced,i.options.data[Ye(this,i.data)]=this.options,t=t?this.slicedTranslation:{translateX:0,translateY:0},this.graphic.animate(t),this.shadowGroup&&this.shadowGroup.animate(t)},haloPath:function(t){var e=this.shapeArgs,n=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(n.plotLeft+e.x,n.plotTop+e.y,e.r+t,e.r+t,{innerR:this.shapeArgs.r,start:e.start,end:e.end})}}),requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},singularTooltips:!0,getColor:Le,animate:function(t){var e=this,n=e.points,i=e.startAngleRad;t||(Ge(n,function(t){var n=t.graphic,t=t.shapeArgs;n&&(n.attr({r:e.center[3]/2,start:i,end:i}),n.animate({r:t.r,start:t.start,end:t.end},e.options.animation))}),e.animate=null)},setData:function(t,e,n,i){xn.prototype.setData.call(this,t,!1,n,i),this.processData(),this.generatePoints(),d(e,!0)&&this.chart.redraw(n)},generatePoints:function(){var t,e,n,i,r=0,o=this.options.ignoreHiddenPoint;for(xn.prototype.generatePoints.call(this),e=this.points,n=e.length,t=0;n>t;t++)i=e[t],r+=o&&!i.visible?0:i.y;for(this.total=r,t=0;n>t;t++)i=e[t],i.percentage=r>0?i.y/r*100:0,i.total=r},translate:function(t){this.generatePoints();var e,n,i,r,o,s=0,a=this.options,l=a.slicedOffset,c=l+a.borderWidth,u=a.startAngle||0,h=this.startAngleRad=ve/180*(u-90),u=(this.endAngleRad=ve/180*(d(a.endAngle,u+360)-90))-h,p=this.points,f=a.dataLabels.distance,a=a.ignoreHiddenPoint,g=p.length;for(t||(this.center=t=this.getCenter()),this.getX=function(e,n){return i=ce.asin(fe((e-t[1])/(t[2]/2+f),1)),t[0]+(n?-1:1)*me(i)*(t[2]/2+f)},r=0;g>r;r++)o=p[r],e=h+s*u,(!a||o.visible)&&(s+=o.percentage/100),n=h+s*u,o.shapeType="arc",o.shapeArgs={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:ue(1e3*e)/1e3,end:ue(1e3*n)/1e3},i=(n+e)/2,i>1.5*ve?i-=2*ve:-ve/2>i&&(i+=2*ve),o.slicedTranslation={translateX:ue(me(i)*l),translateY:ue(ye(i)*l)},e=me(i)*t[2]/2,n=ye(i)*t[2]/2,o.tooltipPos=[t[0]+.7*e,t[1]+.7*n],o.half=-ve/2>i||i>ve/2?1:0,o.angle=i,c=fe(c,f/2),o.labelPos=[t[0]+e+me(i)*f,t[1]+n+ye(i)*f,t[0]+e+me(i)*c,t[1]+n+ye(i)*c,t[0]+e,t[1]+n,0>f?"center":o.half?"right":"left",i]},drawGraph:null,drawPoints:function(){var e,n,i,r,o=this,s=o.chart.renderer,a=o.options.shadow;a&&!o.shadowGroup&&(o.shadowGroup=s.g("shadow").add(o.group)),Ge(o.points,function(l){n=l.graphic,r=l.shapeArgs,i=l.shadowGroup,a&&!i&&(i=l.shadowGroup=s.g("shadow").add(o.shadowGroup)),e=l.sliced?l.slicedTranslation:{translateX:0,translateY:0},i&&i.attr(e),n?n.animate(t(r,e)):l.graphic=n=s[l.shapeType](r).setRadialReference(o.center).attr(l.pointAttr[l.selected?"select":""]).attr({"stroke-linejoin":"round"}).attr(e).add(o.group).shadow(a,i),void 0!==l.visible&&l.setVisible(l.visible)})},sortByAngle:function(t,e){t.sort(function(t,n){return void 0!==t.angle&&(n.angle-t.angle)*e})},drawLegendSymbol:$e.drawRectangle,getCenter:cn.getCenter,getSymbol:Le},Be=m(xn,Be),ze.pie=Be,xn.prototype.drawDataLabels=function(){var n,i,r,o,s=this,a=s.options,l=a.cursor,c=a.dataLabels,h=s.points,p=s.hasRendered||0;(c.enabled||s._hasPointLabels)&&(s.dlProcessOptions&&s.dlProcessOptions(c),o=s.plotGroup("dataLabelsGroup","data-labels",c.defer?"hidden":"visible",c.zIndex||6),d(c.defer,!0)&&(o.attr({opacity:+p}),p||Je(s,"afterAnimate",function(){s.visible&&o.show(),o[a.animation?"animate":"attr"]({opacity:1},{duration:200})})),i=c,Ge(h,function(a){var h,p,f,g=a.dataLabel,m=a.connector,y=!0;if(n=a.options&&a.options.dataLabels,h=d(n&&n.enabled,i.enabled),g&&!h)a.dataLabel=g.destroy();else if(h){if(c=e(i,n),h=c.rotation,p=a.getLabelConfig(),r=c.format?w(c.format,p):c.formatter.call(p,c),c.style.color=d(c.color,c.style.color,s.color,"black"),g)u(r)?(g.attr({text:r}),y=!1):(a.dataLabel=g=g.destroy(),m&&(a.connector=m.destroy()));else if(u(r)){g={fill:c.backgroundColor,stroke:c.borderColor,"stroke-width":c.borderWidth,r:c.borderRadius||0,rotation:h,padding:c.padding,zIndex:1};for(f in g)g[f]===j&&delete g[f];g=a.dataLabel=s.chart.renderer[h?"text":"label"](r,0,-999,null,null,null,c.useHTML).attr(g).css(t(c.style,l&&{cursor:l})).add(o).shadow(c.shadow)}g&&s.alignDataLabel(a,g,c,null,y)}}))},xn.prototype.alignDataLabel=function(e,n,i,r,o){var s=this.chart,a=s.inverted,l=d(e.plotX,-999),c=d(e.plotY,-999),u=n.getBBox();(e=this.visible&&(e.series.forceDL||s.isInsidePlot(l,ue(c),a)||r&&s.isInsidePlot(l,a?r.x+1:r.y+r.height-1,a)))&&(r=t({x:a?s.plotWidth-c:l,y:ue(a?s.plotHeight-l:c),width:0,height:0},r),t(i,{width:u.width,height:u.height}),i.rotation?n[o?"attr":"animate"]({x:r.x+i.x+r.width/2,y:r.y+i.y+r.height/2}).attr({align:i.align}):(n.align(i,null,r),a=n.alignAttr,"justify"===d(i.overflow,"justify")?this.justifyDataLabel(n,i,a,u,r,o):d(i.crop,!0)&&(e=s.isInsidePlot(a.x,a.y)&&s.isInsidePlot(a.x+u.width,a.y+u.height)))),e||(n.attr({y:-999}),n.placed=!1)},xn.prototype.justifyDataLabel=function(t,e,n,i,r,o){var s,a,l=this.chart,c=e.align,u=e.verticalAlign;s=n.x,0>s&&("right"===c?e.align="left":e.x=-s,a=!0),s=n.x+i.width,s>l.plotWidth&&("left"===c?e.align="right":e.x=l.plotWidth-s,a=!0),s=n.y,0>s&&("bottom"===u?e.verticalAlign="top":e.y=-s,a=!0),s=n.y+i.height,s>l.plotHeight&&("top"===u?e.verticalAlign="bottom":e.y=l.plotHeight-s,a=!0),a&&(t.placed=!o,t.align(e,null,r))},ze.pie&&(ze.pie.prototype.drawDataLabels=function(){var t,e,n,i,r,o,s,a,l,c,u,h=this,p=h.data,f=h.chart,g=h.options.dataLabels,m=d(g.connectorPadding,10),y=d(g.connectorWidth,1),v=f.plotWidth,b=f.plotHeight,w=d(g.softConnector,!0),x=g.distance,_=h.center,k=_[2]/2,T=_[1],C=x>0,P=[[],[]],D=[0,0,0,0],M=function(t,e){return e.y-t.y};if(h.visible&&(g.enabled||h._hasPointLabels)){for(xn.prototype.drawDataLabels.apply(h),Ge(p,function(t){t.dataLabel&&t.visible&&P[t.half].push(t)}),c=2;c--;){var A,O=[],E=[],L=P[c],N=L.length;if(N){for(h.sortByAngle(L,c-.5),u=p=0;!p&&L[u];)p=L[u]&&L[u].dataLabel&&(L[u].dataLabel.getBBox().height||21),u++;if(x>0){for(r=fe(T+k+x,f.plotHeight),u=de(0,T-k-x);r>=u;u+=p)O.push(u);if(r=O.length,N>r){for(t=[].concat(L),t.sort(M),u=N;u--;)t[u].rank=u;for(u=N;u--;)L[u].rank>=r&&L.splice(u,1);N=L.length}for(u=0;N>u;u++){t=L[u],o=t.labelPos,t=9999;var I,j;for(j=0;r>j;j++)I=ge(O[j]-o[1]),t>I&&(t=I,A=j);if(u>A&&null!==O[u])A=u;else for(N-u+A>r&&null!==O[u]&&(A=r-N+u);null===O[A];)A++;E.push({i:A,y:O[A]}),O[A]=null}E.sort(M)}for(u=0;N>u;u++)t=L[u],o=t.labelPos,i=t.dataLabel,l=t.visible===!1?"hidden":"visible",t=o[1],x>0?(r=E.pop(),A=r.i,a=r.y,(t>a&&null!==O[A+1]||a>t&&null!==O[A-1])&&(a=fe(de(0,t),f.plotHeight))):a=t,s=g.justify?_[0]+(c?-1:1)*(k+x):h.getX(a===T-k-x||a===T+k+x?t:a,c),i._attr={visibility:l,align:o[6]},i._pos={x:s+g.x+({left:m,right:-m}[o[6]]||0),y:a+g.y-10},i.connX=s,i.connY=a,null===this.options.size&&(r=i.width,m>s-r?D[3]=de(ue(r-s+m),D[3]):s+r>v-m&&(D[1]=de(ue(s+r-v+m),D[1])),0>a-p/2?D[0]=de(ue(-a+p/2),D[0]):a+p/2>b&&(D[2]=de(ue(a+p/2-b),D[2])))}}(0===S(D)||this.verifyDataLabelOverflow(D))&&(this.placeDataLabels(),C&&y&&Ge(this.points,function(t){e=t.connector,o=t.labelPos,(i=t.dataLabel)&&i._pos?(l=i._attr.visibility,s=i.connX,a=i.connY,n=w?["M",s+("left"===o[6]?5:-5),a,"C",s,a,2*o[2]-o[4],2*o[3]-o[5],o[2],o[3],"L",o[4],o[5]]:["M",s+("left"===o[6]?5:-5),a,"L",o[2],o[3],"L",o[4],o[5]],e?(e.animate({d:n}),e.attr("visibility",l)):t.connector=e=h.chart.renderer.path(n).attr({"stroke-width":y,stroke:g.connectorColor||t.color||"#606060",visibility:l}).add(h.dataLabelsGroup)):e&&(t.connector=e.destroy())}))}},ze.pie.prototype.placeDataLabels=function(){Ge(this.points,function(t){var e,t=t.dataLabel;t&&((e=t._pos)?(t.attr(t._attr),t[t.moved?"animate":"attr"](e),t.moved=!0):t&&t.attr({y:-999}))})},ze.pie.prototype.alignDataLabel=Le,ze.pie.prototype.verifyDataLabelOverflow=function(t){var e,n=this.center,i=this.options,r=i.center,o=i=i.minSize||80;return null!==r[0]?o=de(n[2]-de(t[1],t[3]),i):(o=de(n[2]-t[1]-t[3],i),n[0]+=(t[3]-t[1])/2),null!==r[1]?o=de(fe(o,n[2]-de(t[0],t[2])),i):(o=de(fe(o,n[2]-t[0]-t[2]),i),n[1]+=(t[0]-t[2])/2),o<n[2]?(n[2]=o,this.translate(n),Ge(this.points,function(t){t.dataLabel&&(t.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):e=!0,e}),ze.column&&(ze.column.prototype.alignDataLabel=function(t,n,i,r,o){var s=this.chart,a=s.inverted,l=t.dlBox||t.shapeArgs,c=t.below||t.plotY>d(this.translatedThreshold,s.plotSizeY),u=d(i.inside,!!this.options.stacking);l&&(r=e(l),a&&(r={x:s.plotWidth-r.y-r.height,y:s.plotHeight-r.x-r.width,width:r.height,height:r.width}),!u)&&(a?(r.x+=c?0:r.width,r.width=0):(r.y+=c?r.height:0,r.height=0)),i.align=d(i.align,!a||u?"center":c?"right":"left"),i.verticalAlign=d(i.verticalAlign,a||u?"middle":c?"top":"bottom"),xn.prototype.alignDataLabel.call(this,t,n,i,r,o)}),Be=se.TrackerMixin={drawTrackerPoint:function(){var t=this,e=t.chart,n=e.pointer,i=t.options.cursor,r=i&&{cursor:i},o=function(n){var i,r=n.target;for(e.hoverSeries!==t&&t.onMouseOver();r&&!i;)i=r.point,r=r.parentNode;i!==j&&i!==e.hoverPoint&&i.onMouseOver(n)};Ge(t.points,function(t){t.graphic&&(t.graphic.element.point=t),t.dataLabel&&(t.dataLabel.element.point=t)}),t._hasTracking||(Ge(t.trackerGroups,function(e){t[e]&&(t[e].addClass("highcharts-tracker").on("mouseover",o).on("mouseout",function(t){n.onTrackerMouseOut(t)}).css(r),F)&&t[e].on("touchstart",o)}),t._hasTracking=!0)},drawTrackerGraph:function(){var t,e=this,n=e.options,i=n.trackByArea,r=[].concat(i?e.areaPath:e.graphPath),o=r.length,s=e.chart,a=s.pointer,l=s.renderer,c=s.options.tooltip.snap,u=e.tracker,h=n.cursor,p=h&&{cursor:h},h=e.singlePoints,d=function(){s.hoverSeries!==e&&e.onMouseOver()},f="rgba(192,192,192,"+(De?1e-4:.002)+")";if(o&&!i)for(t=o+1;t--;)"M"===r[t]&&r.splice(t+1,0,r[t+1]-c,r[t+2],"L"),(t&&"M"===r[t]||t===o)&&r.splice(t,0,"L",r[t-2]+c,r[t-1]);for(t=0;t<h.length;t++)o=h[t],r.push("M",o.plotX-c,o.plotY,"L",o.plotX+c,o.plotY);u?u.attr({d:r}):(e.tracker=l.path(r).attr({"stroke-linejoin":"round",visibility:e.visible?"visible":"hidden",stroke:f,fill:i?f:Re,"stroke-width":n.lineWidth+(i?0:2*c),zIndex:2}).add(e.group),Ge([e.tracker,e.markerGroup],function(t){t.addClass("highcharts-tracker").on("mouseover",d).on("mouseout",function(t){a.onTrackerMouseOut(t)}).css(p),F&&t.on("touchstart",d)}))}},ze.column&&(un.prototype.drawTracker=Be.drawTrackerPoint),ze.pie&&(ze.pie.prototype.drawTracker=Be.drawTrackerPoint),ze.scatter&&(_n.prototype.drawTracker=Be.drawTrackerPoint),t(bn.prototype,{setItemEvents:function(t,e,n,i,r){var o=this;(n?e:t.legendGroup).on("mouseover",function(){t.setState("hover"),e.css(o.options.itemHoverStyle)}).on("mouseout",function(){e.css(t.visible?i:r),t.setState()}).on("click",function(e){var n=function(){t.setVisible()},e={browserEvent:e};t.firePointEvent?t.firePointEvent("legendItemClick",e,n):Ze(t,"legendItemClick",e,n)})},createCheckboxForItem:function(t){t.checkbox=g("input",{type:"checkbox",checked:t.selected,defaultChecked:t.selected},this.options.itemCheckboxStyle,this.chart.container),Je(t.checkbox,"click",function(e){Ze(t,"checkboxClick",{checked:e.target.checked},function(){t.select()})})}}),z.legend.itemStyle.cursor="pointer",t(N.prototype,{showResetZoom:function(){var t=this,e=z.lang,n=t.options.chart.resetZoomButton,i=n.theme,r=i.states,o="chart"===n.relativeTo?null:"plotBox";this.resetZoomButton=t.renderer.button(e.resetZoom,null,null,function(){t.zoomOut()},i,r&&r.hover).attr({align:n.position.align,title:e.resetZoomTitle}).add().align(n.position,!1,o)},zoomOut:function(){var t=this;Ze(t,"selection",{resetSelection:!0},function(){t.zoom()})},zoom:function(t){var e,n,i=this.pointer,o=!1;!t||t.resetSelection?Ge(this.axes,function(t){e=t.zoom()}):Ge(t.xAxis.concat(t.yAxis),function(t){var n=t.axis,r=n.isXAxis;(i[r?"zoomX":"zoomY"]||i[r?"pinchX":"pinchY"])&&(e=n.zoom(t.min,t.max),n.displayBtn&&(o=!0))}),n=this.resetZoomButton,o&&!n?this.showResetZoom():!o&&r(n)&&(this.resetZoomButton=n.destroy()),e&&this.redraw(d(this.options.chart.animation,t&&t.animation,this.pointCount<100))},pan:function(t,e){var n,i=this,r=i.hoverPoints;r&&Ge(r,function(t){t.setState()}),Ge("xy"===e?[1,0]:[1],function(e){var r=t[e?"chartX":"chartY"],o=i[e?"xAxis":"yAxis"][0],s=i[e?"mouseDownX":"mouseDownY"],a=(o.pointRange||0)/2,l=o.getExtremes(),c=o.toValue(s-r,!0)+a,s=o.toValue(s+i[e?"plotWidth":"plotHeight"]-r,!0)-a;o.series.length&&c>fe(l.dataMin,l.min)&&s<de(l.dataMax,l.max)&&(o.setExtremes(c,s,!1,!1,{trigger:"pan"}),n=!0),i[e?"mouseDownX":"mouseDownY"]=r}),n&&i.redraw(!1),f(i.container,{cursor:"move"})}}),t(wn.prototype,{select:function(t,e){var n=this,i=n.series,r=i.chart,t=d(t,!n.selected);n.firePointEvent(t?"select":"unselect",{accumulate:e},function(){n.selected=n.options.selected=t,i.options.data[Ye(n,i.data)]=n.options,n.setState(t&&"select"),e||Ge(r.getSelectedPoints(),function(t){t.selected&&t!==n&&(t.selected=t.options.selected=!1,i.options.data[Ye(t,i.data)]=t.options,t.setState(""),t.firePointEvent("unselect"))})})},onMouseOver:function(t){var e=this.series,n=e.chart,i=n.tooltip,r=n.hoverPoint;r&&r!==this&&r.onMouseOut(),this.firePointEvent("mouseOver"),i&&(!i.shared||e.noSharedTooltip)&&i.refresh(this,t),this.setState("hover"),n.hoverPoint=this},onMouseOut:function(){var t=this.series.chart,e=t.hoverPoints;this.firePointEvent("mouseOut"),e&&-1!==Ye(this,e)||(this.setState(),t.hoverPoint=null)},importEvents:function(){if(!this.hasImportedEvents){var t,n=e(this.series.options.point,this.options).events;this.events=n;for(t in n)Je(this,t,n[t]);this.hasImportedEvents=!0}},setState:function(n,i){var r,o=this.plotX,s=this.plotY,a=this.series,l=a.options.states,c=nn[a.type].marker&&a.options.marker,u=c&&!c.enabled,h=c&&c.states[n],p=h&&h.enabled===!1,d=a.stateMarkerGraphic,f=this.marker||{},g=a.chart,m=a.halo,n=n||"";r=this.pointAttr[n]||a.pointAttr[n],n===this.state&&!i||this.selected&&"select"!==n||l[n]&&l[n].enabled===!1||n&&(p||u&&h.enabled===!1)||n&&f.states&&f.states[n]&&f.states[n].enabled===!1||(this.graphic?(c=c&&this.graphic.symbolName&&r.r,this.graphic.attr(e(r,c?{x:o-c,y:s-c,width:2*c,height:2*c}:{})),d&&d.hide()):(n&&h&&(c=h.radius,f=f.symbol||a.symbol,d&&d.currentSymbol!==f&&(d=d.destroy()),d?d[i?"animate":"attr"]({x:o-c,y:s-c}):f&&(a.stateMarkerGraphic=d=g.renderer.symbol(f,o-c,s-c,2*c,2*c).attr(r).add(a.markerGroup),d.currentSymbol=f)),d&&d[n&&g.isInsidePlot(o,s,g.inverted)?"show":"hide"]()),(o=l[n]&&l[n].halo)&&o.size?(m||(a.halo=m=g.renderer.path().add(a.seriesGroup)),m.attr(t({fill:an(this.color||a.color).setOpacity(o.opacity).get()},o.attributes))[i?"animate":"attr"]({d:this.haloPath(o.size)})):m&&m.attr({d:[]}),this.state=n)},haloPath:function(t){var e=this.series,n=e.chart,i=e.getPlotBox(),r=n.inverted;return n.renderer.symbols.circle(i.translateX+(r?e.yAxis.len-this.plotY:this.plotX)-t,i.translateY+(r?e.xAxis.len-this.plotX:this.plotY)-t,2*t,2*t)}}),t(xn.prototype,{onMouseOver:function(){var t=this.chart,e=t.hoverSeries;e&&e!==this&&e.onMouseOut(),this.options.events.mouseOver&&Ze(this,"mouseOver"),this.setState("hover"),t.hoverSeries=this},onMouseOut:function(){var t=this.options,e=this.chart,n=e.tooltip,i=e.hoverPoint;i&&i.onMouseOut(),this&&t.events.mouseOut&&Ze(this,"mouseOut"),n&&!t.stickyTracking&&(!n.shared||this.noSharedTooltip)&&n.hide(),this.setState(),e.hoverSeries=null},setState:function(t){var e=this.options,n=this.graph,i=this.graphNeg,r=e.states,e=e.lineWidth,t=t||"";this.state!==t&&(this.state=t,r[t]&&r[t].enabled===!1||(t&&(e=r[t].lineWidth||e+(r[t].lineWidthPlus||0)),n&&!n.dashstyle&&(t={"stroke-width":e},n.attr(t),i&&i.attr(t))))},setVisible:function(t,e){var n,i=this,r=i.chart,o=i.legendItem,s=r.options.chart.ignoreHiddenSeries,a=i.visible;n=(i.visible=t=i.userOptions.visible=t===j?!a:t)?"show":"hide",Ge(["group","dataLabelsGroup","markerGroup","tracker"],function(t){i[t]&&i[t][n]()}),r.hoverSeries===i&&i.onMouseOut(),o&&r.legend.colorizeItem(i,t),i.isDirty=!0,i.options.stacking&&Ge(r.series,function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)}),Ge(i.linkedSeries,function(e){e.setVisible(t,!1)}),s&&(r.isDirtyBox=!0),e!==!1&&r.redraw(),Ze(i,n)},setTooltipPoints:function(t){var e,n,i,r,o=[],s=this.xAxis,a=s&&s.getExtremes(),l=s?s.tooltipLen||s.len:this.chart.plotSizeX,c=[];if(this.options.enableMouseTracking!==!1&&!this.singularTooltips){for(t&&(this.tooltipPoints=null),Ge(this.segments||this.points,function(t){o=o.concat(t)}),s&&s.reversed&&(o=o.reverse()),this.orderTooltipPoints&&this.orderTooltipPoints(o),t=o.length,r=0;t>r;r++)if(s=o[r],e=s.x,e>=a.min&&e<=a.max)for(i=o[r+1],e=n===j?0:n+1,n=o[r+1]?fe(de(0,he((s.clientX+(i?i.wrappedClientX||i.clientX:l))/2)),l):l;e>=0&&n>=e;)c[e++]=s;this.tooltipPoints=c}},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){this.selected=t=t===j?!this.selected:t,this.checkbox&&(this.checkbox.checked=t),Ze(this,t?"select":"unselect")},drawTracker:Be.drawTrackerGraph}),t(se,{Axis:L,Chart:N,Color:an,Point:wn,Tick:E,Renderer:R,Series:xn,SVGElement:O,SVGRenderer:ln,arrayMin:T,arrayMax:S,charts:Ne,dateFormat:B,format:w,pathAnim:V,getOptions:function(){return z},hasBidiBug:Me,isTouchDevice:Ce,numberFormat:y,seriesTypes:ze,setOptions:function(t){return z=e(!0,z,t),A(),z},addEvent:Je,removeEvent:Ke,createElement:g,discardElement:P,css:f,each:Ge,extend:t,map:Ue,merge:e,pick:d,splat:p,extendClass:m,pInt:n,wrap:b,svg:De,canvas:Ae,vml:!De&&!Ae,product:"Highcharts",version:"4.0.4"})}(),function(t,e){function n(t,e,n){this.init.call(this,t,e,n)}var i=t.arrayMin,r=t.arrayMax,o=t.each,s=t.extend,a=t.merge,l=t.map,c=t.pick,u=t.pInt,h=t.getOptions().plotOptions,p=t.seriesTypes,d=t.extendClass,f=t.splat,g=t.wrap,m=t.Axis,y=t.Tick,v=t.Point,b=t.Pointer,w=t.CenteredSeriesMixin,x=t.TrackerMixin,_=t.Series,k=Math,T=k.round,S=k.floor,C=k.max,P=t.Color,D=function(){};s(n.prototype,{init:function(t,e,n){var i=this,r=i.defaultOptions;i.chart=e,e.angular&&(r.background={}),i.options=t=a(r,t),(t=t.background)&&o([].concat(f(t)).reverse(),function(t){var e=t.backgroundColor,t=a(i.defaultBackgroundOptions,t);e&&(t.backgroundColor=e),t.color=t.backgroundColor,n.options.plotBands.unshift(t)})},defaultOptions:{center:["50%","50%"],size:"85%",startAngle:0},defaultBackgroundOptions:{shape:"circle",borderWidth:1,borderColor:"silver",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#DDD"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}});var M=m.prototype,y=y.prototype,A={getOffset:D,redraw:function(){this.isDirty=!1},render:function(){this.isDirty=!1},setScale:D,setCategories:D,setTitle:D},O={isRadial:!0,defaultRadialGaugeOptions:{labels:{align:"center",x:0,y:null},minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,tickLength:10,tickPosition:"inside",tickWidth:2,title:{rotation:0},zIndex:2},defaultRadialXOptions:{gridLineWidth:1,labels:{align:null,distance:15,x:0,y:null},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},defaultRadialYOptions:{gridLineInterpolation:"circle",labels:{align:"right",x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},setOptions:function(t){t=this.options=a(this.defaultOptions,this.defaultRadialOptions,t),t.plotBands||(t.plotBands=[])},getOffset:function(){M.getOffset.call(this),this.chart.axisOffset[this.side]=0,this.center=this.pane.center=w.getCenter.call(this.pane)},getLinePath:function(t,e){var n=this.center,e=c(e,n[2]/2-this.offset);return this.chart.renderer.symbols.arc(this.left+n[0],this.top+n[1],e,e,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})},setAxisTranslation:function(){M.setAxisTranslation.call(this),this.center&&(this.transA=this.isCircular?(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.center[2]/2/(this.max-this.min||1),this.minPixelPadding=this.isXAxis?this.transA*this.minPointOffset:0)},beforeSetTickPositions:function(){this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)},setAxisSize:function(){M.setAxisSize.call(this),this.isRadial&&(this.center=this.pane.center=t.CenteredSeriesMixin.getCenter.call(this.pane),this.isCircular&&(this.sector=this.endAngleRad-this.startAngleRad),this.len=this.width=this.height=this.center[2]*c(this.sector,1)/2)},getPosition:function(t,e){return this.postTranslate(this.isCircular?this.translate(t):0,c(this.isCircular?e:this.translate(t),this.center[2]/2)-this.offset)},postTranslate:function(t,e){var n=this.chart,i=this.center,t=this.startAngleRad+t;return{x:n.plotLeft+i[0]+Math.cos(t)*e,y:n.plotTop+i[1]+Math.sin(t)*e}},getPlotBandPath:function(t,e,n){var i,r=this.center,o=this.startAngleRad,s=r[2]/2,a=[c(n.outerRadius,"100%"),n.innerRadius,c(n.thickness,10)],h=/%$/,p=this.isCircular;return"polygon"===this.options.gridLineInterpolation?r=this.getPlotLinePath(t).concat(this.getPlotLinePath(e,!0)):(p||(a[0]=this.translate(t),a[1]=this.translate(e)),a=l(a,function(t){return h.test(t)&&(t=u(t,10)*s/100),t}),"circle"!==n.shape&&p?(t=o+this.translate(t),e=o+this.translate(e)):(t=-Math.PI/2,e=1.5*Math.PI,i=!0),r=this.chart.renderer.symbols.arc(this.left+r[0],this.top+r[1],a[0],a[0],{start:t,end:e,innerR:c(a[1],a[0]-a[2]),open:i})),r
},getPlotLinePath:function(t,e){var n,i,r,s=this,a=s.center,l=s.chart,c=s.getPosition(t);return s.isCircular?r=["M",a[0]+l.plotLeft,a[1]+l.plotTop,"L",c.x,c.y]:"circle"===s.options.gridLineInterpolation?(t=s.translate(t))&&(r=s.getLinePath(0,t)):(o(l.xAxis,function(t){t.pane===s.pane&&(n=t)}),r=[],t=s.translate(t),a=n.tickPositions,n.autoConnect&&(a=a.concat([a[0]])),e&&(a=[].concat(a).reverse()),o(a,function(e,o){i=n.getPosition(e,t),r.push(o?"L":"M",i.x,i.y)})),r},getTitlePosition:function(){var t=this.center,e=this.chart,n=this.options.title;return{x:e.plotLeft+t[0]+(n.x||0),y:e.plotTop+t[1]-{high:.5,middle:.25,low:0}[n.align]*t[2]+(n.y||0)}}};g(M,"init",function(t,i,r){var o,l,u,h=i.angular,p=i.polar,d=r.isX,g=h&&d;u=i.options;var m=r.pane||0;h?(s(this,g?A:O),(l=!d)&&(this.defaultRadialOptions=this.defaultRadialGaugeOptions)):p&&(s(this,O),this.defaultRadialOptions=(l=d)?this.defaultRadialXOptions:a(this.defaultYAxisOptions,this.defaultRadialYOptions)),t.call(this,i,r),g||!h&&!p||(t=this.options,i.panes||(i.panes=[]),this.pane=(o=i.panes[m]=i.panes[m]||new n(f(u.pane)[m],i,this),m=o),m=m.options,i.inverted=!1,u.chart.zoomType=null,this.startAngleRad=i=(m.startAngle-90)*Math.PI/180,this.endAngleRad=u=(c(m.endAngle,m.startAngle+360)-90)*Math.PI/180,this.offset=t.offset||0,(this.isCircular=l)&&r.max===e&&u-i===2*Math.PI&&(this.autoConnect=!0))}),g(y,"getPosition",function(t,e,n,i,r){var o=this.axis;return o.getPosition?o.getPosition(n):t.call(this,e,n,i,r)}),g(y,"getLabelPosition",function(t,e,n,i,r,o,s,a,l){var u=this.axis,h=o.y,p=o.align,d=(u.translate(this.pos)+u.startAngleRad+Math.PI/2)/Math.PI*180%360;return u.isRadial?(t=u.getPosition(this.pos,u.center[2]/2+c(o.distance,-25)),"auto"===o.rotation?i.attr({rotation:d}):null===h&&(h=u.chart.renderer.fontMetrics(i.styles.fontSize).b-i.getBBox().height/2),null===p&&(p=u.isCircular?d>20&&160>d?"left":d>200&&340>d?"right":"center":"center",i.attr({align:p})),t.x+=o.x,t.y+=h):t=t.call(this,e,n,i,r,o,s,a,l),t}),g(y,"getMarkPath",function(t,e,n,i,r,o,s){var a=this.axis;return a.isRadial?(t=a.getPosition(this.pos,a.center[2]/2+i),e=["M",e,n,"L",t.x,t.y]):e=t.call(this,e,n,i,r,o,s),e}),h.arearange=a(h.area,{lineWidth:1,marker:null,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">\u25cf</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:null,verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},states:{hover:{halo:!1}}}),p.arearange=d(p.area,{type:"arearange",pointArrayMap:["low","high"],toYData:function(t){return[t.low,t.high]},pointValKey:"low",getSegments:function(){var t=this;o(t.points,function(e){t.options.connectNulls||null!==e.low&&null!==e.high?null===e.low&&null!==e.high&&(e.y=e.high):e.y=null}),_.prototype.getSegments.call(this)},translate:function(){var t=this.yAxis;p.area.prototype.translate.apply(this),o(this.points,function(e){var n=e.low,i=e.high,r=e.plotY;null===i&&null===n?e.y=null:null===n?(e.plotLow=e.plotY=null,e.plotHigh=t.translate(i,0,1,0,1)):null===i?(e.plotLow=r,e.plotHigh=null):(e.plotLow=r,e.plotHigh=t.translate(i,0,1,0,1))})},getSegmentPath:function(t){var e,n,i,r=[],o=t.length,s=_.prototype.getSegmentPath;i=this.options;var a=i.step;for(e=HighchartsAdapter.grep(t,function(t){return null!==t.plotLow});o--;)n=t[o],null!==n.plotHigh&&r.push({plotX:n.plotX,plotY:n.plotHigh});return t=s.call(this,e),a&&(a===!0&&(a="left"),i.step={left:"right",center:"center",right:"left"}[a]),r=s.call(this,r),i.step=a,i=[].concat(t,r),r[0]="L",this.areaPath=this.areaPath.concat(t,r),i},drawDataLabels:function(){var t,e,n=this.data,i=n.length,r=[],o=_.prototype,s=this.options.dataLabels,a=s.align,l=this.chart.inverted;if(s.enabled||this._hasPointLabels){for(t=i;t--;)e=n[t],e.y=e.high,e._plotY=e.plotY,e.plotY=e.plotHigh,r[t]=e.dataLabel,e.dataLabel=e.dataLabelUpper,e.below=!1,l?(a||(s.align="left"),s.x=s.xHigh):s.y=s.yHigh;for(o.drawDataLabels&&o.drawDataLabels.apply(this,arguments),t=i;t--;)e=n[t],e.dataLabelUpper=e.dataLabel,e.dataLabel=r[t],e.y=e.low,e.plotY=e._plotY,e.below=!0,l?(a||(s.align="right"),s.x=s.xLow):s.y=s.yLow;o.drawDataLabels&&o.drawDataLabels.apply(this,arguments)}s.align=a},alignDataLabel:function(){p.column.prototype.alignDataLabel.apply(this,arguments)},getSymbol:D,drawPoints:D}),h.areasplinerange=a(h.arearange),p.areasplinerange=d(p.arearange,{type:"areasplinerange",getPointSpline:p.spline.prototype.getPointSpline}),function(){var t=p.column.prototype;h.columnrange=a(h.column,h.arearange,{lineWidth:1,pointRange:null}),p.columnrange=d(p.arearange,{type:"columnrange",translate:function(){var e,n=this,i=n.yAxis;t.translate.apply(n),o(n.points,function(t){var r,o=t.shapeArgs,s=n.options.minPointLength;t.tooltipPos=null,t.plotHigh=e=i.translate(t.high,0,1,0,1),t.plotLow=t.plotY,r=e,t=t.plotY-e,s>t&&(s-=t,t+=s,r-=s/2),o.height=t,o.y=r})},trackerGroups:["group","dataLabelsGroup"],drawGraph:D,pointAttrToOptions:t.pointAttrToOptions,drawPoints:t.drawPoints,drawTracker:t.drawTracker,animate:t.animate,getColumnMetrics:t.getColumnMetrics})}(),h.gauge=a(h.line,{dataLabels:{enabled:!0,defer:!1,y:15,borderWidth:1,borderColor:"silver",borderRadius:3,crop:!1,style:{fontWeight:"bold"},verticalAlign:"top",zIndex:2},dial:{},pivot:{},tooltip:{headerFormat:""},showInLegend:!1}),x={type:"gauge",pointClass:d(v,{setState:function(t){this.state=t}}),angular:!0,drawGraph:D,fixedBox:!0,forceDL:!0,trackerGroups:["group","dataLabelsGroup"],translate:function(){var t=this.yAxis,e=this.options,n=t.center;this.generatePoints(),o(this.points,function(i){var r=a(e.dial,i.dial),o=u(c(r.radius,80))*n[2]/200,s=u(c(r.baseLength,70))*o/100,l=u(c(r.rearLength,10))*o/100,h=r.baseWidth||3,p=r.topWidth||1,d=e.overshoot,f=t.startAngleRad+t.translate(i.y,null,null,null,!0);d&&"number"==typeof d?(d=d/180*Math.PI,f=Math.max(t.startAngleRad-d,Math.min(t.endAngleRad+d,f))):e.wrap===!1&&(f=Math.max(t.startAngleRad,Math.min(t.endAngleRad,f))),f=180*f/Math.PI,i.shapeType="path",i.shapeArgs={d:r.path||["M",-l,-h/2,"L",s,-h/2,o,-p/2,o,p/2,s,h/2,-l,h/2,"z"],translateX:n[0],translateY:n[1],rotation:f},i.plotX=n[0],i.plotY=n[1]})},drawPoints:function(){var t=this,e=t.yAxis.center,n=t.pivot,i=t.options,r=i.pivot,s=t.chart.renderer;o(t.points,function(e){var n=e.graphic,r=e.shapeArgs,o=r.d,l=a(i.dial,e.dial);n?(n.animate(r),r.d=o):e.graphic=s[e.shapeType](r).attr({stroke:l.borderColor||"none","stroke-width":l.borderWidth||0,fill:l.backgroundColor||"black",rotation:r.rotation}).add(t.group)}),n?n.animate({translateX:e[0],translateY:e[1]}):t.pivot=s.circle(0,0,c(r.radius,5)).attr({"stroke-width":r.borderWidth||0,stroke:r.borderColor||"silver",fill:r.backgroundColor||"black"}).translate(e[0],e[1]).add(t.group)},animate:function(t){var e=this;t||(o(e.points,function(t){var n=t.graphic;n&&(n.attr({rotation:180*e.yAxis.startAngleRad/Math.PI}),n.animate({rotation:t.shapeArgs.rotation},e.options.animation))}),e.animate=null)},render:function(){this.group=this.plotGroup("group","series",this.visible?"visible":"hidden",this.options.zIndex,this.chart.seriesGroup),_.prototype.render.call(this),this.group.clip(this.chart.clipRect)},setData:function(t,e){_.prototype.setData.call(this,t,!1),this.processData(),this.generatePoints(),c(e,!0)&&this.chart.redraw()},drawTracker:x&&x.drawTrackerPoint},p.gauge=d(p.line,x),h.boxplot=a(h.column,{fillColor:"#FFFFFF",lineWidth:1,medianWidth:2,states:{hover:{brightness:-.3}},threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">\u25cf</span> <b> {series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",whiskerWidth:2}),p.boxplot=d(p.column,{type:"boxplot",pointArrayMap:["low","q1","median","q3","high"],toYData:function(t){return[t.low,t.q1,t.median,t.q3,t.high]},pointValKey:"high",pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth"},drawDataLabels:D,translate:function(){var t=this.yAxis,e=this.pointArrayMap;p.column.prototype.translate.apply(this),o(this.points,function(n){o(e,function(e){null!==n[e]&&(n[e+"Plot"]=t.translate(n[e],0,1,0,1))})})},drawPoints:function(){var t,n,i,r,s,a,l,u,h,p,d,f,g,m,y,v,b,w,x,_,k,C,P=this,D=P.points,M=P.options,A=P.chart.renderer,O=P.doQuartiles!==!1,E=parseInt(P.options.whiskerLength,10)/100;o(D,function(o){h=o.graphic,k=o.shapeArgs,d={},m={},v={},C=o.color||P.color,o.plotY!==e&&(t=o.pointAttr[o.selected?"selected":""],b=k.width,w=S(k.x),x=w+b,_=T(b/2),n=S(O?o.q1Plot:o.lowPlot),i=S(O?o.q3Plot:o.lowPlot),r=S(o.highPlot),s=S(o.lowPlot),d.stroke=o.stemColor||M.stemColor||C,d["stroke-width"]=c(o.stemWidth,M.stemWidth,M.lineWidth),d.dashstyle=o.stemDashStyle||M.stemDashStyle,m.stroke=o.whiskerColor||M.whiskerColor||C,m["stroke-width"]=c(o.whiskerWidth,M.whiskerWidth,M.lineWidth),v.stroke=o.medianColor||M.medianColor||C,v["stroke-width"]=c(o.medianWidth,M.medianWidth,M.lineWidth),v["stroke-linecap"]="round",l=d["stroke-width"]%2/2,u=w+_+l,p=["M",u,i,"L",u,r,"M",u,n,"L",u,s],O&&(l=t["stroke-width"]%2/2,u=S(u)+l,n=S(n)+l,i=S(i)+l,w+=l,x+=l,f=["M",w,i,"L",w,n,"L",x,n,"L",x,i,"L",w,i,"z"]),E&&(l=m["stroke-width"]%2/2,r+=l,s+=l,g=["M",u-_*E,r,"L",u+_*E,r,"M",u-_*E,s,"L",u+_*E,s]),l=v["stroke-width"]%2/2,a=T(o.medianPlot)+l,y=["M",w,a,"L",x,a],h?(o.stem.animate({d:p}),E&&o.whiskers.animate({d:g}),O&&o.box.animate({d:f}),o.medianShape.animate({d:y})):(o.graphic=h=A.g().add(P.group),o.stem=A.path(p).attr(d).add(h),E&&(o.whiskers=A.path(g).attr(m).add(h)),O&&(o.box=A.path(f).attr(t).add(h)),o.medianShape=A.path(y).attr(v).add(h)))})}}),h.errorbar=a(h.boxplot,{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{series.color}">\u25cf</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}),p.errorbar=d(p.boxplot,{type:"errorbar",pointArrayMap:["low","high"],toYData:function(t){return[t.low,t.high]},pointValKey:"high",doQuartiles:!1,drawDataLabels:p.arearange?p.arearange.prototype.drawDataLabels:D,getColumnMetrics:function(){return this.linkedParent&&this.linkedParent.columnMetrics||p.column.prototype.getColumnMetrics.call(this)}}),h.waterfall=a(h.column,{lineWidth:1,lineColor:"#333",dashStyle:"dot",borderColor:"#333",states:{hover:{lineWidthPlus:0}}}),p.waterfall=d(p.column,{type:"waterfall",upColorProp:"fill",pointArrayMap:["low","y"],pointValKey:"y",init:function(t,e){e.stacking=!0,p.column.prototype.init.call(this,t,e)},translate:function(){var t,e,n,i,r,o,s,a,l,c,u=this.yAxis;for(t=this.options.threshold,p.column.prototype.translate.apply(this),a=l=t,n=this.points,e=0,t=n.length;t>e;e++)i=n[e],r=i.shapeArgs,o=this.getStack(e),c=o.points[this.index+","+e],isNaN(i.y)&&(i.y=this.yData[e]),s=C(a,a+i.y)+c[0],r.y=u.translate(s,0,1),i.isSum?(r.y=u.translate(c[1],0,1),r.height=u.translate(c[0],0,1)-r.y):i.isIntermediateSum?(r.y=u.translate(c[1],0,1),r.height=u.translate(l,0,1)-r.y,l=c[1]):a+=o.total,r.height<0&&(r.y+=r.height,r.height*=-1),i.plotY=r.y=T(r.y)-this.borderWidth%2/2,r.height=C(T(r.height),.001),i.yBottom=r.y+r.height,r=i.plotY+(i.negative?r.height:0),this.chart.inverted?i.tooltipPos[0]=u.len-r:i.tooltipPos[1]=r},processData:function(t){var e,n,i,r,o,s,a,l=this.yData,c=this.points,u=l.length;for(i=n=r=o=this.options.threshold||0,a=0;u>a;a++)s=l[a],e=c&&c[a]?c[a]:{},"sum"===s||e.isSum?l[a]=i:"intermediateSum"===s||e.isIntermediateSum?l[a]=n:(i+=s,n+=s),r=Math.min(i,r),o=Math.max(i,o);_.prototype.processData.call(this,t),this.dataMin=r,this.dataMax=o},toYData:function(t){return t.isSum?0===t.x?null:"sum":t.isIntermediateSum?0===t.x?null:"intermediateSum":t.y},getAttribs:function(){p.column.prototype.getAttribs.apply(this,arguments);var e=this.options,n=e.states,i=e.upColor||this.color,e=t.Color(i).brighten(.1).get(),r=a(this.pointAttr),s=this.upColorProp;r[""][s]=i,r.hover[s]=n.hover.upColor||e,r.select[s]=n.select.upColor||i,o(this.points,function(t){t.y>0&&!t.color&&(t.pointAttr=r,t.color=i)})},getGraphPath:function(){var t,e,n,i=this.data,r=i.length,o=T(this.options.lineWidth+this.borderWidth)%2/2,s=[];for(n=1;r>n;n++)e=i[n].shapeArgs,t=i[n-1].shapeArgs,e=["M",t.x+t.width,t.y+o,"L",e.x,t.y+o],i[n-1].y<0&&(e[2]+=t.height,e[5]+=t.height),s=s.concat(e);return s},getExtremes:D,getStack:function(t){var e=this.yAxis.stacks,n=this.stackKey;return this.processedYData[t]<this.options.threshold&&(n="-"+n),e[n][t]},drawGraph:_.prototype.drawGraph}),h.bubble=a(h.scatter,{dataLabels:{formatter:function(){return this.point.z},inside:!0,style:{color:"white",textShadow:"0px 0px 3px black"},verticalAlign:"middle"},marker:{lineColor:null,lineWidth:1},minSize:8,maxSize:"20%",states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0}),x=d(v,{haloPath:function(){return v.prototype.haloPath.call(this,this.shapeArgs.r+this.series.options.states.hover.halo.size)}}),p.bubble=d(p.scatter,{type:"bubble",pointClass:x,pointArrayMap:["y","z"],parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],bubblePadding:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor"},applyOpacity:function(t){var e=this.options.marker,n=c(e.fillOpacity,.5),t=t||e.fillColor||this.color;return 1!==n&&(t=P(t).setOpacity(n).get("rgba")),t},convertAttribs:function(){var t=_.prototype.convertAttribs.apply(this,arguments);return t.fill=this.applyOpacity(t.fill),t},getRadii:function(t,e,n,i){var r,o,s,a=this.zData,l=[],c="width"!==this.options.sizeBy;for(o=0,r=a.length;r>o;o++)s=e-t,s=s>0?(a[o]-t)/(e-t):.5,c&&s>=0&&(s=Math.sqrt(s)),l.push(k.ceil(n+s*(i-n))/2);this.radii=l},animate:function(t){var e=this.options.animation;t||(o(this.points,function(t){var n=t.graphic,t=t.shapeArgs;n&&t&&(n.attr("r",1),n.animate({r:t.r},e))}),this.animate=null)},translate:function(){var t,n,i,r=this.data,o=this.radii;for(p.scatter.prototype.translate.call(this),t=r.length;t--;)n=r[t],i=o?o[t]:0,n.negative=n.z<(this.options.zThreshold||0),i>=this.minPxSize/2?(n.shapeType="circle",n.shapeArgs={x:n.plotX,y:n.plotY,r:i},n.dlBox={x:n.plotX-i,y:n.plotY-i,width:2*i,height:2*i}):n.shapeArgs=n.plotY=n.dlBox=e},drawLegendSymbol:function(t,e){var n=u(t.itemStyle.fontSize)/2;e.legendSymbol=this.chart.renderer.circle(n,t.baseline-n,n).attr({zIndex:3}).add(e.legendGroup),e.legendSymbol.isMarker=!0},drawPoints:p.column.prototype.drawPoints,alignDataLabel:p.column.prototype.alignDataLabel}),m.prototype.beforePadding=function(){var t=this,n=this.len,s=this.chart,a=0,l=n,h=this.isXAxis,p=h?"xData":"yData",d=this.min,f={},g=k.min(s.plotWidth,s.plotHeight),m=Number.MAX_VALUE,y=-Number.MAX_VALUE,v=this.max-d,b=n/v,w=[];this.tickPositions&&(o(this.series,function(e){var n=e.options;!e.bubblePadding||!e.visible&&s.options.chart.ignoreHiddenSeries||(t.allowZoomOutside=!0,w.push(e),h&&(o(["minSize","maxSize"],function(t){var e=n[t],i=/%$/.test(e),e=u(e);f[t]=i?g*e/100:e}),e.minPxSize=f.minSize,e=e.zData,e.length&&(m=c(n.zMin,k.min(m,k.max(i(e),n.displayNegative===!1?n.zThreshold:-Number.MAX_VALUE))),y=c(n.zMax,k.max(y,r(e))))))}),o(w,function(t){var e,n=t[p],i=n.length;if(h&&t.getRadii(m,y,f.minSize,f.maxSize),v>0)for(;i--;)"number"==typeof n[i]&&(e=t.radii[i],a=Math.min((n[i]-d)*b-e,a),l=Math.max((n[i]-d)*b+e,l))}),w.length&&v>0&&c(this.options.min,this.userMin)===e&&c(this.options.max,this.userMax)===e&&(l-=n,b*=(n+a-l)/n,this.min+=a/b,this.max+=l/b))},function(){function t(t,e,n){t.call(this,e,n),this.chart.polar&&(this.closeSegment=function(t){var e=this.xAxis.center;t.push("L",e[0],e[1])},this.closedStacks=!0)}function e(t,e){var n=this.chart,i=this.options.animation,r=this.group,o=this.markerGroup,s=this.xAxis.center,a=n.plotLeft,l=n.plotTop;n.polar?n.renderer.isSVG&&(i===!0&&(i={}),e?(n={translateX:s[0]+a,translateY:s[1]+l,scaleX:.001,scaleY:.001},r.attr(n),o&&o.attr(n)):(n={translateX:a,translateY:l,scaleX:1,scaleY:1},r.animate(n,i),o&&o.animate(n,i),this.animate=null)):t.call(this,e)}var n,i=_.prototype,r=b.prototype;i.toXY=function(t){var e,n=this.chart,i=t.plotX;e=t.plotY,t.rectPlotX=i,t.rectPlotY=e,i=(i/Math.PI*180+this.xAxis.pane.options.startAngle)%360,0>i&&(i+=360),t.clientX=i,e=this.xAxis.postTranslate(t.plotX,this.yAxis.len-e),t.plotX=t.polarPlotX=e.x-n.plotLeft,t.plotY=t.polarPlotY=e.y-n.plotTop},i.orderTooltipPoints=function(t){this.chart.polar&&(t.sort(function(t,e){return t.clientX-e.clientX}),t[0])&&(t[0].wrappedClientX=t[0].clientX+360,t.push(t[0]))},p.area&&g(p.area.prototype,"init",t),p.areaspline&&g(p.areaspline.prototype,"init",t),p.spline&&g(p.spline.prototype,"getPointSpline",function(t,e,n,i){var r,o,s,a,l,c,u;return this.chart.polar?(r=n.plotX,o=n.plotY,t=e[i-1],s=e[i+1],this.connectEnds&&(t||(t=e[e.length-2]),s||(s=e[1])),t&&s&&(a=t.plotX,l=t.plotY,e=s.plotX,c=s.plotY,a=(1.5*r+a)/2.5,l=(1.5*o+l)/2.5,s=(1.5*r+e)/2.5,u=(1.5*o+c)/2.5,e=Math.sqrt(Math.pow(a-r,2)+Math.pow(l-o,2)),c=Math.sqrt(Math.pow(s-r,2)+Math.pow(u-o,2)),a=Math.atan2(l-o,a-r),l=Math.atan2(u-o,s-r),u=Math.PI/2+(a+l)/2,Math.abs(a-u)>Math.PI/2&&(u-=Math.PI),a=r+Math.cos(u)*e,l=o+Math.sin(u)*e,s=r+Math.cos(Math.PI+u)*c,u=o+Math.sin(Math.PI+u)*c,n.rightContX=s,n.rightContY=u),i?(n=["C",t.rightContX||t.plotX,t.rightContY||t.plotY,a||r,l||o,r,o],t.rightContX=t.rightContY=null):n=["M",r,o]):n=t.call(this,e,n,i),n}),g(i,"translate",function(t){if(t.call(this),this.chart.polar&&!this.preventPostTranslate)for(var t=this.points,e=t.length;e--;)this.toXY(t[e])}),g(i,"getSegmentPath",function(t,e){var n=this.points;return this.chart.polar&&this.options.connectEnds!==!1&&e[e.length-1]===n[n.length-1]&&null!==n[0].y&&(this.connectEnds=!0,e=[].concat(e,[n[0]])),t.call(this,e)}),g(i,"animate",e),g(i,"setTooltipPoints",function(t,e){return this.chart.polar&&s(this.xAxis,{tooltipLen:360}),t.call(this,e)}),p.column&&(n=p.column.prototype,g(n,"animate",e),g(n,"translate",function(t){var e,n,i=this.xAxis,r=this.yAxis.len,o=i.center,s=i.startAngleRad,a=this.chart.renderer;if(this.preventPostTranslate=!0,t.call(this),i.isRadial)for(i=this.points,n=i.length;n--;)e=i[n],t=e.barX+s,e.shapeType="path",e.shapeArgs={d:a.symbols.arc(o[0],o[1],r-e.plotY,null,{start:t,end:t+e.pointWidth,innerR:r-c(e.yBottom,r)})},this.toXY(e),e.tooltipPos=[e.plotX,e.plotY],e.ttBelow=e.plotY>o[1]}),g(n,"alignDataLabel",function(t,e,n,r,o,s){this.chart.polar?(t=e.rectPlotX/Math.PI*180,null===r.align&&(r.align=t>20&&160>t?"left":t>200&&340>t?"right":"center"),null===r.verticalAlign&&(r.verticalAlign=45>t||t>315?"bottom":t>135&&225>t?"top":"middle"),i.alignDataLabel.call(this,e,n,r,o,s)):t.call(this,e,n,r,o,s)})),g(r,"getIndex",function(t,e){var n,i,r=this.chart;return r.polar?(i=r.xAxis[0].center,n=e.chartX-i[0]-r.plotLeft,r=e.chartY-i[1]-r.plotTop,n=180-Math.round(Math.atan2(n,r)/Math.PI*180)):n=t.call(this,e),n}),g(r,"getCoordinates",function(t,e){var n=this.chart,i={xAxis:[],yAxis:[]};return n.polar?o(n.axes,function(t){var r=t.isXAxis,o=t.center,s=e.chartX-o[0]-n.plotLeft,o=e.chartY-o[1]-n.plotTop;i[r?"xAxis":"yAxis"].push({axis:t,value:t.translate(r?Math.PI-Math.atan2(s,o):Math.sqrt(Math.pow(s,2)+Math.pow(o,2)),!0)})}):i=t.call(this,e),i})}()}(Highcharts),function(){Highcharts.theme={colors:["#23323b","#23485d","#3182a2","#7dcadb","#b6dee3","#f9f1de","#a2cfc0","#3d99a0","#3d99a0","#3d99a0","#3d99a0","#3d99a0","#3d99a0"],chart:{backgroundColor:null,style:{fontFamily:"Avenir Next, Avenir, sans-serif"},spacingTop:0,spacingLeft:0,spacingBottom:0,spacingRight:0},title:{align:"left",useHTML:!0,style:{fontSize:"15px",fontWeight:"bold",color:"#1e2427"}},tooltip:{borderWidth:0,backgroundColor:"rgba(255,255,255,0.9)",shadow:!0},legend:{itemStyle:{fontWeight:"bold",fontSize:"13px"}},xAxis:{gridLineWidth:1,labels:{style:{fontSize:"12px"}},gridLineColor:"#d0d7da",minorGridLineColor:"#f0f0f0"},yAxis:{minorTickInterval:"auto",title:{style:{textTransform:"uppercase"}},labels:{style:{fontSize:"12px"}},gridLineColor:"#d0d7da",minorGridLineColor:"#f0f0f0"},plotOptions:{candlestick:{lineColor:"#404048"}},background2:"#F0F0EA"},Highcharts.setOptions(Highcharts.theme)}.call(this),function(){ds.apiHelper={urls:{assets:function(){return"/api/v2/assets"},asset:function(t){return"/api/v2/assets/"+t},assets_s3_path:function(){return"/api/v2/assets/signed_s3_path"},engagements:function(){return"/api/v2/engagements"},engagements_leaderboard:function(){return"/api/v2/engagements/leaderboard"},engagement:function(t){return"/api/v2/engagements/"+t},engagement_attendees:function(t){return"/api/v2/engagements/"+t+"/attendees"},national_graphs:function(t){return"/api/v2/nationals/usa/graphs/"+t},notes:function(){return"/api/v2/notes"},people:function(){return"/api/v2/people"},people_leaderboard:function(){return"/api/v2/people/leaderboard"},people_graphs:function(t){return"/api/v2/people/"+t.id+"/graphs/"+t.graph},person:function(t){return"/api/v2/people/"+t},projects:function(){return"/api/v2/projects"},projects_leaderboard:function(){return"/api/v2/projects/leaderboard"},project:function(t){return"/api/v2/projects/"+t},report_submissions:function(){return"/api/v2/report_submissions"},schools:function(){return"/api/v2/schools"},school:function(t){return"/api/v2/schools/"+t},school_graphs:function(t){return"/api/v2/schools/"+t.id+"/graphs/"+t.graph},search_results:function(){return"/api/v2/search_results"},sites:function(){return"/api/v2/sites"},site:function(t){return"/api/v2/sites/"+t},site_graphs:function(t){return"/api/v2/sites/"+t.id+"/graphs/"+t.graph}},urlFor:function(t,e){var n;return"function"==typeof(n=this.urls)[t]?n[t](e):void 0}}}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.LogbookLinkFormatter=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.fromRaw=function(t,e){return"<a href='"+ds.urlsHelper.urlFor(e)+"'>"+t+"</a>"},n}(Backgrid.CellFormatter),ds.LogbookLinkCell=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.formatter=ds.LogbookLinkFormatter,n.prototype.render=function(){var t;return this.$el.empty(),t=this.model,this.$el.html(this.formatter.fromRaw(t.get(this.column.get("name")),t)),this.delegateEvents(),this},n}(Backgrid.StringCell),ds.ActionCell=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.className=function(){return"action-cell"},n.prototype.template=function(t){return"<a href='"+ds.urlsHelper.urlFor(t)+"'>View</a>"},n.prototype.render=function(){return this.$el.html(this.template(this.model)),this.delegateEvents(),this},n}(Backgrid.Cell),Backgrid.Column.prototype.defaults.editable=!1,Backgrid.Column.prototype.defaults.sortType="toggle",Backgrid.HeaderCell.prototype.onClick=function(t){var e,n,i,r,o,s,a;i=function(t,i){"ascending"===n.get("direction")?e.trigger(r,i,"descending"):"descending"===n.get("direction")?e.trigger(r,i,null):e.trigger(r,i,"ascending")},a=function(t,i){"descending"===n.get("direction")?e.trigger(r,i,"ascending"):e.trigger(r,i,"descending")},t.preventDefault(),n=this.column,e=this.collection,r="backgrid:sort",s=Backgrid.callByNeed(n.sortable(),n,this.collection),s&&(o=n.get("sortType"),"toggle"===o?a(this,n):i(this,n))}}.call(this),function(){window.ds||(window.ds={}),ds.collectionHelper={bootstrap:function(t){return t.length>1?Backbone.trigger(t.namespace+":bootstrapped",t):t.fetch({reset:!0,sucess:function(){return Backbone.trigger(t.namespace+":bootstrapped",t)},error:function(){return console.log("wtf")}})}},_.extend(ds.collectionHelper,Backbone.Events)}.call(this),function(){ds.datesHelper={format:function(t){return t?Date.parse(t).toString("yyyy-MM-dd"):"XXXX-XX-XX"}}}.call(this),function(){ds.nounsHelper={singularize:function(t){switch(t||(t=""),!1){case!t.match(/people/i):return"person";default:return t.slice(0,-1)}},pluralize:function(t){switch(t||(t=""),!1){case!t.match(/person/i):return"people";default:return t+"s"}},contantize:function(t){switch(t||(t=""),!1){case!t.match(/people|person/i):return"Person";case!t.match(/engagement/i):return"Engagement";case!t.match(/project/i):return"Project";default:return t.toTitleCase()}},depapify:function(t){return t||(t=""),t=t.split("/").pop(),t=t.match(/([A-Z])\w+/gi),null!=t?t.join("."):"File"}}}.call(this),function(){ds.scopeHelper={getScope:function(){return this.current_scope},setScope:function(t){var e;return e=function(){switch(!1){case"schools"!==t.namespace:return new ds.School(t);case"sites"!==t.namespace:return new ds.Site(t);default:return new Backbone.Model(t)}}(),this.current_scope=e,Backbone.trigger("scope:set",this.current_scope)}}}.call(this),function(){ds.statsHelper={getStats:function(t){var e;return e=function(){var e;return e=t.url()+"/stats",$.getJSON(e,function(){return function(e){return t.add(e,{merge:!0})}}(this))},t.fetch({success:function(){return function(){return e()}}(this)})}}}.call(this),function(){window.ds||(window.ds={}),ds.urlsHelper={urlFor:function(t){var e;return e=t.id||t.cid,"/logbook/"+t.namespace+"/"+e},scopeParams:function(){return"scope_type="+ds.CONSTANTS.scope.type+"&scope_id="+ds.CONSTANTS.scope.id}}}.call(this),function(){Backbone.View.prototype.renderTo=function(t){return $(t).empty().append(this.el),this.render()},Backbone.View.prototype.hide=function(){return _.each(this.views,function(t){return t.remove()}),this.remove()}}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.Asset=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.namespace="assets",n.prototype.urlRoot=ds.apiHelper.urlFor("assets"),n.prototype.tplAttrs=function(){var t;return t=_.extend(this.toJSON(),{class_name:"Asset"}),{asset:t}},n}(Backbone.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.Engagement=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.namespace="engagements",n.prototype.urlRoot=ds.apiHelper.urlFor("engagements"),n.prototype.defaults=function(){return{kind:"Coaching Session",school_id:ds.current_user.get("school_id"),duration:.1,date:(new Date).toString("yyyy-MM-dd"),notes:[],attendees:[]}},n.prototype.toJSON=function(){return _.omit(_.clone(this.attributes),["attendees","notes"])},n.prototype.tplAttrs=function(){var t;return t=_.extend(_.clone(this.attributes),{class_name:"Engagement"}),{engagement:t}},n.prototype.save=function(){return this.set("date",Date.parse(this.get("date")).toString("yyyy-MM-dd")),null==this.get("attendee_ids")&&this.set("attendee_ids",[""]),n.__super__.save.apply(this,arguments)},n}(Backbone.Model),ds.EngagementsCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.model=ds.Engagement,n.prototype.namespace="engagements",n.prototype.url=function(){return ds.apiHelper.urlFor(this.namespace)},n.prototype.initialize=function(t){return t||(t={}),this.mode=t.mode||"server"},n.prototype.backgrid_columns=[{name:"name",cell:ds.LogbookLinkCell},{name:"kind",cell:"string"},{name:"headcount",cell:"integer"},{name:"duration",cell:"integer",label:"Duration (Hrs)"},{name:"notes_count",cell:"integer",label:"Notes"},{name:"date",cell:"date"}],n.prototype.parseRecords=function(t){return t.data},n.prototype.parseState=function(t){return{totalRecords:t.state.total_entries}},n}(Backbone.PageableCollection)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.Note=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.namespace="notes",n.prototype.urlRoot=ds.apiHelper.urlFor("notes"),n.prototype.defaults=function(){return{notable_id:null,notable_type:null,author:ds.current_user.get("first_name"),assets:[]}},n.prototype.tplAttrs=function(){var t;return t=_.extend(this.toJSON(),{class_name:"Note"}),{note:t}},n.prototype.initialize=function(){return this.set("notable_type",ds.nounsHelper.contantize(this.get("notable_type")))},n.prototype.getNotable=function(){var t,e,n;return n=this.get("notable_type"),e=this.get("notable_id"),t=new ds[n]({id:e}),ds.collections[t.namespace].get(e)||t},n.prototype.toJSON=function(){var t,e;return t=_.clone(this.attributes),e=_.extend(t,{assets_attributes:this.get("assets"),poster:_.first(this.get("assets"))})},n.prototype.getKind=function(){var t;return t=this.get("assets"),1===t.length&&t[0].original.match(/jpg|png|gif|svg/i)?"media":"text"},n}(Backbone.Model),ds.NotesCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.model=ds.Note,n.prototype.namespace="notes",n.prototype.url=function(){return ds.apiHelper.urlFor(this.namespace)},n.prototype.comparator=function(t){return-Date.parse(t.get("created_at"))},n}(Backbone.Collection)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.Person=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.namespace="people",n.prototype.urlRoot=ds.apiHelper.urlFor("people"),n.prototype.defaults=function(){return{role:"student",grade:9,school_id:ds.current_user.get("school_id"),projects:[],engagements:[],notes:[]}},n.prototype.toJSON=function(){return _.omit(_.clone(this.attributes),["engagements","projects","notes"])},n.prototype.tplAttrs=function(){var t;return t=_.extend(_.clone(this.attributes),{class_name:"Person"}),{person:t}},n.prototype.validate=function(t){return t.first_name?t.last_name?void 0:"This person needs a last name.":"This person needs a first name."},n}(Backbone.Model),ds.PeopleCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.model=ds.Person,n.prototype.namespace="people",n.prototype.url=function(){return ds.apiHelper.urlFor(this.namespace)},n.prototype.initialize=function(t){return t||(t={}),this.mode=t.mode||"server"},n.prototype.backgrid_columns=[{name:"first_name",label:"First",cell:ds.LogbookLinkCell},{name:"last_name",cell:ds.LogbookLinkCell,label:"Last"},{name:"role",cell:"string"},{name:"dream_team",cell:"boolean",label:"DT"},{name:"grade",cell:"integer"},{name:"projects_count",cell:"integer",label:"Projects"},{name:"engagements_count",cell:"integer",label:"Engagements"},{name:"notes_count",cell:"integer",label:"Notes"},{name:"created_at",cell:"date",label:"Date Added"}],n.prototype.parseRecords=function(t){return t.data},n.prototype.parseState=function(t){return{totalRecords:t.state.total_entries}},n}(Backbone.PageableCollection)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.Project=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.namespace="projects",n.prototype.urlRoot=ds.apiHelper.urlFor("projects"),n.prototype.defaults=function(){return{status:"underway",school_id:ds.current_user.get("school_id"),people:[],notes:[]}},n.prototype.toJSON=function(){return _.omit(_.clone(this.attributes),["people","notes"])},n.prototype.tplAttrs=function(){var t;return t=_.extend(_.clone(this.attributes),{class_name:"Project"}),{project:t}},n.prototype.save=function(){return null==this.get("leader_ids")&&this.set("leader_ids",[""]),null==this.get("supporter_ids")&&this.set("supporter_ids",[""]),n.__super__.save.apply(this,arguments)},n.prototype.validate=function(t){return t.name?t.school_id?void 0:"This project needs a school.":"This project needs a name."},n}(Backbone.Model),ds.ProjectsCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.model=ds.Project,n.prototype.namespace="projects",n.prototype.url=function(){return ds.apiHelper.urlFor(this.namespace)},n.prototype.initialize=function(t){return t||(t={}),this.mode=t.mode||"server"},n.prototype.backgrid_columns=[{name:"name",cell:ds.LogbookLinkCell},{name:"description",cell:"string"},{name:"status",cell:"string"},{name:"people_count",cell:"integer",label:"Team Size"},{name:"notes_count",cell:"integer",label:"Notes"},{name:"created_at",cell:"date",label:"created"},{name:"updated_at",cell:"date",label:"updated"}],n.prototype.parseRecords=function(t){return t.data
},n.prototype.parseState=function(t){return{totalRecords:t.state.total_entries}},n}(Backbone.PageableCollection)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.ReportSubmission=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.namespace="report_submissions",n.prototype.urlRoot=ds.apiHelper.urlFor("report_submissions"),n.prototype.tplAttrs=function(){var t;return t=_.extend(this.toJSON(),{class_name:"ReportSubmission"}),{report_submission:t}},n}(Backbone.Model),ds.ReportSubmissionsCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.model=ds.ReportSubmission,n.prototype.namespace="report_submissions",n.prototype.url=function(){return ds.apiHelper.urlFor(this.namespace)},n.prototype.backgrid_columns=[{name:"status",cell:"string"},{name:"name",cell:ds.LogbookLinkCell,label:"Report Name"},{name:"excerpt",cell:ds.LogbookLinkCell,label:"Questions",sortable:!1},{name:"created_at",cell:"date",label:"Date Assigned"}],n}(Backbone.Collection)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.School=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.namespace="schools",n.prototype.urlRoot=ds.apiHelper.urlFor("school"),n.prototype.tplAttrs=function(){var t;return t=_.extend(this.toJSON(),{class_name:"School"})},n}(Backbone.Model),ds.SchoolsCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.model=ds.School,n.prototype.namespace="schools",n.prototype.url=function(){return ds.apiHelper.urlFor(this.namespace)},n.prototype.initialize=function(){return this.listenTo(Backbone,"scope:set",function(t){return function(){return t.fetch({reset:!0})}}(this))},n.prototype.backgrid_columns=[{name:"name",cell:"string",label:"School Name"},{name:"enrollment",cell:"integer"},{name:"engaged_people_count",cell:"integer",label:"Engaged Ppl"},{name:"engagements_count",cell:"integer",label:"Engagements"},{name:"person_hours",cell:"integer",label:"Person Hrs"},{name:"projects_count",cell:"integer",label:"Projects"},{name:"people_with_projects_count",cell:"integer",label:"Ppl w/Projects"}],n}(Backbone.Collection)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.Site=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.urlRoot=ds.apiHelper.urlFor("site"),n.prototype.tplAttrs=function(){var t;return t=_.extend(this.toJSON(),{class_name:"Site"})},n}(Backbone.Model),ds.SitesCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.model=ds.Site,n.prototype.namespace="sites",n.prototype.url=function(){return ds.apiHelper.urlFor(this.namespace)},n.prototype.initialize=function(){return this.listenTo(Backbone,"scope:set",function(t){return function(){return t.fetch({reset:!0})}}(this))},n.prototype.backgrid_columns=[{name:"name",cell:"string",label:"City Name"},{name:"schools_count",cell:"integer",label:"Schools"},{name:"enrollment",cell:"integer"},{name:"engaged_people_count",cell:"integer",label:"Engaged Ppl"},{name:"engagements_count",cell:"integer",label:"Engagements"},{name:"person_hours",cell:"integer",label:"Person Hrs"},{name:"projects_count",cell:"integer",label:"Projects"},{name:"people_with_projects_count",cell:"integer",label:"Ppl w/Projects"}],n}(Backbone.Collection)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.User=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.tplAttrs=function(){return{user:_.clone(this.attributes)}},n}(Backbone.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.BaseController=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.url=this.$el.find("a").attr("href"),this.namespace=this.url.replace("/logbook",""),this.views={},this.actions(),this.listenTo(Backbone,"routed",this.routeListener),this.routeListener()},n.prototype.events={click:"onclick"},n.prototype.onclick=function(t){return t.preventDefault(),location.pathname!==this.url?ds.router.navigate(this.url,{trigger:!0}):void 0},n.prototype.activate=function(){return _.each(this.views,function(t){return t.hide()})},n.prototype.cleanup=function(t){return t!==this?this.$el.removeClass("active"):void 0},n.prototype.routeListener=function(){return this.$el.toggleClass("active",!!location.pathname.match(this.namespace))},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.DashboardController=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.rootURL="logbook",n.prototype.el="#dashboard-nav-item",n.prototype.targetEl="#yield",n.prototype.actions=function(){return this.listenTo(Backbone,"dashboard:show",this.show)},n.prototype.show=function(){var t;return this.activate(),ds.router.navigate("/logbook/dashboard",{replace:!0}),t=ds.scopeHelper.getScope(),this.views.show=function(){switch(t.get("namespace")){case"sites":return new ds.SitesDashboardView({model:t});case"schools":return new ds.SchoolsDashboardView({model:t});default:return new ds.NationalDashboardView({model:t})}}(),this.views.show.renderTo(this.targetEl)},n}(ds.BaseController)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.EngagementsController=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.el="#engagements-nav-item",n.prototype.targetEl="#yield",n.prototype.actions=function(){return this.listenTo(Backbone,"engagements:index",this.index),this.listenTo(Backbone,"engagements:show",this.show),this.listenTo(Backbone,"engagements:new",this["new"]),this.listenTo(Backbone,"engagements:edit",this.edit),this.listenTo(Backbone,"dates:changed",this.onDateChange)},n.prototype.index=function(){return ds.collectionHelper.bootstrap(ds.collections.engagements),this.activate(),this.views.index=new ds.EngagementsIndexView,this.views.index.renderTo(this.targetEl)},n.prototype.show=function(t){var e;return e=this.setEngagementFromId(t),this.views.show=new ds.EngagementsShowView({model:e}),this.views.show.renderTo(this.targetEl)},n.prototype["new"]=function(t){return t=new ds.Engagement,this.views["new"]=new ds.EngagementsNewView({model:t}),this.views["new"].renderTo(this.targetEl)},n.prototype.edit=function(t){var e;return e=this.setEngagementFromId(t),this.views.edit=new ds.EngagementsEditView({model:e}),this.views.edit.renderTo(this.targetEl)},n.prototype.setEngagementFromId=function(t){var e;return this.activate(),parseInt(t)?(e=ds.collections.engagements.get(t)||new ds.Engagement({id:t}),e.fetch()):e=ds.collections.engagements.get({cid:t})||new ds.Engagement({cid:t}),e},n.prototype.onDateChange=function(){return ds.collections.engagements.fetch({reset:!0})},n}(ds.BaseController)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.GraphsController=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){var t,e;return t=[],$(".graph").each(function(){var e;return e=new ds.GraphView({url:this.getAttribute("data-url"),el:this}),t.push(e)}),null!=window.matchMedia?(e=window.matchMedia("print"),e.addListener(function(){var n,i,r,o;for($("body").toggleClass("print",e.matches),o=[],i=0,r=t.length;r>i;i++)n=t[i],o.push(n.chart.reflow());return o})):void 0},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.NotesController=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.views={},this.listenTo(Backbone,"notes:new",this["new"])},n.prototype["new"]=function(t,e){var n;return n=new ds.Note({notable_id:e,notable_type:t}),this.views["new"]=new ds.NotesNewView({model:n}),this.views["new"].render()},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.PeopleController=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.el="#people-nav-item",n.prototype.targetEl="#yield",n.prototype.actions=function(){return this.listenTo(Backbone,"people:index",this.index),this.listenTo(Backbone,"people:show",this.show),this.listenTo(Backbone,"people:new",this["new"]),this.listenTo(Backbone,"people:edit",this.edit),this.listenTo(Backbone,"dates:changed",this.onDateChange)},n.prototype.index=function(){return ds.collectionHelper.bootstrap(ds.collections.people),this.activate(),this.views.index=new ds.PeopleIndexView,this.views.index.renderTo(this.targetEl)},n.prototype.show=function(t){var e;return e=this.setPersonFromId(t),this.views.show=new ds.PeopleShowView({model:e}),this.views.show.renderTo(this.targetEl)},n.prototype["new"]=function(t){return t=new ds.Person,this.views["new"]=new ds.PeopleNewView({model:t}),this.views["new"].renderTo(this.targetEl)},n.prototype.edit=function(t){var e;return e=this.setPersonFromId(t),this.views.edit=new ds.PeopleEditView({model:e}),this.views.edit.renderTo(this.targetEl)},n.prototype.setPersonFromId=function(t){var e;return this.activate(),parseInt(t)?(e=ds.collections.people.get(t)||new ds.Person({id:t}),e.fetch()):e=ds.collections.people.get({cid:t})||new ds.Person({cid:t}),e},n.prototype.onDateChange=function(){return ds.collections.people.fetch({reset:!0})},n}(ds.BaseController)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.ProjectsController=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.el="#projects-nav-item",n.prototype.targetEl="#yield",n.prototype.actions=function(){return this.listenTo(Backbone,"projects:index",this.index),this.listenTo(Backbone,"projects:show",this.show),this.listenTo(Backbone,"projects:new",this["new"]),this.listenTo(Backbone,"projects:edit",this.edit),this.listenTo(Backbone,"dates:changed",this.onDateChange)},n.prototype.index=function(){return ds.collectionHelper.bootstrap(ds.collections.projects),this.activate(),this.views.index=new ds.ProjectsIndexView,this.views.index.renderTo(this.targetEl)},n.prototype.show=function(t){var e;return e=this.setProjectFromId(t),this.views.show=new ds.ProjectsShowView({model:e}),this.views.show.renderTo(this.targetEl)},n.prototype["new"]=function(t){return t=new ds.Project,this.views["new"]=new ds.ProjectsNewView({model:t}),this.views["new"].renderTo(this.targetEl)},n.prototype.edit=function(t){var e;return e=this.setProjectFromId(t),this.views.edit=new ds.ProjectsEditView({model:e}),this.views.edit.renderTo(this.targetEl)},n.prototype.setProjectFromId=function(t){var e;return this.activate(),parseInt(t)?(e=ds.collections.projects.get(t)||new ds.Project({id:t}),e.fetch()):e=ds.collections.projects.get({cid:t})||new ds.Project({cid:t}),e},n.prototype.onDateChange=function(){return ds.collections.projects.fetch({reset:!0})},n}(ds.BaseController)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.ReportSubmissionsController=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.el="#reports-nav-item",n.prototype.targetEl="#yield",n.prototype.actions=function(){return this.listenTo(Backbone,"report_submissions:index",this.index),this.listenTo(Backbone,"report_submissions:show",this.show)},n.prototype.index=function(){return ds.collections.report_submissions.fetch(),this.activate(),this.views.index=new ds.ReportSubmissionsIndexView,this.views.index.renderTo(this.targetEl)},n.prototype.show=function(t){var e;return e=this.setReportSubmissionFromId(t),this.views.show=new ds.ReportSubmissionsShowView({model:e}),this.views.show.renderTo(this.targetEl)},n.prototype.setReportSubmissionFromId=function(t){var e,n;return this.activate(),n=parseInt(t)?t:{cid:t},e=ds.collections.report_submissions.get(n),null==e&&(e=new ds.ReportSubmission({id:t})),e.fetch(),e},n}(ds.BaseController)}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/asset"]=function(obj){var __p=[];with(obj||{})__p.push('<a style="background-image: url(',asset.thumbnail,');" class="thumbnail" href="',asset.original,'" title="',asset.caption,'">\n  <label>',asset.data_content_type,'</label>\n</a>\n<div class="action delete icon-delete"></div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/engagements_edit"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="titlebar">\n  <div class="title">Editing Engagement</div>\n</div>\n<div class="footerbar">\n  <nav class=\'l\'>\n    <a href="/logbook/engagements/',engagement.id,'">Cancel</a>\n  </nav>\n  <nav class=\'r\'>\n    <a href="/logbook/engagements" class="destroy">Delete Engagement</a>\n  </nav>\n</div>\n<div class="section">\n  <div id="engagement-form"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/engagements_form"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="field kind-field">\n  <select id="kind" name="kind">\n    <option value="Coaching Session">Coaching Session</option>\n    <option value="Event">Event</option>\n    <option value="Course">Course</option>\n    <option value="Meeting">Meeting</option>\n  </select>\n  <label for="kind">Kind</label>\n</div>\n<div class="field school-field">\n  <select id="school_id" name="school_id">\n  </select>\n  <label for="school_id">School</label>\n</div>\n<div class="field name-field">\n  <input id="name" name="name" type="text">\n  <label for="name">Engagement Name</label>\n</div>\n<div class="field date-field">\n  <input name=\'date\' type=\'text\'>\n  <label for="date">Date</label>\n</div>\n<div class="field duration-field">\n  <select id="engagement_duration" name="duration">\n    <option value="0.1">5 Minutes</option>\n    <option value="0.25">15 Minutes</option>\n    <option value="0.5">30 Minutes</option>\n    <option value="0.75">45 Minutes</option>\n    <option selected value="1">1 Hour</option>\n    <option value="1.5">1.5 Hours</option>\n    <option value="2">2 Hours</option>\n    <option value="3">3 Hours</option>\n    <option value="4">4 Hours</option>\n    <option value="5">5 Hours</option>\n    <option value="6">6 Hours</option>\n    <option value="7">7 Hours</option>\n    <option value="8">8 Hours</option>\n  </select>\n  <label for="duration">Duration</label>\n</div>\n<div class="field description-field">\n  <textarea name=\'description\'></textarea>\n  <label for="description">Description</label>\n</div>\n<div class="field headcount-field">\n  <input id="headcount" name="headcount" type="number" min="0">\n  <label for="headcount">How many people were there?</label>\n</div>\n<div class="field selectize-field">\n  <select id="attendee_ids" name="attendee_ids" multiple></select>\n  <label for="attendee_ids" class="primary-label">Who was there?</label>\n  <label for="attendee_ids" class="alternate-label">Anyone in particular?</label>\n</div>\n<input type="submit" value="Save" class=\'save people-link\'>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/engagements_index"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="titlebar">\n  <div class="title">Engagements</div>\n</div>\n<div class="section leaderboard">\n  <div id="engagements-leaderboard"></div>\n</div>\n<div class="section">\n  <div id="engagements-table" class="table index-table"></div>\n  <div id="engagements-pagination"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/engagements_new"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="titlebar">\n  <div class="subtitle">Adding</div>\n  <div class="title">Engagement</div>\n</div>\n<div class="footerbar">\n  <nav class=\'l\'>\n    <a class="people-link" href="/logbook/people/new">Add Person</a>\n    <a class="projects-link" href="/logbook/projects/new">Add Project</a>\n  </nav>\n</div>\n<div class="section">\n  <div id="engagement-form"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/engagements_show"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="titlebar">\n  <a class="title" href="/logbook/engagements">Engagements</a>\n  <div class="subtitle">&rsaquo; ',engagement.name||engagement.kind,"</div>\n  <nav class='titlebar-actions'>\n    <a href=\"/logbook/engagements/",engagement.id,'/edit">\n      Edit\n    </a>\n  </nav>\n</div>\n<ul class="factbar">\n  <li class="fact">\n    <label>kind</label>\n    ',engagement.kind,'\n  </li>\n  <li class="fact">\n    <label>Date</label>\n    ',ds.datesHelper.format(engagement.date),'\n  </li>\n  <li class="fact">\n    <label>Headcount</label>\n    ',engagement.headcount,'\n  </li>\n  <li class="fact">\n    <label>Duration</label>\n    ',engagement.duration,' Hrs\n  </li>\n  <li class="fact">\n    <label>School</label>\n    ',engagement.school_name,"\n  </li>\n</ul>\n\n"),engagement.description&&__p.push('\n<div class="section">\n  <pre>',engagement.description,"</pre>\n</div>\n"),__p.push('\n\n<div class="section notes" id="notes">\n  <h2 class="section-header">\n    ',engagement.notes.length," Notes\n    <a class='section-header-action' href=\"/logbook/engagements/",engagement.id,'/notes/add" title="Add a note">Add Note <span class=\'icon-add_circle_outline\'></span></a>\n  </h2>\n  <div id="stickies" class="stickies"></div>\n</div>\n\n<div class="footerbar">\n  <nav class=\'r\'>\n    <a title="Create a new engagement, with the same attendees and info as this one" class="duplicate" href="/logbook/engagements/',engagement.id,'">\n      Duplicate\n    </a>\n  </nav>\n</div>\n\n<div class="section">\n  <h2 class="section-header">',engagement.headcount,' Attendees</h2>\n  <div id="attendees-table" class="table people-table"></div>\n</div>\n\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/national_dashboard"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="titlebar">\n  <div class="title">Dashboard</div>\n  <div class="subtitle">for the USA</div>\n</div>\n\n<div class="section">\n  <h2 class="section-header">Stats by City</h2>\n  <div id="sites-table" class="table"></div>\n</div>\n<div class="section">\n  <div id="people_timeline_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n</div>\n<div class="section two-col">\n  <div id="program_hours_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n  <div id="engagement_counts_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n</div>\n<div class="section">\n  <div id="engagements_context_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n</div>\n<div class="section two-col">\n  <div id="projects_started_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n  <div id="projects_completed_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n</div>\n<div class="section">\n  <h2 class="section-header">Stats by School</h2>\n  <div id="schools-table" class="table"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/notes_form"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="field content-field">\n  <textarea name="content"></textarea>\n  <label for="content">Text</label>\n</div>\n<div class="field attachments-field">\n  <input id="assets" type="file" multiple>\n  <label for="assets">Attachments</label>\n</div>\n<input type="hidden" name="notable_type">\n<input type="hidden" name="notable_id">\n<input type="submit" value="Save Note" class=\'save\'>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/notes_new"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="modal-content">\n  <div class="titlebar">\n    <div class="cancel subtitle">Close</div>\n  </div>\n  <div class="section">\n    <div id="note-form"></div>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/people_edit"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="titlebar">\n  <div class="title">Editing Person</div>\n</div>\n<div class="footerbar">\n  <nav class=\'l\'>\n    <a href="/logbook/people/',person.id,'">Cancel</a>\n  </nav>\n  <nav class=\'r\'>\n    <a href="/logbook/people" class="destroy">Delete Person</a>\n  </nav>\n</div>\n<div class="section">\n  <div id="person-form"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/people_form"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="field first-name-field">\n  <input id="first_name" name="first_name" required="required" type="text">\n  <label for="first_name">Person First Name</label>\n</div>\n<div class="field last-name-field">\n  <input id="last_name" name="last_name" required="required" type="text">\n  <label for="last_name">Person Last Name</label>\n</div>\n<div class="field school-field">\n  <select id="school_id" name="school_id">\n  </select>\n  <label for="school_id">School</label>\n</div>\n<div class="field role-field">\n  <select id="role" name="role">\n    <option value=""></option>\n    <option value="student">student</option>\n    <option value="teacher">teacher</option>\n    <option value="staff">staff</option>\n  </select>\n  <label for="role">Role</label>\n</div>\n<div class="field grade-field">\n  <select id="grade" name="grade">\n    <option value=""></option>\n    <option value="6">6</option>\n    <option value="7">7</option>\n    <option value="8">8</option>\n    <option value="9">9</option>\n    <option value="10">10</option>\n    <option value="11">11</option>\n    <option value="12">12</option>\n  </select>\n  <label for="grade">Grade</label>\n</div>\n<div class="field sex-field">\n  <select id="sex" name="sex">\n    <option value=""></option>\n    <option value="M">M</option>\n    <option value="F">F</option>\n  </select>\n  <label for="sex">Sex</label>\n</div>\n<div class="field checkbox-field dream-team-field">\n  <input id="dream_team" type=\'checkbox\' name="dream_team" />\n  <label for="dream_team">Dream Team</label>\n</div>\n<div class="field email-field">\n  <input id="email" name="email" type="text">\n  <label for="email">Email</label>\n</div>\n<div class="field phone-field">\n  <input id="phone" name="phone" type="text">\n  <label for="phone">Phone</label>\n</div>\n<div class="field checkbox-field media-release-field">\n  <input id="media_release" type=\'checkbox\' name="media_release" />\n  <label for="media_release">Media Release On File</label>\n</div>\n<input type="submit" value="Save" class=\'save people-link\'>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/people_index"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="titlebar">\n  <div class="title">People</div>\n</div>\n<div class="section leaderboard">\n  <div id="people-leaderboard"></div>\n</div>\n<div class="section">\n  <div id="people-table" class="table index-table people-table"></div>\n  <div id="people-pagination"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/people_new"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="titlebar">\n  <div class="subtitle">Adding</div>\n  <div class="title">Person</div>\n</div>\n<div class="footerbar">\n  <nav class=\'l\'>\n    <a class="engagements-link" href="/logbook/engagements/new">Add Engagement</a>\n    <a class="projects-link" href="/logbook/projects/new">Add Project</a>\n  </nav>\n</div>\n<div class="section">\n  <div id="person-form"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/people_show"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="titlebar">\n  <a class="title" href="/logbook/people">People</a>\n  <div class="subtitle">&rsaquo; ',person.first_name," ",person.last_name,"</div>\n  <nav class='titlebar-actions'>\n    <a href=\"/logbook/people/",person.id,'/edit">Edit</a>\n  </nav>\n</div>\n<ul class="factbar">\n  <li class="fact">\n    <label>Role</label>\n    ',person.role,'\n  </li>\n  <li class="fact">\n    <label>Grade</label>\n    ',person.grade,'\n  </li>\n  <li class="fact">\n    <label>Dream Team</label>\n    ',person.dream_team,'\n  </li>\n  <li class="fact">\n    <label>School</label>\n    ',person.school_name,'\n  </li>\n  <li class="fact">\n    <label>Email</label>\n    ',person.email,'\n  </li>\n  <li class="fact">\n    <label>Phone</label>\n    ',person.phone,'\n  </li>\n</ul>\n<div class="section">\n  <h2 class="section-header">\n    ',person.projects.length,' Projects\n    <!-- <a class=\'section-header-action projects-link\' href="#" title="Add a project for ',person.first_name,'"><span class=\'icon-add_circle_outline\'></span></a> -->\n  </h2>\n  <div id="projects-table" class="table"></div>\n</div>\n<div class="section notes" id="notes">\n  <h2 class="section-header">\n    ',person.notes.length," Notes\n    <a class='section-header-action' href=\"/logbook/people/",person.id,'/notes/add" title="Add a note for ',person.first_name,'">Add Note <span class=\'icon-add_circle_outline\'></span></a>\n  </h2>\n  <div id="stickies" class="stickies"></div>\n</div>\n<div class="section">\n  <div id="engagement_bubbles_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n</div>\n<div class="section">\n  <h2 class="section-header">\n    ',person.engagements.length,' Recent Engagements\n    <!-- <a class=\'section-header-action engagements-link\' href="#" title="Add an engagement for ',person.first_name,'"><span class=\'icon-add_circle_outline\'></span></a> -->\n  </h2>\n  <div id="engagements-table" class="table"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/projects_edit"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="titlebar">\n  <div class="title">Editing Project</div>\n</div>\n<div class="footerbar">\n  <nav class=\'l\'>\n    <a href="/logbook/projects/',project.id,'">Cancel</a>\n  </nav>\n  <nav class=\'r\'>\n    <a href="/logbook/projects" class="destroy">Delete Project</a>\n  </nav>\n</div>\n<div class="section">\n  <div id="project-form"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/projects_form"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="field name-field">\n  <input id="name" name="name" type="text">\n  <label for="name">Proj. Name</label>\n</div>\n<div class="field status-field">\n  <select id="status" name="status">\n    <option value="underway">Underway</option>\n    <option value="stalled">Stalled</option>\n    <option value="complete">Complete</option>\n  </select>\n  <label for="status">Status</label>\n</div>\n<div class="field school-field">\n  <select id="school_id" name="school_id">\n  </select>\n  <label for="school_id">School</label>\n</div>\n<div class="field description-field">\n  <textarea name=\'description\'></textarea>\n  <label for="description">Description</label>\n</div>\n<div class="field selectize-field">\n  <select id="leader_ids" name="leader_ids" multiple></select>\n  <label for="leader_ids">Leaders</label>\n</div>\n<div class="field selectize-field">\n  <select id="supporter_ids" name="supporter_ids" multiple></select>\n  <label for="supporter_ids">Supporters</label>\n</div>\n<input type="submit" value="Save" class=\'save people-link\'>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/projects_index"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="titlebar">\n  <div class="title">Projects</div>\n</div>\n<div class="section leaderboard">\n  <div id="projects-leaderboard"></div>\n</div>\n<div class="section">\n  <div id="projects-table" class="table index-table"></div>\n  <div id="projects-pagination"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/projects_new"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="titlebar">\n  <div class="subtitle">Adding</div>\n  <div class="title">Project</div>\n  </div>\n</div>\n<div class="footerbar">\n  <nav class=\'l\'>\n    <a class="engagements-link" href="/logbook/engagements/new">Add Engagement</a>\n    <a class="people-link" href="/logbook/people/new">Add Person</a>\n  </nav>\n</div>\n<div class="section">\n  <div id="project-form"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/projects_show"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="titlebar">\n  <a class="title" href="/logbook/projects">Projects</a>\n  <div class="subtitle">&rsaquo; ',project.name||"Viewing Project","</div>\n  <nav class='titlebar-actions'>\n    <a href=\"/logbook/projects/",project.id,'/edit">Edit</a>\n  </nav>\n</div>\n<ul class="factbar">\n  <li class="fact">\n    <label>status</label>\n    ',project.status,'\n  </li>\n  <li class="fact">\n    <label>created</label>\n    <span class="datefact">',ds.datesHelper.format(project.created_at),'</span>\n  </li>\n  <li class="fact">\n    <label>Updated</label>\n    <span class="datefact">',ds.datesHelper.format(project.updated_at),'</span>\n  </li>\n  <li class="fact">\n    <label>School</label>\n    ',project.school_name,"\n  </li>\n</ul>\n"),project.description&&__p.push('\n<div class="section">\n  <pre>',project.description,"</pre>\n</div>\n"),__p.push('\n</div>\n<div class="section notes" id="notes">\n  <h2 class="section-header">\n    ',project.notes.length," Notes\n    <a class='section-header-action' href=\"/logbook/projects/",project.id,'/notes/add" title="Add a note">Add Note <span class=\'icon-add_circle_outline\'></span></a>\n  </h2>\n  <div id="stickies" class="stickies"></div>\n</div>\n<div class="section">\n  <h2 class="section-header">Project Team - ',project.people.length,' People</h2>\n  <div id="people-table" class="table people-table"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/report_submissions_index"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="titlebar">\n  <div class="title">Reports</div>\n</div>\n<div id="reports-submitted-link-container">\n</div>\n<div class="section" id="report-submissions-table-wrapper">\n  <div id="report-submissions-table" class="table index-table report-submissions-table"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/report_submissions_show"]=function(obj){var __p=[];
with(obj||{})__p.push('<div class="titlebar">\n  <a class="title" href="/logbook/report_submissions">Reports</a>\n  <div class="subtitle">&rsaquo; ',report_submission.name,'</div>\n  <nav class=\'titlebar-actions\'>\n    <a title="Save this report so you can continue it later" class=\'save people-link\' href="/logbook/report_submissions">Save</a>\n    <a title="Submit this report to HQ" class=\'submit\' href="/logbook/report_submissions">Submit</a>\n  </nav>\n</div>\n<div class="text-editor">\n  <textarea name="body" id="report-body">',report_submission.body,"</textarea>\n</div>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/schools_dashboard"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="titlebar">\n  <div class="title">Dashboard</div>\n  <div class="subtitle">for ',name,'</div>\n</div>\n<ul class="factbar">\n  <li class="fact">\n    <label>Dream Director</label>\n    ',dd_name,'\n  </li>\n  <li class="fact">\n    <label>City</label>\n    ',city_name,'\n  </li>\n</ul>\n<div class="section">\n  <h2 class="section-header">Stats by School</h2>\n  <div id="schools-table" class="table"></div>\n</div>\n<div class="section">\n  <div id="hours_per_person_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n</div>\n<div class="section">\n  <div id="people_timeline_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n</div>\n<div class="section two-col">\n  <div id="project_percentage_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n  <div id="engagement_percentage_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n</div>\n<div class="section two-col">\n  <div id="program_hours_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n  <div id="engagement_counts_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n</div>\n<div class="section">\n  <div id="weekly_rhythm_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/scopes"]=function(obj){var __p=[];with(obj||{})__p.push('<a href="/logbook/set_scope?scope_id=',id,"&scope_type=",class_name,'">',name,"</a>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/sites_dashboard"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="titlebar">\n  <div class="title">Dashboard</div>\n  <div class="subtitle">for ',name,'</div>\n</div>\n<ul class="factbar">\n  <li class="fact">\n    <label>Chief</label>\n    ',chief_name,'\n  </li>\n</ul>\n<div class="section">\n  <h2 class="section-header">Stats by School</h2>\n  <div id="schools-table" class="table"></div>\n</div>\n<div class="section">\n  <div id="people_timeline_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n</div>\n<div class="section two-col">\n  <div id="program_hours_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n  <div id="engagement_counts_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n</div>\n<div class="section">\n  <div id="engagements_context_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n</div>\n<div class="section two-col">\n  <div id="projects_started_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n  <div id="projects_completed_graph" class="graph">\n    <div class="lb-loading"></div>\n  </div>\n</div>\n<div class="section">\n  <h2 class="section-header">Stats by City</h2>\n  <div id="sites-table" class="table"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/sticky_media"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="note-date">',Date.parse(note.created_at).toString("yyyy-MM-dd"),'</div>\n<div class="note-user">',note.author,'</div>\n<a title="',note.author,": ",note.text,'" href="',note.poster.original,'" class="thumbnail" style="background-image: url(',note.poster.thumbnail,');">\n</a>\n<div class="action delete icon-delete"></div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/sticky_text"]=function(obj){var __p=[];with(obj||{}){__p.push('<div class="note-date">',Date.parse(note.created_at).toString("yyyy-MM-dd"),'</div>\n<div class="note-user">',note.author,'</div>\n<div class="note-content">\n  <label>Attachments: ',note.assets.length,'</label>\n  <ul class="note-attachments">\n    ');for(var i=0;i<note.assets.length;i++)__p.push("\n      <li class='note-attachment'>\n        <a href=\"",note.assets[i].original,'">\n          ',ds.nounsHelper.depapify(note.assets[i].original),"\n        </a>\n      </li>\n    ");__p.push('\n  </ul>\n  <pre class="note-text">',note.content,'</pre>\n</div>\n<div class="action delete icon-delete"></div>\n<div class="action edit icon-edit"></div>\n<div class="done">Done</div>\n')}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["logbook/templates/user"]=function(obj){var __p=[];with(obj||{})__p.push('<a title="View Profile" class="to-profile" href="/logbook/people/',user.id,'">\n  <img src="',user.avatar_url,'" alt="View Profile">\n</a>\n<div class=\'current-user-name\'>',user.first_name," ",user.last_name,'</div>\n<a href="/auth/logout" title="Log Out">Log Out</a>\n');return __p.join("")}}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.AppView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.el="body",n.prototype.initialize=function(){return $.ajaxPrefilter(function(t,e,n){return n.withCredentials=!0,console.log("AJAX call to "+t.url),!0}),this.listenTo(Backbone,"routed",this.routeChangeHandler)},n.prototype.events={"click #yield a":"internalLinkHandler"},n.prototype.internalLinkHandler=function(t){var e;return e=t.currentTarget.getAttribute("href"),null==e||e.match(/http/i)||"#"===e?!0:t.which>1||t.shiftKey||t.altKey||t.metaKey||t.ctrlKey?void 0:(t.preventDefault(),ds.router.navigate(e,{trigger:!0}))},n.prototype.routeChangeHandler=function(t){var e;if(!t.match(/notes/i))return e=t.replace(/\_/g," "),this.el.setAttribute("class",e)},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.AssetView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.listenTo(this.model,"destroy",this.animateOut)},n.prototype.className=function(){return"sticky asset"},n.prototype.template=JST["logbook/templates/asset"],n.prototype.render=function(){return this.$el.html(this.template(this.model.tplAttrs())),this},n.prototype.events={"click .delete":"delete"},n.prototype["delete"]=function(t){return confirm("Are you sure you want to delete this attachment?")?(this.model.destroy(),!0):(t.preventDefault(),!1)},n.prototype.animateOut=function(){return this.$el.animate({opacity:0},function(t){return function(){return t.hide()}}(this))},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.EngagementsEditView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.views={form:new ds.EngagementsFormView({model:this.model})}},n.prototype.template=JST["logbook/templates/engagements_edit"],n.prototype.className="engagement edit",n.prototype.events={"click .destroy":"destroy"},n.prototype.render=function(){return this.$el.html(this.template(this.model.tplAttrs())),this.postRender(),this},n.prototype.postRender=function(){return this.views.form.renderTo("#engagement-form")},n.prototype.destroy=function(t){return confirm("Permanently delete this engagement?")?(this.model.destroy(),!0):(t.preventDefault(),!1)},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.EngagementsFormView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.views={},this.listenTo(this.model,"change",this.render),this.listenTo(ds.collections.schools,"reset",this.postRender)},n.prototype.tagName="form",n.prototype.className=function(){return this.model.get("kind").toLowerCase()},n.prototype.events={submit:"onsubmit","change #kind":"setCssClassFromKind"},n.prototype.setCssClassFromKind=function(t){return this.$el.attr("class",$(t.currentTarget).val().toLowerCase())},n.prototype.template=JST["logbook/templates/engagements_form"],n.prototype.render=function(){return this.$el.html(this.template(this.model.tplAttrs())),this.delegateEvents(),this.postRender(),this},n.prototype.postRender=function(){return this.setSchoolOptions(),Backbone.Syphon.deserialize(this,this.model.toJSON()),this.selectize("#attendee_ids",{initialItems:this.model.get("attendees")})},n.prototype.onsubmit=function(t){var e;return t.preventDefault(),e=Backbone.Syphon.serialize(this),this.model.save(e)?(this.model.isNew()&&this.reflectIdChange(),ds.collections.engagements.add(this.model,{merge:!0}),ds.router.navigate(ds.urlsHelper.urlFor(this.model),{trigger:!0})):alert(this.model.validationError)},n.prototype.setSchoolOptions=function(){var t,e;return e=document.createDocumentFragment(),t=$(e),t.append("<option value></option>"),ds.collections.schools.each(function(e){return t.append("<option value='"+e.get("id")+"'>"+e.get("name")+"</option>")}),this.$el.find("#school_id").html(t)},n.prototype.reflectIdChange=function(){return this.model.once("change:id",function(t){return function(){return ds.router.navigate(ds.urlsHelper.urlFor(t.model),{trigger:!0,replace:!0})}}(this))},n.prototype.selectize=function(t,e){var n,i,r,o;return e||(e={}),n=$(t),o=e.initialItems,r=n.attr("id")+"_"+_.size(this.views),i=$(document.createDocumentFragment()),_.each(o,function(t){return i.append("<option selected value='"+t.id+"'>"+t.first_name+" "+t.last_name+"</option>")}),n.append(i),this.views[r]=new ds.SelectizeView({el:n})},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.EngagementsIndexView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.views={leaderboard:new ds.LeaderboardView({url:ds.apiHelper.urlFor("engagements_leaderboard")}),table:new ds.IndexTableView({collection:ds.collections.engagements,columns:ds.collections.engagements.backgrid_columns}),pagination:new Backgrid.Extension.Paginator({collection:ds.collections.engagements})}},n.prototype.template=JST["logbook/templates/engagements_index"],n.prototype.className="engagements",n.prototype.render=function(){return this.$el.html(this.template()),this.postRender(),this},n.prototype.postRender=function(){return this.views.leaderboard.renderTo("#engagements-leaderboard"),this.views.table.renderTo("#engagements-table"),this.views.pagination.renderTo("#engagements-pagination")},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.EngagementsNewView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.model||(this.model=new ds.Engagement),this.views={form:new ds.EngagementsFormView({model:this.model})}},n.prototype.template=JST["logbook/templates/engagements_new"],n.prototype.className="engagement edit",n.prototype.render=function(){return this.$el.html(this.template(this.model.tplAttrs())),this.postRender(),this},n.prototype.postRender=function(){return this.views.form.renderTo("#engagement-form")},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.EngagementsShowView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render),this.collections={attendees:new ds.PeopleCollection({mode:"client"})},this.views={attendees_table:new ds.IndexTableView({collection:this.collections.attendees,columns:ds.collections.people.backgrid_columns}),stickies:new ds.StickiesView({model:this.model})}},n.prototype.template=JST["logbook/templates/engagements_show"],n.prototype.events={"click .duplicate":"duplicate"},n.prototype.className="engagement profile",n.prototype.render=function(){return this.$el.html(this.template(this.model.tplAttrs())),this.postRender(),this},n.prototype.postRender=function(){return this.model.isNew()?void 0:(this.collections.attendees.reset(this.model.get("attendees")),this.collections.attendees.length>0&&this.views.attendees_table.renderTo("#attendees-table"),this.views.stickies.collection.add(this.model.get("notes")),this.views.stickies.renderTo("#stickies"))},n.prototype.duplicate=function(t){var e,n;return t.preventDefault(),e=_.omit(_.clone(this.model.attributes),"id","date"),e.name.match(/remix/i)||(e.name+=" (Remix)"),n=new ds.Engagement,n.save(e)?(ds.collections.engagements.add(n,{merge:!0}),ds.router.navigate(ds.urlsHelper.urlFor(n),{trigger:!0}),n.once("change:id",function(){return function(){return ds.router.navigate(ds.urlsHelper.urlFor(n),{trigger:!0,replace:!0})}}(this))):void 0},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;window.ds||(window.ds={}),ds.FiltersView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.listenTo(Backbone,"filters:toggle",this.toggle)},n.prototype.events={"click a":"animateOut"},n.prototype.toggle=function(){return this.$el.slideToggle("fast",function(){return Backbone.trigger("filters:toggled")})},n.prototype.animateOut=function(t){var e;return e=t.target.href,null!=e?(t.preventDefault(),$("#yield").html('<div class="lb-loading">Loading...</div>'),this.$el.slideUp("fast",function(){return location.href=e})):void 0},n}(Backbone.View),ds.FiltersToggleView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.listenTo(Backbone,"filters:toggle",function(){return $("html, body").animate({scrollTop:0})})},n.prototype.events={click:"toggle"},n.prototype.toggle=function(){return this.$el.toggleClass("open"),Backbone.trigger("filters:toggle",this)},n}(Backbone.View),$(function(){return ds.filters_view=new ds.FiltersView({el:"#filters"}),ds.filters_toggle_view=new ds.FiltersToggleView({el:"#filter-trigger"}),$(".filtres-trigger").on("click",function(){return $(".page-header").toggleClass("filtres-open"),$(".filtres").slideToggle("fast")})})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;window.ds||(window.ds={}),ds.FlashView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(t){return this.message=t.message,this.render()},n.prototype.className="flash",n.prototype.template=_.template("<div class='flash-message'> <%= message %> <a href='<%= ds.REDIRECT_URL %>'>Check it out <span class='icon icon-chevron-right'></span></a> </div> <div class='close'><div class='icon icon-x'></div></div>"),n.prototype.render=function(){return $("body").append(this.$el.hide()),this.$el.html(this.template({message:this.message})),this.$el.slideDown("fast")},n.prototype.events={"click .close":function(){return this.$el.slideUp("fast",function(t){return function(){return t.remove()}}(this))}},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;window.ds||(window.ds={}),ds.GlobalAddTriggerView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.listenTo(Backbone,"routed",this.setCssClass)},n.prototype.el="#global-add-trigger",n.prototype.events={click:"toggle"},n.prototype.setCssClass=function(){return this.$el.toggleClass("open",this.isOpen())},n.prototype.isOpen=function(){return!!location.pathname.match(/new/i)},n.prototype.toggle=function(){return this.isOpen()?this.close():this.open()},n.prototype.open=function(){var t;return this.referrer=location.pathname,t=this.setPathFromLocation(),ds.router.navigate(t,{trigger:!0})},n.prototype.close=function(){var t;return t=this.referrer&&this.referrer!==location.pathname?this.referrer:this.setPathFromLocation({returning:!0}),ds.router.navigate(t,{trigger:!0})},n.prototype.setPathFromLocation=function(t){var e,n,i;return t||(t={}),e=location.pathname,n=t.returning?"/logbook/dashboard":"/logbook/engagements",i=function(){switch(!1){case!e.match(/people/i):return"/logbook/people";case!e.match(/engagements/i):return"/logbook/engagements";case!e.match(/projects/i):return"/logbook/projects";default:return n}}(),t.returning||(i+="/new"),i},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;window.ds||(window.ds={}),ds.GraphView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(t){return(null!=t?t.url:void 0)?(this.url=t.url,this.listenTo(Backbone,"dates:changed",this.load)):void 0},n.prototype.load=function(){return $.ajax({dataType:"json",url:this.url,success:function(t){return function(e){return 0===e.data.length?(t.$el.closest(".section").remove(),t.remove()):(t.setChart(e),t.render())}}(this),error:function(t){return function(){return t.hide()}}(this)})},n.prototype.render=function(){return this.chart.reflow()},n.prototype.renderTo=function(t){return this.setElement(t),this.load()},n.prototype.setChart=function(t){return this.chart=new Highcharts.Chart({colors:t.colors||Highcharts.theme.colors,credits:!1,chart:{renderTo:this.el,type:t.type,backgroundColor:"transparent",zoomType:"xy",height:t.type.match(/bubble|scatter/)?420:315},exporting:{width:600},title:{text:t.title},tooltip:{shared:t.type.match(/area/i)},xAxis:{categories:t.categories,type:t.x_axis_type,title:{text:null},labels:{enabled:"column"===t.type?!1:!0}},yAxis:{min:0,title:{text:null}},plotOptions:{areaspline:{marker:{enabled:!1},fillOpacity:1,stacking:"normal",tooltip:{pointFormat:"{series.name}: <b>{point.y}</b><br>"}},bar:{tooltip:{headerFormat:"{series.name}<br>",pointFormat:"Value: <b>{point.y}</b><br>"},stacking:t.separated?!1:!0},column:{pointWidth:10,tooltip:{headerFormat:"{series.name}<br>",pointFormat:"{point.name}: <b>{point.y}</b><br>"},events:{click:function(t){var e;return e="/logbook/"+t.point.url,window.location=e}}},pie:{allowPointSelect:!0,cursor:"pointer",tooltip:{pointFormat:"Value: <b>{point.y}</b><br>Percentage: <b>{point.percentage:.1f}%</b><br>"},size:"70%",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %<br>",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}},scatter:{tooltip:{headerFormat:t.header_format,pointFormat:t.point_format},events:{click:function(t){var e;return e="/logbook/"+t.point.url,window.location=e}}},bubble:{tooltip:{headerFormat:t.header_format,pointFormat:t.point_format},events:{click:function(t){var e;return e="/logbook/"+t.point.url,window.location=e}}}},series:t.data})},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.RowLinkView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.className="index-row",n.prototype.events={click:"triggerPermalink"},n.prototype.triggerPermalink=function(t){var e;return t.which>1||t.shiftKey||t.altKey||t.metaKey||t.ctrlKey?void 0:(t.preventDefault(),e=ds.urlsHelper.urlFor(this.model),ds.router.navigate(e,{trigger:!0}))},n}(Backgrid.Row)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.IndexTableView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.listenTo(this.collection,"backgrid:sort",function(t){var e,n;e=t.cid,n=t.collection.filter(function(t){return t.cid!==e}),_.each(n,function(t){t.set("direction",null)})})},n}(Backgrid.Grid)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;window.ds||(window.ds={}),ds.LabelsView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return("undefined"!=typeof Modernizr&&null!==Modernizr?Modernizr.csspositionsticky:0)||null==this.el?void 0:(this.setTriggerPosition(),this.listenTo(Backbone,"filters:toggled",this.setTriggerPosition),this.activate())},n.prototype.setTriggerPosition=function(){return this.triggerPosition=this.$el.offset().top},n.prototype.activate=function(){return $(window).on("scroll",function(t){return function(){var e;return e=window.pageYOffset,e>=t.triggerPosition?t.$el.addClass("locked").next().css("margin-top",t.el.getBoundingClientRect().height+"px"):t.$el.removeClass("locked").next().css("margin-top","")}}(this))},n.prototype.events={"click a":function(t){return this.$el.find("a").removeClass("active"),$(t.currentTarget).addClass("active")}},n}(Backbone.View),$(function(){return ds.labels_view=new ds.LabelsView({el:".labels"})})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;ds.LeaderboardView=function(n){function i(){return this.addList=t(this.addList,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.className="three-col",i.prototype.initialize=function(t){if(!(null!=t?t.url:void 0))throw"ds.LeaderboardView needs a URL argument";return this.url=t.url,this.listenTo(Backbone,"dates:changed",this.render)},i.prototype.events={"click a":"linkToProfile"},i.prototype.render=function(){return this.$el.html("<div class='lb-loading'></div>"),$.getJSON(this.url,function(t){return function(e){return t.state=e.state,t.$el.empty(),_.each(e.data,function(e,n){return t.addList(e,n)})}}(this))},i.prototype.addList=function(t,e){var n;return n=$("<ul />"),_.each(t,function(t){return function(e){return n.append("<li>"+e.stat+" - <a href='/logbook/"+t.state.namespace+"/"+e.id+"'>"+e.name+"</a></li>")}}(this)),n.prepend("<li><label>"+e.replace(/\_/gi," ")+"</label></li>"),0===t.length&&n.append("<li>No Results</li>"),this.$el.append(n)},i.prototype.linkToProfile=function(){},i}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.NationalDashboardView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.views={sites_table:new ds.StatsTableView({collection:ds.collections.sites,columns:ds.collections.sites.backgrid_columns}),schools_table:new ds.StatsTableView({collection:ds.collections.schools,columns:ds.collections.schools.backgrid_columns}),people_timeline_graph:new ds.GraphView({url:ds.apiHelper.urlFor("national_graphs","people_timeline_graph")}),program_hours_graph:new ds.GraphView({url:ds.apiHelper.urlFor("national_graphs","program_hours_graph")}),engagement_counts_graph:new ds.GraphView({url:ds.apiHelper.urlFor("national_graphs","engagement_counts_graph")}),engagements_context_graph:new ds.GraphView({url:ds.apiHelper.urlFor("national_graphs","engagements_context_graph")}),projects_started_graph:new ds.GraphView({url:ds.apiHelper.urlFor("national_graphs","project_counts_graph")}),projects_completed_graph:new ds.GraphView({url:ds.apiHelper.urlFor("national_graphs","project_counts_graph")+"?status=complete"})}},n.prototype.template=JST["logbook/templates/national_dashboard"],n.prototype.className="dashboard",n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.postRender(),this},n.prototype.postRender=function(){return this.$el.find("#sites-table").html(this.views.sites_table.render().el),this.$el.find("#schools-table").html(this.views.schools_table.render().el),_.each([this.views.sites_table,this.views.schools_table],function(t){return ds.statsHelper.getStats(t.collection)}),this.views.people_timeline_graph.renderTo("#people_timeline_graph"),this.views.engagement_counts_graph.renderTo("#engagement_counts_graph"),this.views.engagements_context_graph.renderTo("#engagements_context_graph"),this.views.program_hours_graph.renderTo("#program_hours_graph"),this.views.projects_started_graph.renderTo("#projects_started_graph"),this.views.projects_completed_graph.renderTo("#projects_completed_graph")},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.NotesFormView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.views={uploader:new ds.UploaderView},this.listenTo(Backbone,"upload:finished",this.addAsset)},n.prototype.tagName="form",n.prototype.events={submit:"onsubmit"},n.prototype.template=JST["logbook/templates/notes_form"],n.prototype.render=function(){return this.$el.html(this.template(this.model.tplAttrs())),this.postRender(),this},n.prototype.postRender=function(){return this.views.uploader.setElement("#assets"),Backbone.Syphon.deserialize(this,this.model.toJSON())},n.prototype.onsubmit=function(t){var e,n,i;return t.preventDefault(),i=new ds.SpinnerView,this.$el.append(i.el),e=Backbone.Syphon.serialize(this),n=this.model.getNotable(),this.model.save(e,{error:function(t){return console.log(t)},complete:function(){return i.remove(),ds.router.navigate(ds.urlsHelper.urlFor(n),{trigger:!0})}})},n.prototype.addAsset=function(t){var e;return e=this.model.get("assets"),e.push({attachable_type:"Note",external_url:t}),this.model.set("assets",e)},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.NotesNewView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.model||(this.model=new ds.Note),this.views={form:new ds.NotesFormView({model:this.model})}},n.prototype.template=JST["logbook/templates/notes_new"],n.prototype.className="note new modal-container fade-in",n.prototype.events={"click .cancel":"cancel",click:"conditionallyCancel"},n.prototype.render=function(){return this.$el.html(this.template(this.model.tplAttrs())),this.postRender(),this},n.prototype.postRender=function(){return $("#yield").append(this.el),this.$el.fadeIn("fast"),this.views.form.renderTo("#note-form"),this.views.form.$el.find("textarea").first().focus()},n.prototype.cancel=function(){var t,e,n,i,r,o;return o=this.$el.find("textarea").val(),e="Are you sure you want to close this note without saving?",(t=0===o.length||confirm(e))?(n=this.model.getNotable(),r=!n.has("created_at"),i=ds.urlsHelper.urlFor(this.model.getNotable()),ds.router.navigate(i,{trigger:r}),this.$el.fadeOut("fast",function(t){return function(){return t.hide()}}(this))):void 0},n.prototype.conditionallyCancel=function(t){return t.target.className.match(/modal-container/i)?this.cancel():void 0},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.PeopleEditView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.views={form:new ds.PeopleFormView({model:this.model})}},n.prototype.template=JST["logbook/templates/people_edit"],n.prototype.className="person edit",n.prototype.events={"click .destroy":"destroy"},n.prototype.render=function(){return this.$el.html(this.template(this.model.tplAttrs())),this.postRender(),this},n.prototype.postRender=function(){return this.views.form.renderTo("#person-form")},n.prototype.destroy=function(t){return confirm("Are you sure?")?(this.model.destroy(),!0):(t.preventDefault(),!1)},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.PeopleFormView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render),this.listenTo(ds.collections.schools,"reset",this.postRender)},n.prototype.tagName="form",n.prototype.events={submit:"onsubmit"},n.prototype.template=JST["logbook/templates/people_form"],n.prototype.render=function(){return this.$el.html(this.template(this.model.tplAttrs())),this.postRender(),this},n.prototype.postRender=function(){return this.setSchoolOptions(),Backbone.Syphon.deserialize(this,this.model.toJSON())},n.prototype.onsubmit=function(t){var e;return t.preventDefault(),e=Backbone.Syphon.serialize(this),this.model.save(e)?(this.model.isNew()&&this.reflectIdChange(),ds.collections.people.add(this.model,{merge:!0}),ds.router.navigate(ds.urlsHelper.urlFor(this.model),{trigger:!0})):alert(this.model.validationError)},n.prototype.setSchoolOptions=function(){var t,e;return e=document.createDocumentFragment(),t=$(e),t.append("<option value></option>"),ds.collections.schools.each(function(e){return t.append("<option value='"+e.get("id")+"'>"+e.get("name")+"</option>")}),this.$el.find("#school_id").html(t)},n.prototype.reflectIdChange=function(){return this.model.once("change:id",function(t){return function(){return ds.router.navigate(ds.urlsHelper.urlFor(t.model),{trigger:!0,replace:!0})}}(this))},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.PeopleIndexView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.views={leaderboard:new ds.LeaderboardView({url:ds.apiHelper.urlFor("people_leaderboard")}),table:new ds.IndexTableView({collection:ds.collections.people,columns:ds.collections.people.backgrid_columns}),pagination:new Backgrid.Extension.Paginator({collection:ds.collections.people})}
},n.prototype.template=JST["logbook/templates/people_index"],n.prototype.className="people",n.prototype.render=function(){return this.$el.html(this.template()),this.postRender(),this},n.prototype.postRender=function(){return this.views.leaderboard.renderTo("#people-leaderboard"),this.views.table.renderTo("#people-table"),this.views.pagination.renderTo("#people-pagination")},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.PeopleNewView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.model||(this.model=new ds.Person),this.views={form:new ds.PeopleFormView({model:this.model})}},n.prototype.template=JST["logbook/templates/people_new"],n.prototype.className="person edit",n.prototype.render=function(){return this.$el.html(this.template(this.model.tplAttrs())),this.postRender(),this},n.prototype.postRender=function(){return this.views.form.renderTo("#person-form"),this.views.form.$el.find("input").first().focus()},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.PeopleShowView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render),this.collections={projects:new ds.ProjectsCollection({mode:"client"}),engagements:new ds.EngagementsCollection({mode:"client"})},this.views={projects_table:new Backgrid.Grid({collection:this.collections.projects,columns:[{name:"name",cell:ds.LogbookLinkCell},{name:"description",cell:"string"},{name:"people_count",cell:"integer",label:"Team Size"},{name:"leading",cell:"boolean"}]}),stickies:new ds.StickiesView({model:this.model}),engagement_bubbles_graph:new ds.GraphView({url:ds.apiHelper.urlFor("people_graphs",{id:this.model.id,graph:"engagement_bubbles_graph"})}),engagements_table:new Backgrid.Grid({collection:this.collections.engagements,columns:this.collections.engagements.backgrid_columns})}},n.prototype.template=JST["logbook/templates/people_show"],n.prototype.className="person profile",n.prototype.render=function(){return this.$el.html(this.template(this.model.tplAttrs())),this.postRender(),this},n.prototype.postRender=function(){return this.model.isNew()?void 0:(this.collections.projects.reset(this.model.get("projects")),this.collections.engagements.reset(this.model.get("engagements")),this.views.stickies.collection.reset(this.model.get("notes")),this.collections.projects.length>0&&this.views.projects_table.renderTo("#projects-table"),this.views.stickies.renderTo("#stickies"),this.views.engagement_bubbles_graph.renderTo("#engagement_bubbles_graph"),this.collections.engagements.length>0?this.views.engagements_table.renderTo("#engagements-table"):void 0)},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.ProjectsEditView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.views={form:new ds.ProjectsFormView({model:this.model})}},n.prototype.template=JST["logbook/templates/projects_edit"],n.prototype.className="project edit",n.prototype.events={"click .destroy":"destroy"},n.prototype.render=function(){return this.$el.html(this.template(this.model.tplAttrs())),this.postRender(),this},n.prototype.postRender=function(){return this.views.form.renderTo("#project-form")},n.prototype.destroy=function(t){return confirm("Permanently delete this project?")?(this.model.destroy(),!0):(t.preventDefault(),!1)},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.ProjectsFormView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.views={},this.listenTo(this.model,"change",this.render),this.listenTo(ds.collections.schools,"reset",this.postRender)},n.prototype.tagName="form",n.prototype.events={submit:"onsubmit"},n.prototype.template=JST["logbook/templates/projects_form"],n.prototype.render=function(){return this.$el.html(this.template(this.model.tplAttrs())),this.postRender(),this},n.prototype.postRender=function(){return this.setSchoolOptions(),Backbone.Syphon.deserialize(this,this.model.toJSON()),this.selectize("#leader_ids",{initialItems:_.filter(this.model.get("people"),function(t){return t.leading})}),this.selectize("#supporter_ids",{initialItems:_.filter(this.model.get("people"),function(t){return!t.leading})})},n.prototype.onsubmit=function(t){var e;return t.preventDefault(),e=Backbone.Syphon.serialize(this),this.model.save(e)?(this.model.isNew()&&this.reflectIdChange(),ds.collections.projects.add(this.model,{merge:!0}),ds.router.navigate(ds.urlsHelper.urlFor(this.model),{trigger:!0})):alert(this.model.validationError)},n.prototype.setSchoolOptions=function(){var t,e;return e=document.createDocumentFragment(),t=$(e),t.append("<option value></option>"),ds.collections.schools.each(function(e){return t.append("<option value='"+e.get("id")+"'>"+e.get("name")+"</option>")}),this.$el.find("#school_id").html(t)},n.prototype.reflectIdChange=function(){return this.model.once("change:id",function(t){return function(){return ds.router.navigate(ds.urlsHelper.urlFor(t.model),{trigger:!0,replace:!0})}}(this))},n.prototype.selectize=function(t,e){var n,i,r,o;return e||(e={}),n=$(t),o=e.initialItems,r=n.attr("id")+"_"+_.size(this.views),i=$(document.createDocumentFragment()),_.each(o,function(t){return i.append("<option selected value='"+t.id+"'>"+t.first_name+" "+t.last_name+"</option>")}),n.append(i),this.views[r]=new ds.SelectizeView({el:n})},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.ProjectsIndexView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.views={leaderboard:new ds.LeaderboardView({url:ds.apiHelper.urlFor("projects_leaderboard")}),table:new ds.IndexTableView({collection:ds.collections.projects,columns:ds.collections.projects.backgrid_columns}),pagination:new Backgrid.Extension.Paginator({collection:ds.collections.projects})}},n.prototype.template=JST["logbook/templates/projects_index"],n.prototype.className="projects",n.prototype.render=function(){return this.$el.html(this.template()),this.postRender(),this},n.prototype.postRender=function(){return this.views.leaderboard.renderTo("#projects-leaderboard"),this.views.table.renderTo("#projects-table"),this.views.pagination.renderTo("#projects-pagination")},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.ProjectsNewView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.model||(this.model=new ds.Project),this.views={form:new ds.ProjectsFormView({model:this.model})}},n.prototype.template=JST["logbook/templates/projects_new"],n.prototype.className="project edit",n.prototype.render=function(){return this.$el.html(this.template(this.model.tplAttrs())),this.postRender(),this},n.prototype.postRender=function(){return this.views.form.renderTo("#project-form"),this.views.form.$el.find("input").first().focus()},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.ProjectsShowView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render),this.collections={people:new ds.PeopleCollection({mode:"client"})},this.views={people_table:new ds.IndexTableView({collection:this.collections.people,columns:[{name:"first_name",label:"First",cell:ds.LogbookLinkCell},{name:"last_name",cell:ds.LogbookLinkCell,label:"Last"},{name:"role",cell:"string"},{name:"dream_team",cell:"boolean",label:"Dream Team"},{name:"grade",cell:"integer"},{name:"projects_count",cell:"integer",label:"Projects"},{name:"engagements_count",cell:"integer",label:"Engagements"},{name:"leading",cell:"boolean"}]}),stickies:new ds.StickiesView({model:this.model})}},n.prototype.template=JST["logbook/templates/projects_show"],n.prototype.className="project profile",n.prototype.render=function(){return this.$el.html(this.template(this.model.tplAttrs())),this.postRender(),this},n.prototype.postRender=function(){return this.model.isNew()?void 0:(this.collections.people.reset(this.model.get("people")),this.collections.people.length>0&&this.views.people_table.renderTo("#people-table"),this.views.stickies.collection.add(this.model.get("notes")),this.views.stickies.renderTo("#stickies"))},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.QuickSearchView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.el="#search-input",n.prototype.initialize=function(){return this.selectize(),this.listen()},n.prototype.listen=function(){},n.prototype.selectize=function(){return this.$el.selectize({optgroups:[{value:"Person",label:"People"},{value:"Project",label:"Projects"},{value:"Engagement",label:"Engagements"}],dropdownParent:"body",optgroupField:"class",valueField:"url",plugins:["optgroup_columns"],onItemAdd:function(t){return function(e){return t.el.selectize.clear(),t.el.selectize.close(),t.el.selectize.blur(),ds.router.navigate(e,{trigger:!0})}}(this),load:function(t,e){return t.length?$.ajax({url:ds.apiHelper.urlFor("search_results")+"?q="+encodeURIComponent(t),type:"GET",error:function(){return e()},success:function(t){return e(t.slice(0,20))}}):e()}})},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.ReportSubmissionsIndexView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.views={table:new ds.IndexTableView({collection:ds.collections.report_submissions,columns:ds.collections.report_submissions.backgrid_columns})}},n.prototype.template=JST["logbook/templates/report_submissions_index"],n.prototype.className="reports",n.prototype.render=function(){return this.$el.html(this.template()),this.postRender(),this},n.prototype.postRender=function(){return this.views.table.renderTo("#report-submissions-table"),ds.current_user.get("role").match(/admin|chief/i)?this.renderSubmissionsLink():void 0},n.prototype.renderSubmissionsLink=function(){return console.log("!!"),this.$el.find("#reports-submitted-link-container").html("<div class='footerbar'> <nav class='r'> <a href='http://go.dream.org/reports'>View Submitted Reports</a> </nav> </div>")},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.ReportSubmissionsShowView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render),this.views={}},n.prototype.events={"click .save":"save","click .submit":"submit"},n.prototype.template=JST["logbook/templates/report_submissions_show"],n.prototype.className="report-submissions show",n.prototype.render=function(){return this.$el.html(this.template(this.model.tplAttrs())),this.postRender(),this},n.prototype.postRender=function(){},n.prototype.getBodyFromTextEditor=function(){return{body:this.el.querySelector("textarea").value.trim()}},n.prototype.save=function(t){var e;return t.preventDefault(),e=this.getBodyFromTextEditor(),this.model.save(e,{silent:!0}),!0},n.prototype.submit=function(t){var e;return t.preventDefault(),e=this.getBodyFromTextEditor(),this.model.save(_.extend(e,{status:"Submitted"}),{silent:!0}),!0},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.SchoolsDashboardView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.views={schools_table:new ds.StatsTableView({collection:ds.collections.schools,columns:ds.collections.schools.backgrid_columns,row:ds.StatsRowView}),people_timeline_graph:new ds.GraphView({url:ds.apiHelper.urlFor("school_graphs",{id:this.model.id,graph:"people_timeline_graph"})}),hours_per_person_graph:new ds.GraphView({url:ds.apiHelper.urlFor("school_graphs",{id:this.model.id,graph:"hours_per_person_graph"})}),project_percentage_graph:new ds.GraphView({url:ds.apiHelper.urlFor("school_graphs",{id:this.model.id,graph:"project_percentage_graph"})}),engagement_percentage_graph:new ds.GraphView({url:ds.apiHelper.urlFor("school_graphs",{id:this.model.id,graph:"engagement_percentage_graph"})}),program_hours_graph:new ds.GraphView({url:ds.apiHelper.urlFor("school_graphs",{id:this.model.id,graph:"program_hours_graph"})}),engagement_counts_graph:new ds.GraphView({url:ds.apiHelper.urlFor("school_graphs",{id:this.model.id,graph:"engagement_counts_graph"})}),weekly_rhythm_graph:new ds.GraphView({url:ds.apiHelper.urlFor("school_graphs",{id:this.model.id,graph:"weekly_rhythm_graph"})})}},n.prototype.template=JST["logbook/templates/schools_dashboard"],n.prototype.className="dashboard",n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.postRender(),this},n.prototype.postRender=function(){return this.$el.find("#schools-table").html(this.views.schools_table.render().el),_.each([this.views.schools_table],function(t){return ds.statsHelper.getStats(t.collection)}),this.views.people_timeline_graph.renderTo("#people_timeline_graph"),this.views.hours_per_person_graph.renderTo("#hours_per_person_graph"),this.views.project_percentage_graph.renderTo("#project_percentage_graph"),this.views.engagement_percentage_graph.renderTo("#engagement_percentage_graph"),this.views.engagement_counts_graph.renderTo("#engagement_counts_graph"),this.views.program_hours_graph.renderTo("#program_hours_graph"),this.views.weekly_rhythm_graph.renderTo("#weekly_rhythm_graph")},n.prototype.hide=function(){return _.each(this.views,function(t){return t.remove()})},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;window.ds||(window.ds={}),ds.ScopeToggleView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.listenTo(Backbone,"scopes:toggle",function(){return this.$el.toggleClass("open")}),this.$el.find("#current-scope-indicator").html(ds.CONSTANTS.scope.name)},n.prototype.el="#scope-toggle",n.prototype.events={click:function(){return Backbone.trigger("scopes:toggle")}},n}(Backbone.View),ds.ScopeMenuView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.hide(),this.sites={el:"#sites-list",collection:ds.collections.sites},this.schools={el:"#schools-list",collection:ds.collections.schools},this.listenTo(this.schools.collection,"reset",this.render),this.listenTo(this.sites.collection,"reset",this.render),this.listenTo(Backbone,"scopes:toggle",this.toggle)},n.prototype.el="#scope-menu",n.prototype.toggle=function(){return this.visible?this.hide():this.show()},n.prototype.hide=function(){return this.$el.slideUp(),this.visible=!1},n.prototype.show=function(){return this.$el.slideDown(),this.visible=!0},n.prototype.template=JST["logbook/templates/scopes"],n.prototype.render=function(){return _.each([this.sites,this.schools],function(t){return function(e){var n;return n=document.createElement("ul"),e.collection.each(function(e){var i;return i=document.createElement("li"),i.innerHTML=t.template(e.tplAttrs()),n.appendChild(i)}),$(e.el).html(n)}}(this))},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.SelectizeView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.selectize()},n.prototype.template=function(t,e){return t.first_name?"<div>"+e(t.first_name+" "+t.last_name)+"</div>":"<div>"+e(t.text)+"</div>"},n.prototype.selectize=function(){return this.$el.selectize({valueField:"id",searchField:["first_name","last_name"],createFilter:function(t){var e,n,i;return i=t.split(" "),e=i.shift(),n=i.join(" "),(null!=e?e.length:void 0)>0&&(null!=n?n.length:void 0)>0?!0:!1},create:function(t){return function(e){var n,i;return i=e.split(" "),n={id:"person_"+Math.floor(1e4*Math.random()),last_name:i.pop(),first_name:i.join(" "),school_id:$("select[name*=school_id]").val()},$.ajax(ds.apiHelper.urlFor("people"),{type:"POST",data:{person:n},complete:function(e){var i;return i=e.responseJSON,t.el.selectize.updateOption(n.id,{id:i.id,first_name:i.first_name,last_name:i.last_name}),t.el.selectize.refreshItems()}}),n}}(this),load:function(t,e){return t.length?$.ajax({url:ds.apiHelper.urlFor("people")+"?q="+encodeURIComponent(t),type:"GET",error:function(){return e()},success:function(t){return e(t.data.slice(0,10))}}):e()},render:{item:this.template,option:this.template}})},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.SitesDashboardView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.views={schools_table:new ds.StatsTableView({collection:ds.collections.schools,columns:ds.collections.schools.backgrid_columns}),people_timeline_graph:new ds.GraphView({url:ds.apiHelper.urlFor("site_graphs",{id:this.model.id,graph:"people_timeline_graph"})}),program_hours_graph:new ds.GraphView({url:ds.apiHelper.urlFor("site_graphs",{id:this.model.id,graph:"program_hours_graph"})}),engagements_context_graph:new ds.GraphView({url:ds.apiHelper.urlFor("site_graphs",{id:this.model.id,graph:"engagements_context_graph"})}),engagement_counts_graph:new ds.GraphView({url:ds.apiHelper.urlFor("site_graphs",{id:this.model.id,graph:"engagement_counts_graph"})}),projects_started_graph:new ds.GraphView({url:ds.apiHelper.urlFor("site_graphs",{id:this.model.id,graph:"project_counts_graph"})}),projects_completed_graph:new ds.GraphView({url:ds.apiHelper.urlFor("site_graphs",{id:this.model.id,graph:"project_counts_graph"})+"?status=complete"}),sites_table:new ds.StatsTableView({collection:ds.collections.sites,columns:ds.collections.sites.backgrid_columns,row:ds.StatsRowView})}},n.prototype.template=JST["logbook/templates/sites_dashboard"],n.prototype.className="dashboard",n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.postRender(),this},n.prototype.postRender=function(){return this.$el.find("#schools-table").html(this.views.schools_table.render().el),this.$el.find("#sites-table").html(this.views.sites_table.render().el),_.each([this.views.schools_table,this.views.sites_table],function(t){return ds.statsHelper.getStats(t.collection)}),this.views.people_timeline_graph.renderTo("#people_timeline_graph"),this.views.engagements_context_graph.renderTo("#engagements_context_graph"),this.views.engagement_counts_graph.renderTo("#engagement_counts_graph"),this.views.program_hours_graph.renderTo("#program_hours_graph"),this.views.projects_started_graph.renderTo("#projects_started_graph"),this.views.projects_completed_graph.renderTo("#projects_completed_graph")},n.prototype.hide=function(){return _.each(this.views,function(t){return t.remove()})},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.SpinnerView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.className="lb-loading",n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.StatsRowView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.className=function(){var t;return t=ds.scopeHelper.getScope(),this.model.id===t.id&&this.model.namespace===t.namespace?"stats-row stats-row-current":"stats-row"},n}(Backgrid.Row)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.StatsTableView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.listenTo(Backbone,"dates:changed",this.getStats)},n.prototype.getStats=function(){return this.collection.fetch({success:function(t){return function(){var e;return e=t.collection.url()+"/stats",$.getJSON(e,function(e){return t.collection.add(e,{merge:!0})})}}(this)})},n}(Backgrid.Grid)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.StickiesView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.collection=new ds.NotesCollection,this.views=[]},n.prototype.render=function(){var t;return t=$(document.createDocumentFragment()),this.collection.each(function(e){return function(n){var i,r;return r=new ds.StickyView({model:n}),e.views.push(r),t.append(r.render().el),i=n.get("assets")}}(this)),this.$el.html(t),this},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.StickyView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.listenTo(this.model,"destroy",this.animateOut),this.template=JST["logbook/templates/sticky_"+this.model.getKind()]},n.prototype.className=function(){return"sticky "+this.model.getKind()},n.prototype.render=function(){return this.$el.html(this.template(this.model.tplAttrs())),this},n.prototype.events={"click .delete":"delete","click .edit":"enterEditMode","click .done":"exitEditMode"},n.prototype["delete"]=function(t){return confirm("Are you sure you want to delete this note?")?(this.model.destroy(),!0):(t.preventDefault(),!1)},n.prototype.animateOut=function(){return this.$el.animate({opacity:0},function(t){return function(){return t.hide()}}(this))},n.prototype.enterEditMode=function(){return this.$el.addClass("editing"),this.$el.find(".note-text").attr("contenteditable","true").focus()},n.prototype.exitEditMode=function(){var t;return this.$el.removeClass("editing"),t=this.$el.find(".note-text").removeAttr("contenteditable").html(),this.model.save({content:t})},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.TimeFilterView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.now=new Date,this.beginning_of_school_year=new Date(ds.CONSTANTS.beginning_of_school_year),this.options={this_school_year:[this.beginning_of_school_year,this.now],past_two_weeks:[this.subtractDays(this.now,14),this.now],past_month:[this.subtractDays(this.now,30),this.now],past_three_months:[this.subtractDays(this.now,90),this.now],this_time_last_year:[this.subtractDays(this.beginning_of_school_year,365),this.subtractDays(this.now,365)],dawn_of_time:[new Date(2014,7,24),this.now]},this.dates={},$.ajaxPrefilter(function(t){return function(e,n){return e.type.match(/get/i)?(e.data=t.addDatesToParams(n.data),!0):!0}}(this))},n.prototype.el="#time-filter-menu",n.prototype.events={change:"onchange"},n.prototype.onchange=function(){var t,e;return e=this.$el.val(),t=this.options[e],this.dates={t_start:Date.parse(t[0]).toString("yyyy-MM-dd"),t_end:Date.parse(t[1]).toString("yyyy-MM-dd")},Backbone.trigger("dates:changed")},n.prototype.addDatesToParams=function(t){switch(typeof t){case"string":t=$.extend(JSON.parse(t),this.dates);break;case"object":case"array":t=$.extend(t,this.dates);break;default:t=this.dates}return $.param(t)},n.prototype.subtractDays=function(t,e){var n;return n=new Date,n.setTime(t.getTime()),n.setDate(n.getDate()-e),n},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.UploaderView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.events={change:"batchUpload"},n.prototype.batchUpload=function(){var t,e,n,i,r;for(this.initMeters(),i=this.el.files,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(this.upload(t));return r},n.prototype.upload=function(t){var e;return e=$("<div class='progress-meter' />"),this.$meters.append(e),new S3Upload({file:t,s3_sign_put_url:ds.apiHelper.urlFor("assets_s3_path"),onProgress:function(){return function(t){return e.css("width",t+"%")}}(this),onFinishS3Put:function(){return function(n){return e.replaceWith("<div class='upload'>"+t.type+" - "+t.name+"</div>"),Backbone.trigger("upload:finished",n)}}(this),onError:function(t){return console.log("Upload error: ",t)}})},n.prototype.initMeters=function(){return this.$meters?void 0:(this.$meters=$("<div class='progress-meters' />"),this.$el.parent().append(this.$meters))},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.UserView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.model=ds.current_user,this.visible=!0,this.listenTo(Backbone,"scopes:toggle",this.toggle),this.render()},n.prototype.el="#user",n.prototype.events={"click .to-profile":"to_profile"},n.prototype.toggle=function(){return this.visible?this.hide():this.show()},n.prototype.hide=function(){return this.$el.addClass("hidden"),this.visible=!1},n.prototype.show=function(){return this.visible=!0,this.$el.removeClass("hidden")},n.prototype.template=JST["logbook/templates/user"],n.prototype.render=function(){return this.$el.html(this.template(this.model.tplAttrs())),this},n.prototype.to_profile=function(t){var e;return t.preventDefault(),e=t.currentTarget.pathname,console.log(e),ds.router.navigate(e,{trigger:!0})},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;ds.Router=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.on("route",function(t){return Backbone.trigger("routed",t)})},n.prototype.routes={logbook:"dashboard","logbook/dashboard":"dashboard","logbook/people":"people_index","logbook/people/new":"people_new","logbook/people/:id":"people_show","logbook/people/:id/edit":"people_edit","logbook/engagements":"engagements_index","logbook/engagements/new":"engagements_new","logbook/engagements/:id":"engagements_show","logbook/engagements/:id/edit":"engagements_edit","logbook/projects":"projects_index","logbook/projects/new":"projects_new","logbook/projects/:id":"projects_show","logbook/projects/:id/edit":"projects_edit","logbook/report_submissions":"report_submissions_index","logbook/report_submissions/:id":"report_submissions_show","logbook/:notable_type/:notable_id/notes/add":"notes_new"},n.prototype.dashboard=function(){return Backbone.trigger("dashboard:show")},n.prototype.people_index=function(){return Backbone.trigger("people:index")},n.prototype.people_show=function(t){return Backbone.trigger("people:show",t)},n.prototype.people_new=function(t){return Backbone.trigger("people:new",t)},n.prototype.people_edit=function(t){return Backbone.trigger("people:edit",t)},n.prototype.engagements_index=function(){return Backbone.trigger("engagements:index")},n.prototype.engagements_show=function(t){return Backbone.trigger("engagements:show",t)},n.prototype.engagements_new=function(t){return Backbone.trigger("engagements:new",t)},n.prototype.engagements_edit=function(t){return Backbone.trigger("engagements:edit",t)},n.prototype.projects_index=function(){return Backbone.trigger("projects:index")},n.prototype.projects_show=function(t){return Backbone.trigger("projects:show",t)},n.prototype.projects_new=function(t){return Backbone.trigger("projects:new",t)},n.prototype.projects_edit=function(t){return Backbone.trigger("projects:edit",t)},n.prototype.report_submissions_index=function(){return Backbone.trigger("report_submissions:index")},n.prototype.report_submissions_show=function(t){return Backbone.trigger("report_submissions:show",t)},n.prototype.notes_new=function(t,e){return Backbone.trigger("notes:new",t,e)},n}(Backbone.Router)}.call(this),function(){window.ds||(window.ds={}),ds.models={},ds.views={},ds.controllers={},ds.collections={},ds.run=function(){return ds.current_user=new ds.User(ds.CONSTANTS.current_user),ds.collections.sites=new ds.SitesCollection,ds.collections.schools=new ds.SchoolsCollection,ds.collections.people=new ds.PeopleCollection,ds.collections.projects=new ds.ProjectsCollection,ds.collections.engagements=new ds.EngagementsCollection,ds.collections.report_submissions=new ds.ReportSubmissionsCollection,ds.views.app_view=new ds.AppView,ds.views.scope_toggle=new ds.ScopeToggleView,ds.views.scope_menu=new ds.ScopeMenuView,ds.views.user_view=new ds.UserView,ds.views.global_add_trigger=new ds.GlobalAddTriggerView,ds.views.time_filter=new ds.TimeFilterView,ds.views.quick_search=new ds.QuickSearchView,ds.controllers.dashboard=new ds.DashboardController,ds.controllers.people=new ds.PeopleController,ds.controllers.engagements=new ds.EngagementsController,ds.controllers.projects=new ds.ProjectsController,ds.controllers.report_submissions=new ds.ReportSubmissionsController,ds.controllers.notes=new ds.NotesController,ds.router=new ds.Router,ds.scopeHelper.setScope(ds.CONSTANTS.scope),Backbone.history.start({pushState:!0})}}.call(this),function(){$(function(){return ds.run()})}.call(this);