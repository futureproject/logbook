%h1 Weekly Core Log
=form_for @weekly_log_entry do |f|
  %table
    %tr
      %th Name
      %th Attended Meeting
      %th Engagement (5 is best)
      %th
    - @people.each do |p|
      %tr
        - if p.entry_this_week.present?
          %td= p.name
          %td= p.entry_this_week.attended_meeting
          %td= p.entry_this_week.quality
          %td
        - elsif p == @subject
          %tr
            %td= p.name
            %td
              %table.no-borders
                %tr
                  %td=f.radio_button :attended_meeting, true, value: true
                  %td=f.radio_button :attended_meeting, false, value: false
                %tr
                  %td=f.label :attended_meeting, 'Yes', value: true
                  %td=f.label :attended_meeting, 'No', value: false

            =f.hidden_field :person_id
            =f.hidden_field :user_id
            %td
              %table.no-borders
                %tr
                  %td=f.radio_button :quality, '1', value: 1
                  %td=f.radio_button :quality, '2', value: 2
                  %td=f.radio_button :quality, '3', value: 3
                  %td=f.radio_button :quality, '4', value: 4
                  %td=f.radio_button :quality, '5', value: 5
                %tr
                  %td=f.label :quality, 1, value: 1
                  %td=f.label :quality, 2, value: 2
                  %td=f.label :quality, 3, value: 3
                  %td=f.label :quality, 4, value: 4
                  %td=f.label :quality, 5, value: 5
            %td.last= f.submit "Log It", disable_with: 'Logging...'
        - else
          %td{colspan: 4}= p.name
